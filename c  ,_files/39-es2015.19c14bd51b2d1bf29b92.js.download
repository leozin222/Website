(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{xY5r:function(e,t,n){"use strict";n.r(t),n.d(t,"GradesAndTestsModule",(function(){return dr}));var a=n("tyNb"),i=n("PCNd"),r=n("KoGS"),o=n("wd/R"),s=n("AytR"),l=n("PSD3"),c=n.n(l),d=n("mrSG"),m=n("3Pt+"),p=n("0IaG"),u=n("U+A9"),g=n.n(u),f=n("fXoL"),v=n("V1Po"),h=n("7o2P"),x=n("CyUU"),b=n("ofXK"),S=n("kmnG"),C=n("d3UM"),y=n("bTqV"),E=n("4Kj8"),w=n("7EHt"),I=n("Qu3c"),_=n("FKr1");const O=["dragDropArea"],j=["inputFile"];function P(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner")}function M(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"tr"),f["\u0275\u0275elementStart"](1,"td",27),f["\u0275\u0275elementStart"](2,"div",28),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",29),f["\u0275\u0275text"](5),f["\u0275\u0275pipe"](6,"date"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"td",30),f["\u0275\u0275text"](8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](e.person_name),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind2"](6,3,e.follow_date,"dd/MM/yyyy HH:mm:ss")),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" ",e.test_description," ")}}function F(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",22),f["\u0275\u0275elementStart"](1,"mat-accordion"),f["\u0275\u0275elementStart"](2,"mat-expansion-panel"),f["\u0275\u0275elementStart"](3,"mat-expansion-panel-header"),f["\u0275\u0275elementStart"](4,"mat-panel-title"),f["\u0275\u0275element"](5,"i",23),f["\u0275\u0275text"](6," Acompanhamento "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](7,"mat-panel-description"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"div",24),f["\u0275\u0275elementStart"](9,"table",25),f["\u0275\u0275elementStart"](10,"tbody"),f["\u0275\u0275template"](11,M,9,6,"tr",26),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](11),f["\u0275\u0275property"]("ngForOf",e.paperData.follow)}}function A(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",28),f["\u0275\u0275elementStart"](1,"div"),f["\u0275\u0275elementStart"](2,"span"),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](4,"br"),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate2"]("",e.student_name," (",e.student_code,")")}}function D(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",22),f["\u0275\u0275elementStart"](1,"mat-accordion"),f["\u0275\u0275elementStart"](2,"mat-expansion-panel"),f["\u0275\u0275elementStart"](3,"mat-expansion-panel-header"),f["\u0275\u0275elementStart"](4,"mat-panel-title"),f["\u0275\u0275element"](5,"i",23),f["\u0275\u0275text"](6," Integrantes "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](7,"mat-panel-description"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](8,A,5,2,"div",31),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](8),f["\u0275\u0275property"]("ngForOf",e.paperData.students)}}function k(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",32),f["\u0275\u0275elementStart"](1,"a",33),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"]().onClickDownloadFile()})),f["\u0275\u0275elementStart"](2,"div",34),f["\u0275\u0275element"](3,"img",35),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",36),f["\u0275\u0275elementStart"](5,"span",7),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](7,"br"),f["\u0275\u0275elementStart"](8,"span",37),f["\u0275\u0275text"](9,"Clique para baixar"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](6),f["\u0275\u0275textInterpolate"](null==e.paperData?null:e.paperData.paper_name)}}function T(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",32),f["\u0275\u0275elementStart"](1,"a",38),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"]().onClickDownloadFileRevised()})),f["\u0275\u0275elementStart"](2,"div",34),f["\u0275\u0275element"](3,"img",35),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",36),f["\u0275\u0275elementStart"](5,"span",7),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](7,"br"),f["\u0275\u0275elementStart"](8,"span",37),f["\u0275\u0275text"](9,"Clique para baixar arquivo corrigido"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](6),f["\u0275\u0275textInterpolate"](null==e.paperData?null:e.paperData.paper_correction_name)}}function q(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-option",39),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275property"]("value",e.specialization),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate2"]("",e.name," (",e.specialization,")")}}function N(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",40),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"]().sendPaperFile()})),f["\u0275\u0275text"](1,"Alterar"),f["\u0275\u0275elementEnd"]()}}const V=n("uIBO"),z=n("75J1");let B=(()=>{class e{constructor(e,t,n,a,i,r){this.dialogRef=e,this.testService=t,this.data=n,this.formBuilder=a,this.commonService=i,this.productionService=r,this.loadingPaperComponent=!1,this.students=[],this.paperForm=this.formBuilder.group({production_file:[null,m.Validators.required],students:[[],null]})}ngOnInit(){this.getPaperData(),this.getStudents(),this.initializeUppy()}initializeUppy(){this.elementInputFile=this.inputFile.nativeElement,this.elementDragDropArea=this.dragDropArea.nativeElement,this.paperFile=V({debug:!1,autoProceed:!1,onBeforeFileAdded:e=>(this.paperForm.controls.production_file.setValue(e.data),e),restrictions:{maxFileSize:5e6,maxNumberOfFiles:1,minNumberOfFiles:1}}),this.paperFile.use(z,{trigger:this.inputFile,inline:!0,target:this.elementDragDropArea,replaceTargetContent:!0,showProgressDetails:!0,width:"100%",height:300,thumbnailWidth:30,metaFields:[{id:"name",name:"Nome",placeholder:"Nome do arquivo"}],browserBackButtonClose:!0,locale:g.a,hideUploadButton:!0,hideRetryButton:!0,hidePauseResumeButton:!0,hideProgressAfterFinish:!0,disableStatusBar:!0,proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,theme:"dark",dropHint:"Teste"})}getPaperData(){this.loadingPaperComponent=!0,this.productionService.getPaper(this.data.test.semester,this.data.test.testCode,this.data.test.classCode).subscribe({next:e=>{var t=e.students.map(e=>e.student_code);this.paperForm.get("students").setValue(t),this.paperData=e},error:e=>{this.loadingPaperComponent=!1},complete:()=>{this.loadingPaperComponent=!1}})}sendPaperFile(){return Object(d.a)(this,void 0,void 0,(function*(){for(let n in this.paperForm.controls)this.paperForm.controls[n].markAsTouched();if(this.paperForm.controls.production_file.hasError("required"))return c.a.fire({text:"Selecione o arquivo",icon:"warning"}),!1;if(!this.paperForm.valid)return!1;let e=this.paperForm.value;var t=yield this.commonService.convertBlobToBase64(e.production_file);this.productionService.updatePaper(e.students,t,this.data.test.semester,this.paperData.paper_sequence,this.paperData.paper_group_code).subscribe({next:e=>{c.a.fire({text:"Paper alterado com sucesso.",icon:"success"}),this.dialogRef.close(!0)},error:e=>{c.a.fire({text:"Ocorreu um erro ao inserir o registro.",icon:"error"})},complete:()=>{}})}))}getStudents(){this.loadingPaperComponent=!0,this.productionService.getStudents(this.data.test.semester,this.data.test.testCode,this.data.test.classCode,this.data.test.subjectCode,this.data.test.paperCode).subscribe({next:e=>{if(!e||null==e)return!0;this.students=e.map(e=>this.createNewObjectStudent(e))},error:e=>{this.loadingPaperComponent=!1},complete:()=>{this.loadingPaperComponent=!1}})}createNewObjectStudent(e){return{specialization:e.specialization,name:e.person_name||e.full_name}}onClickDownloadFile(){this.commonService.downloadFileBase64(this.paperData.paper_mime,this.paperData.paper_name,this.paperData.paper_file)}onClickDownloadFileRevised(){this.commonService.downloadFileBase64(this.paperData.paper_correction_mime,this.paperData.paper_correction_name,this.paperData.paper_correction_file)}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](p.i),f["\u0275\u0275directiveInject"](v.a),f["\u0275\u0275directiveInject"](p.a),f["\u0275\u0275directiveInject"](m.FormBuilder),f["\u0275\u0275directiveInject"](h.a),f["\u0275\u0275directiveInject"](x.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-paper-update-dialog"]],viewQuery:function(e,t){var n;1&e&&(f["\u0275\u0275staticViewQuery"](O,!0),f["\u0275\u0275staticViewQuery"](j,!0)),2&e&&(f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(t.dragDropArea=n.first),f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(t.inputFile=n.first))},decls:41,vars:20,consts:[["mat-dialog-title",""],[1,"font-light"],[1,"mat-typography"],[4,"ngIf"],[3,"hidden"],[1,"ava-info-list"],[1,"info-item"],[1,"title"],["class","mt-3",4,"ngIf"],["class","div-download-file mt-3",4,"ngIf"],[3,"formGroup","hidden"],[1,"list-test-container"],["appearance","fill",1,"w-100"],["formControlName","students","multiple","",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],["name","paperFile","type","file",3,"hidden"],["inputFile",""],[1,"uppy-file-dashboard","w-100",3,"ngClass"],["dragDropArea",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"mt-3"],[1,"far","fa-folder-open"],[1,"table-responsive"],[1,"w-100"],[4,"ngFor","ngForOf"],[1,"text-left","p-2"],[1,"font-regular"],[1,"ava-text-light"],[1,"text-left"],["class","font-regular",4,"ngFor","ngForOf"],[1,"div-download-file","mt-3"],["matTooltip","Clique para baixar o arquivo",3,"click"],[1,"float-left"],["src","assets/icons/icon-file.png"],[1,""],[1,"subtitle"],["matTooltip","Clique para baixar o arquivo corrigido",3,"click"],[3,"value"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"h2",0),f["\u0275\u0275text"](1,"Visualiza\xe7\xe3o de arquivo "),f["\u0275\u0275elementStart"](2,"span",1),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"mat-dialog-content",2),f["\u0275\u0275template"](5,P,1,0,"ava-spinner",3),f["\u0275\u0275elementStart"](6,"div",4),f["\u0275\u0275elementStart"](7,"div",5),f["\u0275\u0275elementStart"](8,"div",6),f["\u0275\u0275elementStart"](9,"span",7),f["\u0275\u0275text"](10,"Data:"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](11),f["\u0275\u0275pipe"](12,"date"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](13,"div",6),f["\u0275\u0275elementStart"](14,"span",7),f["\u0275\u0275text"](15,"Semestre:"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](16),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](17,"div",6),f["\u0275\u0275elementStart"](18,"span",7),f["\u0275\u0275text"](19,"Situa\xe7\xe3o:"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](20),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](21,F,12,1,"div",8),f["\u0275\u0275template"](22,D,9,1,"div",8),f["\u0275\u0275template"](23,k,10,1,"div",9),f["\u0275\u0275template"](24,T,10,1,"div",9),f["\u0275\u0275elementStart"](25,"form",10),f["\u0275\u0275elementStart"](26,"div",11),f["\u0275\u0275elementContainerStart"](27),f["\u0275\u0275elementStart"](28,"mat-form-field",12),f["\u0275\u0275elementStart"](29,"mat-label"),f["\u0275\u0275text"](30,"Selecione os integrantes da equipe"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](31,"mat-select",13),f["\u0275\u0275template"](32,q,2,3,"mat-option",14),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](33,"input",15,16),f["\u0275\u0275element"](35,"div",17,18),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](37,"mat-dialog-actions",19),f["\u0275\u0275elementStart"](38,"button",20),f["\u0275\u0275text"](39,"Fechar"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](40,N,2,0,"button",21),f["\u0275\u0275elementEnd"]()),2&e&&(f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" | ",t.data.test.description,""),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",t.loadingPaperComponent),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("hidden",t.loadingPaperComponent),f["\u0275\u0275advance"](5),f["\u0275\u0275textInterpolate1"](" ",f["\u0275\u0275pipeBind2"](12,17,null==t.paperData?null:t.paperData.created_at,"shortDate")," "),f["\u0275\u0275advance"](5),f["\u0275\u0275textInterpolate1"](" ",null==t.paperData?null:t.paperData.paper_semester," "),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate1"](" ",null==t.paperData?null:t.paperData.paper_status," "),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",null==t.paperData?null:t.paperData.follow),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",null==t.paperData?null:t.paperData.students),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",null==t.paperData?null:t.paperData.paper_name),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",null==t.paperData?null:t.paperData.paper_correction_file),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("formGroup",t.paperForm)("hidden",0==t.data.canSend),f["\u0275\u0275advance"](6),f["\u0275\u0275property"]("disabled",0==t.students.length||0==t.data.canSend),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",t.students),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("hidden",!0),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngClass",null==t.paperForm.value.production_file?"is-invalid":""),f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("ngIf",t.data.canSend))},directives:[p.j,p.g,b.t,m["\u0275angular_packages_forms_forms_y"],m.NgControlStatusGroup,m.FormGroupDirective,S.c,S.g,C.a,m.NgControlStatus,m.FormControlName,b.s,b.q,p.c,y.b,p.d,E.a,w.a,w.c,w.e,w.f,w.d,I.a,_.o],pipes:[b.f],styles:[""]}),e})();const R=["dragDropArea"],H=["inputFile"];function Q(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner")}function G(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-option",18),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275property"]("value",e.specialization),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate2"]("",e.name," (",e.specialization,")")}}const L=n("uIBO"),U=n("75J1");let Y=(()=>{class e{constructor(e,t,n,a,i,r){this.dialogRef=e,this.testService=t,this.data=n,this.formBuilder=a,this.commonService=i,this.productionService=r,this.loadingPaperComponent=!1,this.loadingSendPaperFile=!1,this.students=[],this.paperForm=this.formBuilder.group({production_file:[null,m.Validators.required],students:[[],null]})}ngOnInit(){this.initializeUppy(),this.getStudents(),this.data.isUpdate&&this.getPaperData()}initializeUppy(){this.elementInputFile=this.inputFile.nativeElement,this.elementDragDropArea=this.dragDropArea.nativeElement,this.paperFile=L({debug:!1,autoProceed:!1,onBeforeFileAdded:e=>(this.paperForm.controls.production_file.setValue(e.data),e),restrictions:{maxFileSize:5e6,maxNumberOfFiles:1,minNumberOfFiles:1}}),this.paperFile.use(U,{trigger:this.inputFile,inline:!0,target:this.elementDragDropArea,replaceTargetContent:!0,showProgressDetails:!0,width:"100%",height:300,thumbnailWidth:30,metaFields:[{id:"name",name:"Nome",placeholder:"Nome do arquivo"}],browserBackButtonClose:!0,locale:g.a,hideUploadButton:!0,hideRetryButton:!0,hidePauseResumeButton:!0,hideProgressAfterFinish:!0,disableStatusBar:!0,proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,theme:"dark",dropHint:"Teste"})}getPaperData(){this.productionService.getPaper(this.data.test.semester,this.data.test.testCode,this.data.test.classCode).subscribe({next:e=>{var t=e.students.map(e=>e.student_code);this.paperForm.get("students").setValue(t)},error:e=>{},complete:()=>{}})}sendPaperFile(){return Object(d.a)(this,void 0,void 0,(function*(){this.loadingSendPaperFile=!0;for(let n in this.paperForm.controls)this.paperForm.controls[n].markAsTouched();if(this.paperForm.controls.production_file.hasError("required"))return c.a.fire({text:"Selecione o arquivo",icon:"warning"}),this.loadingSendPaperFile=!1,!1;if(!this.paperForm.valid)return this.loadingSendPaperFile=!1,!1;let e=this.paperForm.value;var t=yield this.commonService.convertBlobToBase64(e.production_file);this.productionService.newPaper(e.students,t,this.data.test.semester,this.data.test.testCode,this.data.test.classCode).subscribe({next:e=>{c.a.fire({text:"Paper inclu\xeddo com sucesso.",icon:"success"}),this.dialogRef.close(!0)},error:e=>{c.a.fire({text:"Ocorreu um erro ao inserir o registro.",icon:"error"}),this.loadingSendPaperFile=!1},complete:()=>{this.loadingSendPaperFile=!1}})}))}getStudents(){this.loadingPaperComponent=!0,this.productionService.getStudents(this.data.test.semester,this.data.test.testCode,this.data.test.classCode,this.data.test.subjectCode,this.data.test.paperCode).subscribe({next:e=>{if(!e||null==e)return!0;this.students=e.map(e=>this.createNewObjectStudent(e))},error:e=>{this.loadingPaperComponent=!1},complete:()=>{this.loadingPaperComponent=!1}})}createNewObjectStudent(e){return{specialization:e.specialization,name:e.person_name||e.full_name}}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](p.i),f["\u0275\u0275directiveInject"](v.a),f["\u0275\u0275directiveInject"](p.a),f["\u0275\u0275directiveInject"](m.FormBuilder),f["\u0275\u0275directiveInject"](h.a),f["\u0275\u0275directiveInject"](x.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-paper"]],viewQuery:function(e,t){var n;1&e&&(f["\u0275\u0275staticViewQuery"](R,!0),f["\u0275\u0275staticViewQuery"](H,!0)),2&e&&(f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(t.dragDropArea=n.first),f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(t.inputFile=n.first))},decls:27,vars:10,consts:[["mat-dialog-title",""],[1,"font-light"],[1,"mat-typography"],[4,"ngIf"],[3,"hidden"],[3,"formGroup"],[1,"list-test-container"],["appearance","fill",1,"w-100"],["formControlName","students","multiple","",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],[1,"ava-alert","blue","w-100"],["name","paperFile","type","file",3,"hidden"],["inputFile",""],[1,"uppy-file-dashboard","w-100",3,"ngClass"],["dragDropArea",""],["align","end"],["mat-button","","mat-dialog-close",""],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"h2",0),f["\u0275\u0275text"](1,"Envio de arquivo "),f["\u0275\u0275elementStart"](2,"span",1),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"mat-dialog-content",2),f["\u0275\u0275template"](5,Q,1,0,"ava-spinner",3),f["\u0275\u0275elementStart"](6,"div",4),f["\u0275\u0275elementContainerStart"](7),f["\u0275\u0275elementStart"](8,"form",5),f["\u0275\u0275elementStart"](9,"div",6),f["\u0275\u0275elementContainerStart"](10),f["\u0275\u0275elementStart"](11,"mat-form-field",7),f["\u0275\u0275elementStart"](12,"mat-label"),f["\u0275\u0275text"](13,"Selecione os integrantes da equipe"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](14,"mat-select",8),f["\u0275\u0275template"](15,G,2,3,"mat-option",9),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](16,"div",10),f["\u0275\u0275text"](17," Clique para selecionar o arquivo ou apenas arraste-o abaixo. "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](18,"input",11,12),f["\u0275\u0275element"](20,"div",13,14),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](22,"mat-dialog-actions",15),f["\u0275\u0275elementStart"](23,"button",16),f["\u0275\u0275text"](24,"Fechar"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](25,"button",17),f["\u0275\u0275listener"]("click",(function(){return t.sendPaperFile()})),f["\u0275\u0275text"](26),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e&&(f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" | ",t.data.test.description,""),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",t.loadingPaperComponent),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("hidden",t.loadingPaperComponent),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("formGroup",t.paperForm),f["\u0275\u0275advance"](6),f["\u0275\u0275property"]("disabled",0==t.students.length||0==t.data.canSend),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",t.students),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("hidden",!0),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngClass",null==t.paperForm.value.production_file?"is-invalid":""),f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("disabled",t.loadingSendPaperFile),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",t.loadingSendPaperFile?"Enviando":"Enviar"," "))},directives:[p.j,p.g,b.t,m["\u0275angular_packages_forms_forms_y"],m.NgControlStatusGroup,m.FormGroupDirective,S.c,S.g,C.a,m.NgControlStatus,m.FormControlName,b.s,b.q,p.c,y.b,p.d,E.a,_.o],styles:[".list-test-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap}.list-test-container[_ngcontent-%COMP%]   .list-test-item[_ngcontent-%COMP%]{width:calc(50% - 12px);padding-top:10px;padding-left:10px;padding-right:10px;margin:6px;border-radius:8px}.list-test-container[_ngcontent-%COMP%]   .list-test-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:24px}.list-test-container[_ngcontent-%COMP%]   .list-test-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center}.list-test-container[_ngcontent-%COMP%]   .list-test-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:calc(100% - 128px)}@media (max-width:768px){.list-test-container[_ngcontent-%COMP%]   .list-test-item[_ngcontent-%COMP%]{width:100%}}.average-container[_ngcontent-%COMP%]{width:100%;background:#00a09f;padding:10px;margin-bottom:5px;border-radius:8px}.average-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:Neo Sans Std Regular;font-size:1rem}.average-container[_ngcontent-%COMP%]   .average-calculated[_ngcontent-%COMP%]{text-align:center;font-size:2rem;padding:13px;font-family:Neo Sans Std Bold}"]}),e})(),J=(()=>{class e{constructor(e,t,n,a,i,r){this.newOportinityRef=e,this.testService=t,this.dialog=n,this.commonService=a,this.router=i,this.data=r,this.subject=r.subject,this.test=r.test}confirm(){this.closeModal(),c.a.fire({title:"Processando solicita\xe7\xe3o!",didOpen:()=>{c.a.showLoading()}}),this.testService.confirmNewOportunity(this.test).subscribe({next:e=>{c.a.close(),c.a.fire({text:"Solicita\xe7\xe3o registrada com sucesso.",icon:"success"}),this.reloadListComponent()},error:e=>{c.a.close(),c.a.fire({text:"Ocorreu um erro ao enviar a solicita\xe7\xe3o.",icon:"error"})}})}reloadListComponent(){let e=this.commonService.base64Encode(JSON.stringify({subject:this.subject}));this.router.navigateByUrl("",{skipLocationChange:!0}).then(()=>this.router.navigate(["/subject/grades-and-tests/list",e]))}closeModal(){this.newOportinityRef.close()}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](p.i),f["\u0275\u0275directiveInject"](v.a),f["\u0275\u0275directiveInject"](p.b),f["\u0275\u0275directiveInject"](h.a),f["\u0275\u0275directiveInject"](a.e),f["\u0275\u0275directiveInject"](p.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-new-oportunity-dialog"]],decls:21,vars:0,consts:[["mat-dialog-title",""],[1,"mat-typography"],[1,"font-light"],["align","end"],["mat-raised-button","","color","ava-secondary",3,"click"],["mat-raised-button","","color","ava-danger",3,"click"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"h2",0),f["\u0275\u0275text"](1,"SOLICITAR PROVA ONLINE"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](2,"mat-dialog-content",1),f["\u0275\u0275elementStart"](3,"p",2),f["\u0275\u0275text"](4," Ao clicar no bot\xe3o "),f["\u0275\u0275elementStart"](5,"strong"),f["\u0275\u0275text"](6,"\u201cSolicitar prova on-line\u201d"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](7,", voc\xea ter\xe1 acesso \xe0 avalia\xe7\xe3o final desta disciplina no formato on-line. "),f["\u0275\u0275elementStart"](8,"strong"),f["\u0275\u0275text"](9,"Esse pedido ser\xe1 atendido em at\xe9 24 horas"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](10,", ent\xe3o, fique atento para n\xe3o perder o prazo! ;)"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](11,"p",2),f["\u0275\u0275text"](12," Aten\xe7\xe3o: a nova avalia\xe7\xe3o final on-line ser\xe1 considerada oficial para fechamento da m\xe9dia final da disciplina, ou seja, substitui a avalia\xe7\xe3o anterior "),f["\u0275\u0275elementStart"](13,"em"),f["\u0275\u0275text"](14,"(mesmo que tenha nota ou esteja pendente de corre\xe7\xe3o)"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](15," e tamb\xe9m o pedido de revis\xe3o, se houver "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](16,"mat-dialog-actions",3),f["\u0275\u0275elementStart"](17,"button",4),f["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),f["\u0275\u0275text"](18," Fechar "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](19,"button",5),f["\u0275\u0275listener"]("click",(function(){return t.confirm()})),f["\u0275\u0275text"](20," Solicitar prova on-line "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]())},directives:[p.j,p.g,p.c,y.b],styles:[""]}),e})();var W=n("nm5K"),K=n("IRlW");let X=(()=>{class e{constructor(e,t){this.apiService=e,this.security=t}getSchedules(e){return this.apiService.post({student:this.security.securityObject.specialization,subject:e},s.a.apiAvaUrl+"/test-schedule/schedules")}getDisciplineInfo(e){return this.apiService.post({discipline:e},s.a.apiAvaUrl+"/test-schedule/discipline")}getScheduleSearch(e,t){return this.apiService.post({student:this.security.securityObject.specialization,semester:e,subject:t,ignore_period:!0},s.a.apiAvaUrl+"/test-schedule/search-schedule")}storeSchedule(e,t,n,a,i){return this.apiService.post({student:this.security.securityObject.specialization,schedule:e,semester:t,subject:n,test_code:a,is_new_opportunity:i},s.a.apiAvaUrl+"/test-schedule/store-schedule")}storeScheduleCancelation(e){var t={schedule_id:Number(e.id),reason:e.reason.value,reason_description:e.reasonDescription.value};return this.apiService.post(t,s.a.apiAvaUrl+"/test-schedule/store-schedule-cancelation")}getCancelReasonOptions(){return this.apiService.get("",s.a.apiAvaUrl+"/test-schedule/cancel-reasons")}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275inject"](W.a),f["\u0275\u0275inject"](K.a))},e.\u0275prov=f["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e})();var Z=n("qFsG");function ee(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner",2)}function te(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-option",11),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275property"]("value",e.code),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",e.description," ")}}function ne(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"mat-error"),f["\u0275\u0275text"](1,"Um motivo deve ser selecionado"),f["\u0275\u0275elementEnd"]())}function ae(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"mat-error"),f["\u0275\u0275text"](1,"A descri\xe7\xe3o \xe9 obrigat\xf3ria"),f["\u0275\u0275elementEnd"]())}function ie(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"h2",3),f["\u0275\u0275text"](2,"CANCELAMENTO DE AGENDAMENTO"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"mat-dialog-content"),f["\u0275\u0275elementStart"](4,"form"),f["\u0275\u0275elementStart"](5,"mat-form-field",4),f["\u0275\u0275elementStart"](6,"mat-label"),f["\u0275\u0275text"](7,"Motivo"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"mat-select",5),f["\u0275\u0275template"](9,te,2,2,"mat-option",6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](10,ne,2,0,"mat-error",1),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](11,"mat-form-field",4),f["\u0275\u0275elementStart"](12,"mat-label"),f["\u0275\u0275text"](13,"Descri\xe7\xe3o"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](14,"textarea",7),f["\u0275\u0275template"](15,ae,2,0,"mat-error",1),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](16,"div",8),f["\u0275\u0275elementStart"](17,"button",9),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"]().confirmScheduleCancel()})),f["\u0275\u0275text"](18," Confirmar cancelamento "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](19,"button",10),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"]().closeModal()})),f["\u0275\u0275text"](20," Fechar "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](8),f["\u0275\u0275property"]("formControl",e.scheduleCancelation.reason),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.reasonOptions),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.scheduleCancelation.reason.invalid),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("formControl",e.scheduleCancelation.reasonDescription),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.scheduleCancelation.reasonDescription.invalid)}}let re=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.scheduleService=t,this.data=n,this.loadingCancel=!1,this.scheduleCancelation={id:null,reason:new m.FormControl("",[m.Validators.required]),reasonDescription:new m.FormControl("",[m.Validators.required])},this.scheduleCancelation.id=n}ngOnInit(){this.getReasonOptions()}getReasonOptions(){this.loadingCancel=!0,this.scheduleService.getCancelReasonOptions().subscribe(e=>{this.reasonOptions=e,this.loadingCancel=!1})}confirmScheduleCancel(){this.scheduleCancelation.reason.hasError("required")||this.scheduleCancelation.reasonDescription.hasError("required")||(this.loadingCancel=!0,this.scheduleService.storeScheduleCancelation(this.scheduleCancelation).subscribe({next:e=>{this.loadingCancel=!1,this.dialogRef.close(e)},error:e=>{this.loadingCancel=!1,this.dialogRef.close(e)}}))}closeModal(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](p.i),f["\u0275\u0275directiveInject"](X),f["\u0275\u0275directiveInject"](p.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["schedule-cancel-modal"]],decls:2,vars:2,consts:[["tooltipContent","Carregando as informa\xe7\xf5es...",4,"ngIf"],[4,"ngIf"],["tooltipContent","Carregando as informa\xe7\xf5es..."],["mat-dialog-title",""],["appearance","outline",1,"w-100"],["required","",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Descreva o motivo do cancelamento...","required","",3,"formControl"],["mat-dialog-actions",""],["mat-raised-button","","color","ava-primary",3,"click"],["mat-raised-button","",3,"click"],[3,"value"]],template:function(e,t){1&e&&(f["\u0275\u0275template"](0,ee,1,0,"ava-spinner",0),f["\u0275\u0275template"](1,ie,21,5,"ng-container",1)),2&e&&(f["\u0275\u0275property"]("ngIf",t.loadingCancel),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingCancel))},directives:[b.t,E.a,p.j,p.g,m["\u0275angular_packages_forms_forms_y"],m.NgControlStatusGroup,m.NgForm,S.c,S.g,C.a,m.RequiredValidator,m.NgControlStatus,m.FormControlDirective,b.s,Z.b,m.DefaultValueAccessor,p.c,y.b,_.o,S.b],encapsulation:2}),e})(),oe=(()=>{class e{constructor(e,t,n,a,i,r){this.scheduleDialogRef=e,this.cancelDialogRef=t,this.dialog=n,this.commonService=a,this.router=i,this.data=r;let o=r.test.hora_inicio.split(":"),s=r.test.hora_fim.split(":");this.subject=r.subject,this.schedule=Object.assign(Object.assign({},r.test),{hora_inicio:`${o[0]}:${o[1]}`,hora_fim:`${s[0]}:${s[1]}`})}openDialog(e){this.dialog.open(re,{width:"550px",height:"330px",data:e}).afterClosed().subscribe(e=>{200!=e.status?c.a.fire({toast:!1,text:e.data.message,icon:"warning",confirmButtonText:"Fechar"}):(c.a.fire({toast:!1,text:e.data.message,icon:"success",confirmButtonText:"Fechar"}),this.reloadListComponent())})}reloadListComponent(){let e=this.commonService.base64Encode(JSON.stringify({subject:this.subject}));this.router.navigateByUrl("",{skipLocationChange:!0}).then(()=>this.router.navigate(["/subject/grades-and-tests/list",e]))}cancelSchedule(e){c.a.fire({title:"Tem certeza de que deseja cancelar o agendamento?",icon:"info",showDenyButton:!0,confirmButtonText:"Sim, cancelar",denyButtonText:"Voltar"}).then(t=>{t.isConfirmed&&(this.scheduleDialogRef.close(),this.openDialog(e))})}closeModal(){this.scheduleDialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](p.i),f["\u0275\u0275directiveInject"](p.i),f["\u0275\u0275directiveInject"](p.b),f["\u0275\u0275directiveInject"](h.a),f["\u0275\u0275directiveInject"](a.e),f["\u0275\u0275directiveInject"](p.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["schedule-details"]],decls:30,vars:14,consts:[["mat-dialog-title",""],[1,"font-light"],[1,"schedule-info"],["mat-dialog-actions",""],["mat-raised-button","","color","ava-danger",3,"click"],["mat-raised-button","","color","ava-secondary",3,"click"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"h2",0),f["\u0275\u0275text"](1,"DETALHES DO AGENDAMENTO"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](2,"mat-dialog-content"),f["\u0275\u0275elementStart"](3,"p",1),f["\u0275\u0275elementStart"](4,"strong",2),f["\u0275\u0275text"](5,"Prova agendada no polo para: "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"span"),f["\u0275\u0275text"](7),f["\u0275\u0275pipe"](8,"slice"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](9,"br"),f["\u0275\u0275elementStart"](10,"span"),f["\u0275\u0275text"](11,"* A realiza\xe7\xe3o da avalia\xe7\xe3o \xe9 de 1h."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](12,"p",1),f["\u0275\u0275elementStart"](13,"strong",2),f["\u0275\u0275text"](14,"Endere\xe7o: "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](15,"span"),f["\u0275\u0275text"](16),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](17,"br"),f["\u0275\u0275elementStart"](18,"span"),f["\u0275\u0275text"](19),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](20,"p",1),f["\u0275\u0275elementStart"](21,"strong",2),f["\u0275\u0275text"](22,"Local: "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](23,"span"),f["\u0275\u0275text"](24),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](25,"div",3),f["\u0275\u0275elementStart"](26,"button",4),f["\u0275\u0275listener"]("click",(function(){return t.cancelSchedule(t.schedule.id)})),f["\u0275\u0275text"](27," Cancelar agendamento "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](28,"button",5),f["\u0275\u0275listener"]("click",(function(){return t.closeModal()})),f["\u0275\u0275text"](29," Fechar "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e&&(f["\u0275\u0275advance"](7),f["\u0275\u0275textInterpolate2"]("",t.schedule.data," \xe0s ",f["\u0275\u0275pipeBind3"](8,10,t.schedule.hora_inicio,0,5),""),f["\u0275\u0275advance"](9),f["\u0275\u0275textInterpolate4"]("",t.schedule.endereco,", ",t.schedule.numero,", ",t.schedule.complemento," - ",t.schedule.bairro,""),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate3"]("",t.schedule.cidade," / ",t.schedule.sigla," - ",t.schedule.cep,""),f["\u0275\u0275advance"](5),f["\u0275\u0275textInterpolate"](t.schedule.ambiente))},directives:[p.j,p.g,p.c,y.b],pipes:[b.E],styles:["strong.schedule-info[_ngcontent-%COMP%]{font-weight:700;font-family:Neo Sans Std Regular}"]}),e})();var se=n("mZtN"),le=n("9vru"),ce=n("UDb9"),de=n("+0xr");function me(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner")}function pe(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275text"](1),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",e.errorMessage,"\n")}}function ue(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"th",13),f["\u0275\u0275text"](1,"N\xfamero"),f["\u0275\u0275elementEnd"]())}function ge(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"td",14),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",e.numero," ")}}function fe(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"th",13),f["\u0275\u0275text"](1,"Avalia\xe7\xe3o"),f["\u0275\u0275elementEnd"]())}function ve(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"td",14),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",e.avaliacao," ")}}function he(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"th",13),f["\u0275\u0275text"](1,"Data"),f["\u0275\u0275elementEnd"]())}function xe(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"td",14),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",e.data," ")}}function be(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"th",13),f["\u0275\u0275text"](1,"Hora in\xedcio"),f["\u0275\u0275elementEnd"]())}function Se(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"td",14),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",e.hora_inicio," ")}}function Ce(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"th",13),f["\u0275\u0275text"](1,"Hora fim"),f["\u0275\u0275elementEnd"]())}function ye(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"td",14),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",e.hora_fim," ")}}function Ee(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"th",13),f["\u0275\u0275text"](1,"Situa\xe7\xe3o"),f["\u0275\u0275elementEnd"]())}function we(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"td",14),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",e.situacao," ")}}function Ie(e,t){1&e&&f["\u0275\u0275element"](0,"tr",15)}function _e(e,t){1&e&&f["\u0275\u0275element"](0,"tr",16)}function Oe(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"table",2),f["\u0275\u0275elementContainerStart"](2,3),f["\u0275\u0275template"](3,ue,2,0,"th",4),f["\u0275\u0275template"](4,ge,2,1,"td",5),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementContainerStart"](5,6),f["\u0275\u0275template"](6,fe,2,0,"th",4),f["\u0275\u0275template"](7,ve,2,1,"td",5),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementContainerStart"](8,7),f["\u0275\u0275template"](9,he,2,0,"th",4),f["\u0275\u0275template"](10,xe,2,1,"td",5),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementContainerStart"](11,8),f["\u0275\u0275template"](12,be,2,0,"th",4),f["\u0275\u0275template"](13,Se,2,1,"td",5),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementContainerStart"](14,9),f["\u0275\u0275template"](15,Ce,2,0,"th",4),f["\u0275\u0275template"](16,ye,2,1,"td",5),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementContainerStart"](17,10),f["\u0275\u0275template"](18,Ee,2,0,"th",4),f["\u0275\u0275template"](19,we,2,1,"td",5),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275template"](20,Ie,1,0,"tr",11),f["\u0275\u0275template"](21,_e,1,0,"tr",12),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("dataSource",e.dataSource),f["\u0275\u0275advance"](19),f["\u0275\u0275property"]("matHeaderRowDef",e.displayedColumns),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("matRowDefColumns",e.displayedColumns)}}let je=(()=>{class e{constructor(e){this.scheduleService=e,this.displayedColumns=["N\xfamero","Disciplina","Data","Hora in\xedcio","Hora fim","Situa\xe7\xe3o"],this.dataSource=[],this.errorMessage="",this.loadingSchedule=!0}ngOnInit(){this.getSchedules()}getSchedules(){this.errorMessage="",this.scheduleService.getSchedules(this.subjectCode).subscribe({next:e=>{200!=e.status?this.errorMessage=e.data.message:this.dataSource=e.data.data,this.loadingSchedule=!1},error:e=>{this.errorMessage=e,this.loadingSchedule=!1}})}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](X))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["schedule-table"]],inputs:{subjectCode:"subjectCode"},decls:5,vars:3,consts:[[1,"page-title","font-ultra","mb-2","mt-4"],[4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","N\xfamero"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Disciplina"],["matColumnDef","Data"],["matColumnDef","Hora in\xedcio"],["matColumnDef","Hora fim"],["matColumnDef","Situa\xe7\xe3o"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275text"](1," HIST\xd3RICO DE AGENDAMENTOS\n"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](2,me,1,0,"ava-spinner",1),f["\u0275\u0275template"](3,pe,2,1,"ng-container",1),f["\u0275\u0275template"](4,Oe,22,3,"ng-container",1)),2&e&&(f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",t.loadingSchedule),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingSchedule&&t.errorMessage),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingSchedule&&!t.errorMessage))},directives:[b.t,E.a,de.o,de.c,de.i,de.b,de.k,de.n,de.h,de.a,de.j,de.m],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),e})();function Pe(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span",7),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate2"](" | ",e.subject.description," (",e.subject.code,")")}}function Me(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner",8)}function Fe(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",9),f["\u0275\u0275text"](1," Nenhuma avalia\xe7\xe3o encontrada!\n"),f["\u0275\u0275elementEnd"]())}function Ae(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"small",20),f["\u0275\u0275text"](1),f["\u0275\u0275pipe"](2,"slice"),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate2"](" Prova agendada no Polo: ",e.schedule.data," \xe0s ",f["\u0275\u0275pipeBind3"](2,2,e.schedule.hora_inicio,0,5)," ")}}function De(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"small"),f["\u0275\u0275text"](1),f["\u0275\u0275pipe"](2,"date"),f["\u0275\u0275pipe"](3,"date"),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate2"](" Per\xedodo para agendar: ",f["\u0275\u0275pipeBind2"](2,2,e.realizationWindowStart,"dd/MM/yyyy")," at\xe9 ",f["\u0275\u0275pipeBind2"](3,5,e.realizationWindowEnd,"dd/MM/yyyy")," ")}}function ke(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"small",20),f["\u0275\u0275text"](1),f["\u0275\u0275pipe"](2,"date"),f["\u0275\u0275pipe"](3,"date"),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate2"]("",f["\u0275\u0275pipeBind2"](2,2,e.beginDate,"dd/MM/yyyy")," at\xe9 ",f["\u0275\u0275pipeBind2"](3,5,e.endDate,"dd/MM/yyyy"),"")}}const Te=function(e){return{"text-strike":e}};function qe(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",21),f["\u0275\u0275elementStart"](1,"span",22),f["\u0275\u0275text"](2,"Nota"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"span",16),f["\u0275\u0275text"](4),f["\u0275\u0275pipe"](5,"number"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngClass",f["\u0275\u0275pureFunction1"](5,Te,e.isDiscarted)),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind2"](5,2,null==e?null:e.grade,"1.2-2")||"-")}}function Ne(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",21),f["\u0275\u0275elementStart"](1,"span",22),f["\u0275\u0275text"](2,"Peso"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"span",16),f["\u0275\u0275text"](4),f["\u0275\u0275pipe"](5,"number"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngClass",f["\u0275\u0275pureFunction1"](5,Te,e.isDiscarted)),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind2"](5,2,null==e?null:e.weight,"1.2-2"))}}function Ve(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",21),f["\u0275\u0275elementStart"](1,"span",22),f["\u0275\u0275text"](2,"Publicado"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"span"),f["\u0275\u0275text"](4),f["\u0275\u0275pipe"](5,"date"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate"](e.answerPublishDate?f["\u0275\u0275pipeBind2"](5,1,e.answerPublishDate,"dd/MM/yyyy"):"-")}}function ze(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"button",28),f["\u0275\u0275text"](1," Em Corre\xe7\xe3o "),f["\u0275\u0275elementEnd"]())}function $e(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",29),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"](2).goToAnswerBook(t)})),f["\u0275\u0275text"](1," Gabarito "),f["\u0275\u0275elementEnd"]()}}function Be(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",29),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"](2).openPaperDialog(t)})),f["\u0275\u0275text"](1," Enviar Arquivo "),f["\u0275\u0275elementEnd"]()}}function Re(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",30),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"](2).openPaperDialog(t,null==t||null==t.paper?null:t.paper.have_paper_file,null==t||null==t.paper||null==t.paper.buttons?null:t.paper.buttons.can_send)})),f["\u0275\u0275text"](1," Visualizar Arquivo "),f["\u0275\u0275elementEnd"]()}}function He(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",31),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"](2).goToInstitutionalEvaluation(t)})),f["\u0275\u0275text"](1," Responder "),f["\u0275\u0275elementEnd"]()}}function Qe(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",35),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"](3).$implicit;return f["\u0275\u0275nextContext"](2).goToAnswerTest(t)})),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"](3).$implicit,t=f["\u0275\u0275nextContext"](2);f["\u0275\u0275property"]("disabled",t.spoTestClick||!e.canAnswer&&!e.canTryAgain),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ","1"==e.realizationWay?"Responder no polo":e.needSchedule?"Responder prova monitorada":"Responder on-line"," ")}}function Ge(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"small",36),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](3).$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](e.newOportunityMsg)}}function Le(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",31),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"](3).$implicit;return f["\u0275\u0275nextContext"](2).goToAnswerTest(t)})),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"](3).$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" Tentar Novamente ",e.examMade," ")}}function Ue(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",37),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"](3).$implicit;return f["\u0275\u0275nextContext"](2).newOportunityDialog(t)})),f["\u0275\u0275text"](1," Solicitar prova on-line "),f["\u0275\u0275elementEnd"]()}}function Ye(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,Qe,2,2,"button",32),f["\u0275\u0275template"](2,Ge,2,1,"small",33),f["\u0275\u0275template"](3,Le,2,1,"button",27),f["\u0275\u0275template"](4,Ue,2,0,"button",34),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!(null!=e&&e.canSeeAnswers)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!!e.newOportunityMsg),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.canTryAgain&&e.canAnswer),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.newOportunity)}}function Je(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"button",38),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"](2).goToTestSchedule(t)})),f["\u0275\u0275text"](2," Agendar prova "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"](2).$implicit,t=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("disabled",t.disableScheduleButton(e))}}function We(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"button",39),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"](2).goToScheduleDetails(t.schedule)})),f["\u0275\u0275text"](2," Ver Agendamento "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()}}function Ke(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",23),f["\u0275\u0275template"](1,ze,2,0,"button",24),f["\u0275\u0275template"](2,$e,2,0,"button",25),f["\u0275\u0275template"](3,Be,2,0,"button",25),f["\u0275\u0275template"](4,Re,2,0,"button",26),f["\u0275\u0275template"](5,He,2,0,"button",27),f["\u0275\u0275template"](6,Ye,5,4,"ng-container",6),f["\u0275\u0275template"](7,Je,3,1,"ng-container",6),f["\u0275\u0275template"](8,We,3,0,"ng-container",6),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",(null==e?null:e.canSeeAnswers)&&!(null!=e&&e.grade)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",(null==e?null:e.canSeeAnswers)&&(null==e?null:e.grade)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!(null!=e&&null!=e.paper&&null!=e.paper.buttons&&e.paper.buttons.can_see_file)&&(null==e||null==e.paper||null==e.paper.buttons?null:e.paper.buttons.can_send)&&""!=(null==e?null:e.test_code)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",(null==e||null==e.paper||null==e.paper.buttons?null:e.paper.buttons.can_see_file)&&""!=(null==e?null:e.test_code)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.canAnswer&&"CPA"==e.type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","CPA"!=e.type&&(!e.needSchedule||e.hasSchedule&&e.canAnswer)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.needSchedule&&!e.hasSchedule&&!(null!=e&&e.canSeeAnswers)&&!(null!=e&&e.grade)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.hasSchedule&&!e.canAnswer)}}function Xe(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",14),f["\u0275\u0275elementStart"](1,"div",15),f["\u0275\u0275elementStart"](2,"span",16),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](4,Ae,3,6,"small",17),f["\u0275\u0275template"](5,De,4,8,"small",6),f["\u0275\u0275template"](6,ke,4,8,"small",17),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](7,qe,6,7,"div",18),f["\u0275\u0275template"](8,Ne,6,7,"div",18),f["\u0275\u0275template"](9,Ve,6,4,"div",18),f["\u0275\u0275template"](10,Ke,9,8,"div",19),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngClass",f["\u0275\u0275pureFunction1"](9,Te,e.isDiscarted)),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",e.description,""),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",null==e.schedule?null:e.schedule.data),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.needSchedule&&!e.hasSchedule),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!(null!=e.schedule&&e.schedule.data)&&e.beginDate&&e.endDate),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","2"!=e.exerciseType),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!n.isPresential),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","2"!=e.exerciseType),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",n.deveMostrarBotaoAvaliacao(e))}}function Ze(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"small",20),f["\u0275\u0275text"](1),f["\u0275\u0275pipe"](2,"date"),f["\u0275\u0275pipe"](3,"date"),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate2"]("",f["\u0275\u0275pipeBind2"](2,2,null==e?null:e.start_date,"dd/MM/yyyy")||"-"," at\xe9 ",f["\u0275\u0275pipeBind2"](3,5,null==e?null:e.end_date,"dd/MM/yyyy")||"-","")}}function et(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"span"),f["\u0275\u0275text"](1,"-"),f["\u0275\u0275elementEnd"]())}function tt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span"),f["\u0275\u0275text"](1),f["\u0275\u0275pipe"](2,"number"),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind2"](2,1,null==e?null:e.weight,"1.2-2"))}}function nt(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",31),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](2).goToAnswerTestCMH(t)})),f["\u0275\u0275text"](1," Responder "),f["\u0275\u0275elementEnd"]()}}function at(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",14),f["\u0275\u0275elementStart"](1,"div",15),f["\u0275\u0275elementStart"](2,"span"),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](4,Ze,4,8,"small",17),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"div",21),f["\u0275\u0275elementStart"](6,"span",22),f["\u0275\u0275text"](7,"Nota"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](8,et,2,0,"span",6),f["\u0275\u0275template"](9,tt,3,4,"span",6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](10,"div",21),f["\u0275\u0275elementStart"](11,"span",22),f["\u0275\u0275text"](12,"Peso"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](13,"span"),f["\u0275\u0275text"](14),f["\u0275\u0275pipe"](15,"number"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](16,"div",21),f["\u0275\u0275elementStart"](17,"span",22),f["\u0275\u0275text"](18,"Publicado"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](19,"span"),f["\u0275\u0275text"](20),f["\u0275\u0275pipe"](21,"date"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](22,"div",23),f["\u0275\u0275template"](23,nt,2,0,"button",27),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](null==e?null:e.name),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",(null==e?null:e.start_date)&&(null==e?null:e.end_date)),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngIf","N"==e.has_response),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","S"==e.has_response),f["\u0275\u0275advance"](5),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind2"](15,7,null==e?null:e.weight,"1.2-2")),f["\u0275\u0275advance"](6),f["\u0275\u0275textInterpolate"](f["\u0275\u0275pipeBind2"](21,10,null==e?null:e.date_response,"dd/MM/yyyy")||"-"),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngIf",e.can_answer&&"N"==e.has_response)}}function it(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner",8)}function rt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",41),f["\u0275\u0275elementStart"](1,"div",21),f["\u0275\u0275elementStart"](2,"span",22),f["\u0275\u0275text"](3,"C\xe1lculo da m\xe9dia "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](4),f["\u0275\u0275pipe"](5,"number"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](3);f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate2"](" ",null==e.studentAverage?null:e.studentAverage.averageCalculation," = ",f["\u0275\u0275pipeBind2"](5,2,null==e.studentAverage?null:e.studentAverage.average,"1.2-2")," ")}}function ot(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,it,1,0,"ava-spinner",4),f["\u0275\u0275template"](2,rt,6,5,"div",40),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.loadingAverage),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!e.loadingAverage)}}function st(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner",8)}function lt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",21),f["\u0275\u0275elementStart"](1,"span",22),f["\u0275\u0275text"](2,"M\xe9dia parcial: "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](3),f["\u0275\u0275pipe"](4,"number"),f["\u0275\u0275element"](5,"i",42),f["\u0275\u0275elementStart"](6,"popover-content",null,45),f["\u0275\u0275element"](8,"span",44),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275reference"](7),t=f["\u0275\u0275nextContext"](4);f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" ",null!=t.studentAverage&&t.studentAverage.partialAverage?f["\u0275\u0275pipeBind2"](4,3,null==t.studentAverage?null:t.studentAverage.partialAverage,"1.2-2"):"-"," "),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("popover",e),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("innerHTML",t.studentAverage.partialAverageCalculation,f["\u0275\u0275sanitizeHtml"])}}function ct(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",41),f["\u0275\u0275template"](1,lt,9,6,"div",18),f["\u0275\u0275elementStart"](2,"div",21),f["\u0275\u0275elementStart"](3,"span",22),f["\u0275\u0275text"](4,"M\xe9dia final: "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](5),f["\u0275\u0275pipe"](6,"number"),f["\u0275\u0275element"](7,"i",42),f["\u0275\u0275elementStart"](8,"popover-content",null,43),f["\u0275\u0275element"](10,"span",44),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275reference"](9),t=f["\u0275\u0275nextContext"](3);f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",null==t.studentAverage?null:t.studentAverage.havePartial),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate1"](" ",null!=t.studentAverage&&t.studentAverage.average?f["\u0275\u0275pipeBind2"](6,4,null==t.studentAverage?null:t.studentAverage.average,"1.2-2"):"-"," "),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("popover",e),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("innerHTML",t.studentAverage.averageCalculation+". "+t.studentAverage.averageHint,f["\u0275\u0275sanitizeHtml"])}}function dt(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,st,1,0,"ava-spinner",4),f["\u0275\u0275template"](2,ct,11,7,"div",40),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.loadingAverage),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!e.loadingAverage)}}function mt(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275element"](1,"schedule-table",46),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("subjectCode",e.subject.code)}}function pt(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,Xe,11,11,"div",10),f["\u0275\u0275template"](2,at,24,13,"div",10),f["\u0275\u0275template"](3,ot,3,2,"ng-container",6),f["\u0275\u0275template"](4,dt,3,2,"ng-container",6),f["\u0275\u0275elementStart"](5,"div",11),f["\u0275\u0275elementStart"](6,"button",12),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"]().getTestAverage()})),f["\u0275\u0275element"](7,"i",13),f["\u0275\u0275elementStart"](8,"div"),f["\u0275\u0275text"](9,"VISUALIZAR M\xc9DIA"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](10,mt,2,1,"ng-container",6),f["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.testsData),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.testsDataCMH),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.showAverage&&!e.isPresential),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.showAverage&&e.isPresential),f["\u0275\u0275advance"](2),f["\u0275\u0275classProp"]("mat-button-disabled",e.showAverage),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngIf",(null==e.schedules?null:e.schedules.status)&&202!=e.schedules.status)}}let ut=(()=>{class e{constructor(e,t,n,a,i,r,o,s,l){this.route=e,this.router=t,this.testService=n,this.dialog=a,this.securityService=i,this.session=r,this.toasterService=o,this.scheduleService=s,this.commonService=l,this.loadingTests=!1,this.testsData=[],this.testsDataCMH=[],this.spoTestWaitPage="/assets/others/spo-load/spo-load.html",this.spoTestErrorPage="/assets/others/spo-load/spo-error.html",this.spoTestClick=!1,this.studentAverage=null,this.showAverage=!1,this.loadingAverage=!1,this.hasAverage=!0,this.isPresential=this.securityService.securityObject.isPresential,this.route.params.subscribe(e=>{var t=JSON.parse(this.commonService.base64Decode(e.param));this.subject=t.subject?t.subject:null,this.getTests(),this.getTestsCMH()})}ngOnInit(){this.getSchedulesBySubject()}getSchedulesBySubject(){this.scheduleService.getSchedules(this.subject.code).subscribe(e=>{this.schedules=e})}goToTestSchedule(e){let t=this.commonService.base64Encode(JSON.stringify({test:e,subject:this.subject}));this.router.navigate(["/subject/grades-and-tests/test-schedule",t])}getTests(){this.testsData=[],this.loadingTests=!0,this.testService.getTestBySubjectAPI(this.subject.semester,this.subject.code,this.subject.class).subscribe({next:e=>{if(null==e)return!0;this.testsData=e.map(this.testService.createTestNewObject)},error:e=>{this.loadingTests=!1},complete:()=>{this.loadingTests=!1}})}getTestsCMH(){this.testsDataCMH=[],this.loadingTests=!0,this.testService.getTestCMHBySubjectAPI(this.subject.code,this.subject.module).subscribe({next:e=>{if(null==e)return!0;this.testsDataCMH=e},error:e=>{this.loadingTests=!1},complete:()=>{}})}getTestAverage(){this.showAverage||(this.loadingAverage=!0,this.showAverage=!0,this.testService.getSubjectAverage(this.subject.semester,this.subject.code,this.subject.class).subscribe({next:e=>{if(null==e)return!0;this.studentAverage=this.testService.createNewObjectAverage(e),this.loadingAverage=!1},error:e=>{this.loadingAverage=!1},complete:()=>{this.loadingAverage=!1}}))}answerTest(e){}goToAnswerBook(e){var t=this.commonService.base64Encode(JSON.stringify({test:e,subject:this.subject}));this.router.navigate(["/subject/grades-and-tests/answer-book",t])}openPaperDialog(e,t=!1,n=!0){t?this.dialog.open(B,{width:"710px",minHeight:"300px",data:{canSend:n,isUpdate:t,test:e}}).afterClosed().subscribe(e=>{null!=e&&1==e&&this.getTests()}):this.dialog.open(Y,{width:"710px",minHeight:"300px",data:{canSend:n,isUpdate:t,test:e}}).afterClosed().subscribe(e=>{null!=e&&1==e&&this.getTests()})}goToAnswerTest(e){if(e.semester==this.securityService.securityObject.semester&&"2"==this.securityService.securityObject.statusSemester&&"N"==this.securityService.securityObject.allow_spo_test)return c.a.fire({html:"Ol\xe1, Acad\xeamico!<br><br>\n                        Para realizar a avalia\xe7\xe3o \xe9 necess\xe1rio regularizar sua matr\xedcula. Selecione, abaixo, o bot\xe3o Financeiro e confira se existem pend\xeancias financeiras. Caso n\xe3o possua, fale conosco clicando no bot\xe3o WhatsApp.",icon:"warning",showDenyButton:!0,denyButtonText:"WhatsAPP",denyButtonColor:"#00A09F",showConfirmButton:!0,confirmButtonText:"Ir para financeiro",showCancelButton:!0,cancelButtonText:"Fechar",focusConfirm:!1}).then(e=>{e.isConfirmed?this.router.navigate(["/financial"]):e.isDenied&&this.goToWhats()}),!1;if("S"==e.response_method)if(e.monitoredDisabled){const t=encodeURIComponent(""+this.testsData[this.testsData.length-1].examCode);let n=s.a.urlProva;n+="?modality="+this.securityService.securityObject.modality,n+="&specialization="+this.securityService.securityObject.specialization,n+="&semester="+encodeURIComponent(e.semester),n+="&testCode="+t,n+="&subjectCode="+e.subjectCode,n+="&subjectClass="+e.classCode,n+="&subjectDescription="+encodeURIComponent(e.subject),n+="&provaMonitorada=true",n+="&provaTeste=false",window.open(n,"_blank")}else this.redirectSPO(e),this.spoWindow=window.open(this.spoTestWaitPage,"_blank");else if(e.canTryAgain&&e.canAnswer||!(null==e?void 0:e.canSeeAnswers)&&!this.spoTestClick&&e.canAnswer&&!e.canTryAgain){const t=this.commonService.base64Encode(JSON.stringify({test:e,subject:this.subject}));this.router.navigate(["/subject/grades-and-tests/answer",t])}}goToAnswerTestCMH(e){if(e.semester==this.securityService.securityObject.semester&&"2"==this.securityService.securityObject.statusSemester&&"N"==this.securityService.securityObject.allow_spo_test)return c.a.fire({html:"Ol\xe1, Acad\xeamico!<br><br>\n                        Para realizar a avalia\xe7\xe3o \xe9 necess\xe1rio regularizar sua matr\xedcula. Selecione, abaixo, o bot\xe3o Financeiro e confira se existem pend\xeancias financeiras. Caso n\xe3o possua, fale conosco clicando no bot\xe3o WhatsApp.",icon:"warning",showDenyButton:!0,denyButtonText:"WhatsAPP",denyButtonColor:"#00A09F",showConfirmButton:!0,confirmButtonText:"Ir para financeiro",showCancelButton:!0,cancelButtonText:"Fechar",focusConfirm:!1}).then(e=>{e.isConfirmed?this.router.navigate(["/financial"]):e.isDenied&&this.goToWhats()}),!1;var t=this.commonService.base64Encode(JSON.stringify({test:e,subject:this.subject}));this.router.navigate(["/subject/grades-and-tests/answer-cmh",t])}goToWhats(){window.open("https://api.whatsapp.com/send?phone=554733016100","_blank")}redirectSPO(e){this.spoTestClick=!0;var t={seme_codi:e.semester,alun_codi:this.securityService.securityObject.specialization,disc_codi:e.subject,turs_codi:e.classCode,paep_sequ:e.parameter,aval_codi:e.code,prop_codi:null,tipo_resposta:"spo",nova_prova:!1};"Y"!=e.type_code?t.prop_codi=e.test_code:t.nova_prova=!0;var n=btoa(JSON.stringify(t)),a=`${s.a.urlOldAVA}/ava/avaliacao/gera_prova_n2.php?param=${n}`,i=null;this.securityService.getIp().subscribe({next:e=>{e.ip&&null!=e.ip&&(i=e.ip)},error:e=>{i="0.0.0.0"},complete:()=>{this.openPageSPO(i,e,a)}})}openPageSPO(e,t,n){this.testService.getLinkRedirectTestSPO(t,n,!0).subscribe({next:t=>{if(200==t.code&&"undefined"!=t.data.id_fila){var n="?idFila="+t.data.id_fila;n+="&token="+this.session.getCookie("uniToken"),n+="&remote="+btoa(String(e)),this.spoWindow.location.href=`${s.a.urlAlunSPO}/${n}`}else 403==t.code&&(this.toasterService.pop("error","Erro",t.data.message),this.spoWindow.location.href=`${this.spoTestErrorPage}?msg=${t.data.message}`);this.spoTestClick=!1},error:e=>{this.spoTestClick=!1,this.toasterService.pop("error","Erro","Problemas para abrir a prova supervisionada."),this.spoWindow.location.href=this.spoTestErrorPage+"?msg=Problemas para abrir a prova supervisionada"},complete:()=>{this.spoTestClick=!1}})}goToScheduleDetails(e){this.dialog.open(oe,{width:"550px",height:"325px",data:{test:e,subject:this.subject}})}goToInstitutionalEvaluation(e){var t=this.commonService.base64Encode(JSON.stringify({test:e,subject:this.subject}));this.router.navigate(["/subject/grades-and-tests/institutional-test",t])}deveMostrarBotaoAvaliacao(e){return["2","8"].includes(this.securityService.securityObject.modality)&&e.showButton||!["2","8"].includes(this.securityService.securityObject.modality)}disableScheduleButton(e){const t=o();return t<o(e.scheduleWindowStart)||t>o(e.scheduleWindowEnd)}newOportunityDialog(e){this.dialog.open(J,{width:"575px",height:"315px",data:{test:e,subject:this.subject}})}return(){var e=this.commonService.base64Encode(JSON.stringify({subject:this.subject,semester:this.subject.semester}));this.router.navigate(["/subject/info",e])}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](a.a),f["\u0275\u0275directiveInject"](a.e),f["\u0275\u0275directiveInject"](v.a),f["\u0275\u0275directiveInject"](p.b),f["\u0275\u0275directiveInject"](K.a),f["\u0275\u0275directiveInject"](se.a),f["\u0275\u0275directiveInject"](le.c),f["\u0275\u0275directiveInject"](X),f["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-list"]],decls:10,vars:4,consts:[[1,"return-link"],["mat-button","",1,"font-light",3,"click"],[1,"page-title","font-ultra","mb-2"],["class","font-light",4,"ngIf"],["tooltipContent","Carregando as informa\xe7\xf5es...",4,"ngIf"],["class","no-results",4,"ngIf"],[4,"ngIf"],[1,"font-light"],["tooltipContent","Carregando as informa\xe7\xf5es..."],[1,"no-results"],["class","info-grid",4,"ngFor","ngForOf"],[1,"action-button-container-yellow","mt-4"],["mat-button","","aria-label","Visualizar M\xe9dia",3,"click"],["aria-label","Visualizar M\xe9dia",1,"fas","fa-calculator"],[1,"info-grid"],[1,"info-item","text-left",2,"width","-webkit-fill-available"],[3,"ngClass"],["class","font-light ava-text-light",4,"ngIf"],["class","info-item",4,"ngIf"],["class","info-item text-right",4,"ngIf"],[1,"font-light","ava-text-light"],[1,"info-item"],[1,"title"],[1,"info-item","text-right"],["mat-raised-button","","color","ava-primary",4,"ngIf"],["mat-raised-button","","color","ava-primary",3,"click",4,"ngIf"],["style","width: max-content","mat-raised-button","","color","ava-primary",3,"click",4,"ngIf"],["mat-raised-button","","color","ava-success",3,"click",4,"ngIf"],["mat-raised-button","","color","ava-primary"],["mat-raised-button","","color","ava-primary",3,"click"],["mat-raised-button","","color","ava-primary",2,"width","max-content",3,"click"],["mat-raised-button","","color","ava-success",3,"click"],["mat-raised-button","","color","ava-success","class","multi-line-button",3,"disabled","click",4,"ngIf"],["class","text-center",4,"ngIf"],["mat-raised-button","","color","ava-danger",3,"click",4,"ngIf"],["mat-raised-button","","color","ava-success",1,"multi-line-button",3,"disabled","click"],[1,"text-center"],["mat-raised-button","","color","ava-danger",3,"click"],["mat-raised-button","","color","ava-success",1,"schedule-action-button","multi-line-button",3,"disabled","click"],["mat-raised-button","","color","ava-primary","matTooltip","Clique para visualizar os detalhes do agendamento",3,"click"],["class","info-value mt-3",4,"ngIf"],[1,"info-value","mt-3"],["popoverPlacement","top",1,"fas","fa-info-circle","blue",3,"popover"],["popoverFinalAverage",""],[3,"innerHTML"],["popoverPartialAverage",""],[3,"subjectCode"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275elementStart"](1,"a",1),f["\u0275\u0275listener"]("click",(function(){return t.return()})),f["\u0275\u0275element"](2,"img"),f["\u0275\u0275text"](3," VOLTAR "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",2),f["\u0275\u0275text"](5," NOTAS E AVALIA\xc7\xd5ES "),f["\u0275\u0275template"](6,Pe,2,2,"span",3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](7,Me,1,0,"ava-spinner",4),f["\u0275\u0275template"](8,Fe,2,0,"div",5),f["\u0275\u0275template"](9,pt,11,7,"ng-container",6)),2&e&&(f["\u0275\u0275advance"](6),f["\u0275\u0275property"]("ngIf",null!=t.subject.code),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",t.loadingTests),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingTests&&0==t.testsData.length),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingTests&&t.testsData.length>0))},directives:[y.a,b.t,E.a,b.s,y.b,b.q,I.a,ce.b,ce.a,je],pipes:[b.E,b.f,b.g],styles:[".test-list-button[_ngcontent-%COMP%]{min-width:50px}tr.mat-row[_ngcontent-%COMP%]{height:62px}.info-grid.last-row-unified[_ngcontent-%COMP%]{margin-top:-30px}.info-item[_ngcontent-%COMP%]{width:50%}.multi-line-button[_ngcontent-%COMP%]{line-height:1.5em;padding:5px 16px;white-space:normal}.schedule-action-button[_ngcontent-%COMP%]{line-height:25px;padding-left:5px;padding-right:5px}.schedule-action-button[_ngcontent-%COMP%]   .schedule-window[_ngcontent-%COMP%]{white-space:break-spaces;font-size:11px}"]}),e})();var gt=n("jhN1"),ft=n("BvB/"),vt=n("xHqg");function ht(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span",15),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate2"](" | ",e.test.description," (Cod.:",e.test.testCode,")")}}function xt(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"span",16),f["\u0275\u0275text"](1,"A+"),f["\u0275\u0275elementEnd"]())}function bt(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"span",17),f["\u0275\u0275text"](1,"A"),f["\u0275\u0275elementEnd"]())}function St(e,t){1&e&&f["\u0275\u0275element"](0,"img",18)}function Ct(e,t){1&e&&f["\u0275\u0275element"](0,"img",19)}function yt(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner",20)}function Et(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",21),f["\u0275\u0275text"](1," Ocorreu um erro ao buscar a avalia\xe7\xe3o.\n"),f["\u0275\u0275elementEnd"]())}function wt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",24),f["\u0275\u0275elementStart"](1,"span",25),f["\u0275\u0275text"](2,"Peso da Avalia\xe7\xe3o"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](3),f["\u0275\u0275pipe"](4,"number"),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" ",f["\u0275\u0275pipeBind2"](4,1,null==e.test?null:e.test.weight,"1.2-2")," ")}}function It(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",24),f["\u0275\u0275elementStart"](1,"span",25),f["\u0275\u0275text"](2,"Acertos/Erros"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate2"](" ",e.count.correct,"/",e.count.wrong," ")}}function _t(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",24),f["\u0275\u0275elementStart"](1,"span",25),f["\u0275\u0275text"](2,"Canceladas"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" ",e.count.canceled," ")}}function Ot(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",37),f["\u0275\u0275elementStart"](1,"strong"),f["\u0275\u0275text"](2,"Aten\xe7\xe3o: "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit,t=f["\u0275\u0275nextContext"](3);f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](2==e.status?t.messageQuestionCanceled:e.statusDescription)}}function jt(e,t){1&e&&f["\u0275\u0275element"](0,"br")}function Pt(e,t){if(1&e&&f["\u0275\u0275element"](0,"img",38),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275property"]("src",null==e.image?null:e.image.base64,f["\u0275\u0275sanitizeUrl"])}}function Mt(e,t){1&e&&f["\u0275\u0275element"](0,"div",42),2&e&&f["\u0275\u0275property"]("innerHtml","Item "+t.$implicit,f["\u0275\u0275sanitizeHtml"])}function Ft(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275element"](1,"br"),f["\u0275\u0275elementStart"](2,"div",39),f["\u0275\u0275elementStart"](3,"p",40),f["\u0275\u0275elementStart"](4,"strong"),f["\u0275\u0275text"](5,"Sum\xe1rio "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](6,Mt,1,1,"div",41),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](7,"br"),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](6),f["\u0275\u0275property"]("ngForOf",e.summary)}}function At(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",51),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](e.letter)}}function Dt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",51),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](e.letter)}}function kt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",52),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](e.letter)}}function Tt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",53),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](e.letter)}}function qt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",54),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](e.letter)}}function Nt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",45),f["\u0275\u0275template"](1,At,2,1,"div",46),f["\u0275\u0275template"](2,Dt,2,1,"div",46),f["\u0275\u0275template"](3,kt,2,1,"div",47),f["\u0275\u0275template"](4,Tt,2,1,"div",48),f["\u0275\u0275template"](5,qt,2,1,"div",49),f["\u0275\u0275element"](6,"div",50),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==n.status&&n.gotRight&&e.letter==n.answer),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==n.status&&!n.gotRight&&e.correct),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==n.status&&!n.gotRight&&e.letter==n.answer&&!e.correct),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==n.status&&e.letter!=n.answer&&!e.correct),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1!=n.status),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHtml",e.description,f["\u0275\u0275sanitizeHtml"])}}function Vt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",43),f["\u0275\u0275template"](1,Nt,7,6,"div",44),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.alternatives)}}function zt(e,t){if(1&e&&f["\u0275\u0275element"](0,"div",56),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275property"]("innerHtml",null==e?null:e.answer,f["\u0275\u0275sanitizeHtml"])}}function $t(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"div",60),f["\u0275\u0275elementStart"](2,"a",61),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"](3).onClickDownloadAttachment(t.answerAttachment,!0)})),f["\u0275\u0275elementStart"](3,"div",62),f["\u0275\u0275element"](4,"img",63),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"div",64),f["\u0275\u0275elementStart"](6,"span",25),f["\u0275\u0275text"](7),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](8,"br"),f["\u0275\u0275elementStart"](9,"span",65),f["\u0275\u0275text"](10,"Clique para baixar sua resposta"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](7),f["\u0275\u0275textInterpolate"](e.answerAttachment.description)}}function Bt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",39),f["\u0275\u0275elementStart"](1,"p",40),f["\u0275\u0275elementStart"](2,"strong"),f["\u0275\u0275text"](3,"Retorno da corre\xe7\xe3o"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](4,"div",56),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("innerHtml",null==e?null:e.feedback,f["\u0275\u0275sanitizeHtml"])}}const Rt=function(){return[1,3]},Ht=function(){return[2,3]};function Qt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",55),f["\u0275\u0275elementStart"](1,"div",39),f["\u0275\u0275elementStart"](2,"p",40),f["\u0275\u0275elementStart"](3,"strong"),f["\u0275\u0275text"](4,"Resposta esperada "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](5,"div",56),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](6,"br"),f["\u0275\u0275elementStart"](7,"div",57),f["\u0275\u0275elementStart"](8,"p",40),f["\u0275\u0275elementStart"](9,"strong"),f["\u0275\u0275text"](10,"Minha resposta "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](11,zt,1,1,"div",58),f["\u0275\u0275template"](12,$t,11,1,"ng-container",14),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](13,"br"),f["\u0275\u0275template"](14,Bt,5,1,"div",59),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("innerHtml",null==e?null:e.expectedResponse,f["\u0275\u0275sanitizeHtml"]),f["\u0275\u0275advance"](6),f["\u0275\u0275property"]("ngIf",f["\u0275\u0275pureFunction0"](4,Rt).includes(null==e?null:e.answerType)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",(null==e?null:e.answerAttachment)&&f["\u0275\u0275pureFunction0"](5,Ht).includes(null==e?null:e.answerType)),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",e.feedback)}}function Gt(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",60),f["\u0275\u0275elementStart"](1,"a",61),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const n=t.$implicit;return f["\u0275\u0275nextContext"](5).onClickDownloadAttachment(n)})),f["\u0275\u0275elementStart"](2,"div",62),f["\u0275\u0275element"](3,"img",63),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",64),f["\u0275\u0275elementStart"](5,"span",25),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](7,"br"),f["\u0275\u0275elementStart"](8,"span",65),f["\u0275\u0275text"](9,"Clique para baixar o anexo da quest\xe3o"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;f["\u0275\u0275advance"](6),f["\u0275\u0275textInterpolate"](e.description)}}function Lt(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,Gt,10,1,"div",66),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.attachments)}}const Ut=function(e,t){return{"original-font":e,"increased-font":t}},Yt=function(){return["1","3","4"]};function Jt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",30),f["\u0275\u0275template"](1,Ot,4,1,"div",31),f["\u0275\u0275template"](2,jt,1,0,"br",14),f["\u0275\u0275elementStart"](3,"span",32),f["\u0275\u0275text"](4),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](5,"span",33),f["\u0275\u0275template"](6,Pt,1,1,"img",34),f["\u0275\u0275template"](7,Ft,8,1,"ng-container",14),f["\u0275\u0275template"](8,Vt,2,1,"div",35),f["\u0275\u0275template"](9,Qt,15,6,"div",36),f["\u0275\u0275template"](10,Lt,2,1,"ng-container",14),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=f["\u0275\u0275nextContext"](3);f["\u0275\u0275property"]("ngClass",f["\u0275\u0275pureFunction2"](12,Ut,1==n.fontStyle,2==n.fontStyle)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1!=e.status),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1!=e.status),f["\u0275\u0275advance"](1),f["\u0275\u0275propertyInterpolate"]("matTooltip",2==e.status?e.statusDescription:e.gotRight||2==e.type?"Quest\xe3o Correta":"Quest\xe3o Incorreta"),f["\u0275\u0275attributeInterpolate1"]("class","question-icon ",2==e.status?"gray-question":e.gotRight||2==e.type?"green-question":"red-question",""),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",e.number," "),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHTML",e.descriptionFormated,f["\u0275\u0275sanitizeHtml"]),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!(null==e.image||!e.image.base64)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",(null==e?null:e.summary.length)>0&&!1),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==e.type||f["\u0275\u0275pureFunction0"](15,Yt).includes(n.studentModality)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",2==e.type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.attachments)}}function Wt(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,Jt,11,16,"div",27),f["\u0275\u0275elementStart"](2,"div",28),f["\u0275\u0275element"](3,"br"),f["\u0275\u0275elementStart"](4,"button",29),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"](2).print()})),f["\u0275\u0275text"](5,"Imprimir"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.testQuestions)}}function Kt(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",37),f["\u0275\u0275elementStart"](1,"strong"),f["\u0275\u0275text"](2,"Aten\xe7\xe3o: "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit,t=f["\u0275\u0275nextContext"](3);f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"]("",2==e.status?t.messageQuestionCanceled:e.statusDescription," ")}}function Xt(e,t){1&e&&f["\u0275\u0275element"](0,"br")}function Zt(e,t){if(1&e&&f["\u0275\u0275element"](0,"img",38),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275property"]("src",null==e.image?null:e.image.base64,f["\u0275\u0275sanitizeUrl"])}}function en(e,t){1&e&&f["\u0275\u0275element"](0,"div",42),2&e&&f["\u0275\u0275property"]("innerHtml","Item "+t.$implicit,f["\u0275\u0275sanitizeHtml"])}function tn(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275element"](1,"br"),f["\u0275\u0275elementStart"](2,"div",39),f["\u0275\u0275elementStart"](3,"p",40),f["\u0275\u0275elementStart"](4,"strong"),f["\u0275\u0275text"](5,"Sum\xe1rio "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](6,en,1,1,"div",41),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](7,"br"),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](6),f["\u0275\u0275property"]("ngForOf",e.summary)}}function nn(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",77),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](e.letter)}}function an(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",77),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](e.letter)}}function rn(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",78),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](e.letter)}}function on(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",53),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](e.letter)}}function sn(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",54),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](e.letter)}}function ln(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",45),f["\u0275\u0275template"](1,nn,2,1,"div",75),f["\u0275\u0275template"](2,an,2,1,"div",75),f["\u0275\u0275template"](3,rn,2,1,"div",76),f["\u0275\u0275template"](4,on,2,1,"div",48),f["\u0275\u0275template"](5,sn,2,1,"div",49),f["\u0275\u0275element"](6,"div",50),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==n.status&&n.gotRight&&e.letter==n.answer),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==n.status&&!n.gotRight&&e.correct),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==n.status&&!n.gotRight&&e.letter==n.answer&&!e.correct),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==n.status&&e.letter!=n.answer&&!e.correct),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1!=n.status),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHtml",e.description,f["\u0275\u0275sanitizeHtml"])}}function cn(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",43),f["\u0275\u0275template"](1,ln,7,6,"div",44),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.alternatives)}}function dn(e,t){if(1&e&&f["\u0275\u0275element"](0,"div",56),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275property"]("innerHtml",null==e?null:e.answer,f["\u0275\u0275sanitizeHtml"])}}function mn(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"div",60),f["\u0275\u0275elementStart"](2,"a",61),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"](2).$implicit;return f["\u0275\u0275nextContext"](3).onClickDownloadAttachment(t.answerAttachment,!0)})),f["\u0275\u0275elementStart"](3,"div",62),f["\u0275\u0275element"](4,"img",63),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"div",64),f["\u0275\u0275elementStart"](6,"span",25),f["\u0275\u0275text"](7),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](8,"br"),f["\u0275\u0275elementStart"](9,"span",65),f["\u0275\u0275text"](10,"Clique para baixar sua resposta"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](7),f["\u0275\u0275textInterpolate"](e.answerAttachment.description)}}function pn(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",39),f["\u0275\u0275elementStart"](1,"p",40),f["\u0275\u0275elementStart"](2,"strong"),f["\u0275\u0275text"](3,"Retorno da corre\xe7\xe3o"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](4,"div",56),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("innerHtml",null==e?null:e.feedback,f["\u0275\u0275sanitizeHtml"])}}function un(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",55),f["\u0275\u0275elementStart"](1,"div",39),f["\u0275\u0275elementStart"](2,"p",40),f["\u0275\u0275elementStart"](3,"strong"),f["\u0275\u0275text"](4,"Resposta esperada "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](5,"div",56),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](6,"br"),f["\u0275\u0275elementStart"](7,"div",57),f["\u0275\u0275elementStart"](8,"p",40),f["\u0275\u0275elementStart"](9,"strong"),f["\u0275\u0275text"](10,"Minha resposta "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](11,dn,1,1,"div",58),f["\u0275\u0275template"](12,mn,11,1,"ng-container",14),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](13,"br"),f["\u0275\u0275template"](14,pn,5,1,"div",59),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("innerHtml",null==e?null:e.expectedResponse,f["\u0275\u0275sanitizeHtml"]),f["\u0275\u0275advance"](6),f["\u0275\u0275property"]("ngIf",f["\u0275\u0275pureFunction0"](4,Rt).includes(null==e?null:e.answerType)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",(null==e?null:e.answerAttachment)&&f["\u0275\u0275pureFunction0"](5,Ht).includes(null==e?null:e.answerType)),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",e.feedback)}}function gn(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",60),f["\u0275\u0275elementStart"](1,"a",61),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const n=t.$implicit;return f["\u0275\u0275nextContext"](5).onClickDownloadAttachment(n)})),f["\u0275\u0275elementStart"](2,"div",62),f["\u0275\u0275element"](3,"img",63),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",64),f["\u0275\u0275elementStart"](5,"span",25),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](7,"br"),f["\u0275\u0275elementStart"](8,"span",65),f["\u0275\u0275text"](9,"Clique para baixar o anexo da quest\xe3o"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;f["\u0275\u0275advance"](6),f["\u0275\u0275textInterpolate"](e.description)}}function fn(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,gn,10,1,"div",66),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.attachments)}}function vn(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"button",79),f["\u0275\u0275text"](1,"Anterior"),f["\u0275\u0275elementEnd"]())}function hn(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"button",80),f["\u0275\u0275text"](1,"Pr\xf3xima"),f["\u0275\u0275elementEnd"]())}function xn(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-step",70),f["\u0275\u0275template"](1,Kt,4,1,"div",31),f["\u0275\u0275template"](2,Xt,1,0,"br",14),f["\u0275\u0275elementStart"](3,"div",71),f["\u0275\u0275text"](4),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](5,"div",33),f["\u0275\u0275template"](6,Zt,1,1,"img",34),f["\u0275\u0275template"](7,tn,8,1,"ng-container",14),f["\u0275\u0275template"](8,cn,2,1,"div",35),f["\u0275\u0275template"](9,un,15,6,"div",36),f["\u0275\u0275template"](10,fn,2,1,"ng-container",14),f["\u0275\u0275element"](11,"br"),f["\u0275\u0275elementStart"](12,"div",72),f["\u0275\u0275template"](13,vn,2,0,"button",73),f["\u0275\u0275template"](14,hn,2,0,"button",74),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.first,a=t.last,i=f["\u0275\u0275nextContext"](3);f["\u0275\u0275property"]("color",2==e.status?"ava-gray":e.gotRight||2==e.type?"ava-success":"ava-danger")("completed",!1),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1!=e.status),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1!=e.status),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("Quest\xe3o ",e.number,""),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHTML",e.descriptionFormated,f["\u0275\u0275sanitizeHtml"]),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!(null==e.image||!e.image.base64)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",(null==e?null:e.summary.length)>0&&!1),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==e.type||f["\u0275\u0275pureFunction0"](13,Yt).includes(i.studentModality)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",2==e.type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.attachments),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngIf",!n),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!a)}}function bn(e,t){1&e&&f["\u0275\u0275element"](0,"span")}function Sn(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-horizontal-stepper",67,68),f["\u0275\u0275template"](2,xn,15,14,"mat-step",69),f["\u0275\u0275template"](3,bn,1,0,"span",14),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2);f["\u0275\u0275property"]("ngClass",f["\u0275\u0275pureFunction2"](4,Ut,1==e.fontStyle,2==e.fontStyle))("linear",!1),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",e.testQuestions),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.setMatToolTip())}}function Cn(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"div",22),f["\u0275\u0275template"](2,wt,5,4,"div",23),f["\u0275\u0275elementStart"](3,"div",24),f["\u0275\u0275elementStart"](4,"span",25),f["\u0275\u0275text"](5,"Prova"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"div",24),f["\u0275\u0275elementStart"](8,"span",25),f["\u0275\u0275text"](9,"Qtd. de Quest\xf5es"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](10),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](11,It,4,2,"div",23),f["\u0275\u0275template"](12,_t,4,1,"div",23),f["\u0275\u0275elementStart"](13,"div",24),f["\u0275\u0275elementStart"](14,"span",25),f["\u0275\u0275text"](15,"Nota"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](16),f["\u0275\u0275pipe"](17,"number"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](18,Wt,6,1,"ng-container",14),f["\u0275\u0275template"](19,Sn,4,7,"mat-horizontal-stepper",26),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",!e.isPresential),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate1"](" ",e.test.examCode||"-"," "),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate1"](" ",e.testQuestions.length," "),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==(null==e.testInfo?null:e.testInfo.type)&&!(null==e.test||!e.test.grade)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.count.canceled>0),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate1"](" ",f["\u0275\u0275pipeBind2"](17,8,null==e.test?null:e.test.grade,"1.2-2")||"-"," "),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",1==e.answerViewMode),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",2==e.answerViewMode)}}let yn=(()=>{class e{constructor(e,t,n,a,i,r,o){this.testService=e,this.route=t,this.router=n,this.sanitizer=a,this.dbService=i,this.securityService=r,this.commonService=o,this.subject=null,this.test=null,this.semester=null,this.class=null,this.testInfo=null,this.testQuestions=[],this.messageQuestionCanceled="Esta quest\xe3o foi cancelada, por\xe9m a pontua\xe7\xe3o foi considerada.",this.studentModality=this.securityService.securityObject.modality,this.count={canceled:0,correct:0,wrong:0},this.answers=[],this.loadingTestData=!1,this.routeReturn=null,this.testError=!1,this.answerViewMode=2,this.fontStyle=1,this.isPresential=this.securityService.securityObject.isPresential,this.route.params.subscribe(e=>{var t=JSON.parse(this.commonService.base64Decode(e.param));this.subject=t.subject?t.subject:null,this.test=t.test?t.test:null,this.routeReturn=t.routeReturn?t.routeReturn:null}),this.dbService.getByIndex("user_settings","specialization",this.securityService.securityObject.specialization).subscribe(e=>{null!=e&&(this.answerViewMode=e.question_view_mode)})}ngOnInit(){this.getAnswerBookData()}setMatToolTip(){try{Array.from(document.getElementsByClassName("mat-step-header")).forEach((e,t)=>{let n=this.testQuestions[t];e.title=2==n.status?n.statusDescription:n.gotRight||2==n.type?"Quest\xe3o Correta":"Quest\xe3o Incorreta"})}catch(e){}return!1}getAnswerBookData(){this.loadingTestData=!0,"8"==this.studentModality&&(this.test.testCode=this.test.examCode),this.testService.getTestDataApi(this.test.testCode,this.test.examCode,this.subject.semester,this.subject.code,this.subject.class,this.test.typeDescription,!0).subscribe({next:e=>{if(null==e)return!0;this.testInfo=this.testService.createTestInfoNewObject(e.info),this.testInfo.examCode&&(this.test.examCode=this.testInfo.examCode);for(let t of e.questions)t.description_formated||(t.description_formated=t.description),null!=t.expected_response&&(t.expected_response=t.expected_response.toString().replace(/style=\"(?!text-deco)[^\"]*"/gim,""),t.expected_response=this.commonService.nl2br(t.expected_response,!1),t.expected_response=this.sanitizer.bypassSecurityTrustHtml(t.expected_response)),null!=t.feedback&&(t.feedback=t.feedback.toString().replace(/style=\"(?!text-deco)[^\"]*"/gim,""),t.feedback=this.commonService.nl2br(t.feedback,!1),t.feedback=this.sanitizer.bypassSecurityTrustHtml(t.feedback)),null!=t.description_formated&&(t.description_formated=t.description_formated.toString().replace(/style=\"(?!text-deco)[^\"]*"/gim,"")),t.description_formated=this.sanitizer.bypassSecurityTrustHtml(t.description_formated),t.image&&(t.image.base64=null,t.image.file&&(t.image.base64=this.sanitizer.bypassSecurityTrustUrl(`data:${t.image.mime};base64,${t.image.file}`))),this.testQuestions.push(this.testService.createQuestionNewObject(t)),"2"==t.status?this.count.canceled++:t.got_right?this.count.correct++:this.count.wrong++},error:e=>{this.testError=!0,this.loadingTestData=!1},complete:()=>{this.loadingTestData=!1}})}onClickChangeViewMode(){1==this.answerViewMode?this.answerViewMode=2:2==this.answerViewMode&&(this.answerViewMode=1);var e=this.securityService.securityObject.specialization;this.dbService.deleteByKey("user_settings",e).subscribe(t=>{this.dbService.add("user_settings",{specialization:e,question_view_mode:this.answerViewMode}).subscribe(()=>{})})}onClickDownloadAttachment(e,t=!1){this.commonService.downloadFileBase64(e.fileType,t?e.description:"anexo_questao_"+e.code,e.fileData)}onChangeFontButton(){1==this.fontStyle?this.fontStyle=2:2==this.fontStyle&&(this.fontStyle=1)}return(){if(null!=this.routeReturn)this.router.navigate([this.routeReturn]);else{var e=this.commonService.base64Encode(JSON.stringify({subject:this.subject}));this.router.navigate(["/subject/grades-and-tests/list",e])}}getTagsHtml(e){const t=[],n=document.getElementsByTagName(e);for(let a=0;a<n.length;a++)t.push(n[a].outerHTML);return t.join("\r\n")}print(){const e=document.getElementsByClassName("page-content")[0].innerHTML,t=this.getTagsHtml("style"),n=this.getTagsHtml("link"),a=window.open("","_blank","");a.document.open(),a.document.write(`\n            <html>\n                <head>\n                    <title>${this.test.description}</title>\n                    ${n}\n                    ${t}\n                    <style>\n                        @media print {\n                            body {\n                                -webkit-print-color-adjust: exact;\n                                -moz-print-color-adjust: exact;\n                                -ms-print-color-adjust: exact;\n                                print-color-adjust: exact;\n                            }\n                        }\n                    </style>\n                    Prova Impressa\n                </head>\n                <body onload="window.print(); window.close()">\n                    ${e}\n                </body>\n            </html>\n            `),a.document.close()}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](v.a),f["\u0275\u0275directiveInject"](a.a),f["\u0275\u0275directiveInject"](a.e),f["\u0275\u0275directiveInject"](gt.DomSanitizer),f["\u0275\u0275directiveInject"](ft.b),f["\u0275\u0275directiveInject"](K.a),f["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-answer-book"]],decls:20,vars:8,consts:[[1,"return-link"],["mat-button","",1,"font-light",3,"click"],[1,"test-page-title"],[1,"page-title","font-ultra","mb-2"],["class","font-light",4,"ngIf"],["mat-raised-button","",1,"button-fontsize",3,"click"],["matTooltip","Aumentar fonte",4,"ngIf"],["matTooltip","Diminuir fonte",4,"ngIf"],["mat-raised-button","",1,"button-view-mode",3,"click"],["src","/assets/icons/list-icon-blue.png",4,"ngIf"],["src","/assets/icons/step-icon-blue.png",4,"ngIf"],[1,"text-center"],["tooltipContent","Carregando as informa\xe7\xf5es...",4,"ngIf"],["class","ava-alert red",4,"ngIf"],[4,"ngIf"],[1,"font-light"],["matTooltip","Aumentar fonte"],["matTooltip","Diminuir fonte"],["src","/assets/icons/list-icon-blue.png"],["src","/assets/icons/step-icon-blue.png"],["tooltipContent","Carregando as informa\xe7\xf5es..."],[1,"ava-alert","red"],[1,"info-grid"],["class","info-item",4,"ngIf"],[1,"info-item"],[1,"title"],["class","mt-3","labelPosition","bottom",3,"ngClass","linear",4,"ngIf"],["class","question-card mt-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"info-item","text-center"],["mat-raised-button","","color","ava-primary",3,"click"],[1,"question-card","mt-3",3,"ngClass"],["class","alert alert-warning alert-question-status",4,"ngIf"],["mat-raised-button","","mat-raised-button","","matTooltipPosition","above",3,"matTooltip"],[1,"question-content",3,"innerHTML"],["class","mt-3 question-image",3,"src",4,"ngIf"],["class","alternative-container mt-3",4,"ngIf"],["class","text-justify mt-3",4,"ngIf"],[1,"alert","alert-warning","alert-question-status"],[1,"mt-3","question-image",3,"src"],[1,"answer-container"],[1,"font-bold"],["class","summary-item",3,"innerHtml",4,"ngFor","ngForOf"],[1,"summary-item",3,"innerHtml"],[1,"alternative-container","mt-3"],["class","alternative-item",4,"ngFor","ngForOf"],[1,"alternative-item"],["alt","\xcdcone representando resposta correta","class","label correct",4,"ngIf"],["alt","\xcdcone representando resposta incorreta","class","label wrong",4,"ngIf"],["class","label ",4,"ngIf"],["class","label canceled",4,"ngIf"],[1,"description",3,"innerHtml"],["alt","\xcdcone representando resposta correta",1,"label","correct"],["alt","\xcdcone representando resposta incorreta",1,"label","wrong"],[1,"label"],[1,"label","canceled"],[1,"text-justify","mt-3"],[3,"innerHtml"],[1,"answer-container","question-answer"],[3,"innerHtml",4,"ngIf"],["class","answer-container",4,"ngIf"],[1,"div-download-file","mt-3"],["matTooltip","Clique para baixar o arquivo",3,"click"],[1,"float-left"],["src","assets/icons/icon-file.png"],[1,""],[1,"subtitle"],["class","div-download-file mt-3",4,"ngFor","ngForOf"],["labelPosition","bottom",1,"mt-3",3,"ngClass","linear"],["stepper",""],[3,"color","completed",4,"ngFor","ngForOf"],[3,"color","completed"],[1,"step-title"],[1,"buttons"],["type","button","mat-raised-button","","color","ava-primary","matStepperPrevious","",4,"ngIf"],["type","button","mat-raised-button","","color","ava-primary","matStepperNext","",4,"ngIf"],["class","label correct",4,"ngIf"],["class","label wrong",4,"ngIf"],[1,"label","correct"],[1,"label","wrong"],["type","button","mat-raised-button","","color","ava-primary","matStepperPrevious",""],["type","button","mat-raised-button","","color","ava-primary","matStepperNext",""]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275elementStart"](1,"a",1),f["\u0275\u0275listener"]("click",(function(){return t.return()})),f["\u0275\u0275element"](2,"img"),f["\u0275\u0275text"](3," VOLTAR "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",2),f["\u0275\u0275elementStart"](5,"div",3),f["\u0275\u0275text"](6," GABARITO "),f["\u0275\u0275template"](7,ht,2,2,"span",4),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"div"),f["\u0275\u0275elementStart"](9,"button",5),f["\u0275\u0275listener"]("click",(function(){return t.onChangeFontButton()})),f["\u0275\u0275template"](10,xt,2,0,"span",6),f["\u0275\u0275template"](11,bt,2,0,"span",7),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](12,"button",8),f["\u0275\u0275listener"]("click",(function(){return t.onClickChangeViewMode()})),f["\u0275\u0275template"](13,St,1,0,"img",9),f["\u0275\u0275template"](14,Ct,1,0,"img",10),f["\u0275\u0275elementStart"](15,"span",11),f["\u0275\u0275text"](16,"Alterar modo de visualiza\xe7\xe3o"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](17,yt,1,0,"ava-spinner",12),f["\u0275\u0275template"](18,Et,2,0,"div",13),f["\u0275\u0275template"](19,Cn,20,11,"ng-container",14)),2&e&&(f["\u0275\u0275advance"](7),f["\u0275\u0275property"]("ngIf",t.test.description),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngIf",1==t.fontStyle),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",2==t.fontStyle),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",2==t.answerViewMode),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==t.answerViewMode),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngIf",t.loadingTestData),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingTestData&&t.testError),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingTestData&&null!=t.testInfo&&!t.testError))},directives:[y.a,b.t,y.b,I.a,E.a,b.s,b.q,vt.a,vt.b,vt.i,vt.h],pipes:[b.g],styles:[".icon-answer[_ngcontent-%COMP%]{width:20px;float:left}.alternative-container[_ngcontent-%COMP%]{width:100%}.alternative-container[_ngcontent-%COMP%]   .alternative-item[_ngcontent-%COMP%]{width:100%;display:flex;min-height:30px;align-items:center;padding-top:6px;padding-bottom:6px}.alternative-container[_ngcontent-%COMP%]   .alternative-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:22px;height:22px;text-align:center;border-radius:50%;display:flex;justify-content:center}.alternative-container[_ngcontent-%COMP%]   .alternative-item[_ngcontent-%COMP%]   .label.correct[_ngcontent-%COMP%]{background:#27ae60}.alternative-container[_ngcontent-%COMP%]   .alternative-item[_ngcontent-%COMP%]   .label.wrong[_ngcontent-%COMP%]{background:#f04141}.alternative-container[_ngcontent-%COMP%]   .alternative-item[_ngcontent-%COMP%]   .label.canceled[_ngcontent-%COMP%]{background:#8a8a8a}.alternative-container[_ngcontent-%COMP%]   .alternative-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{padding-left:15px}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.question-image[_ngcontent-%COMP%]{background:#fff}.test-page-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.test-page-title[_ngcontent-%COMP%]   .button-view-mode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.test-page-title[_ngcontent-%COMP%]   .button-view-mode[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.question-card[_ngcontent-%COMP%]{padding:24px;border-radius:7px;font-family:Neo Sans Std Light!important;font-weight:400!important}.question-card[_ngcontent-%COMP%]   .question-icon[_ngcontent-%COMP%]{line-height:1;border-radius:50%;height:25px;width:25px;flex-shrink:0;position:relative;margin-right:10px;display:inline-flex;justify-content:center;align-items:center;color:#fff;font-family:Neo Sans Std;font-weight:700}.green-question[_ngcontent-%COMP%]{background-color:#27ae60!important}.red-question[_ngcontent-%COMP%]{background-color:#f04141!important}.gray-question[_ngcontent-%COMP%]{background-color:#636363!important}.answer-container[_ngcontent-%COMP%]{background-color:rgba(82,82,76,.38823529411764707);padding:15px;border-radius:6px}.alert-question-status[_ngcontent-%COMP%]{color:#fff;border-color:rgba(148,45,45,.611764705882353);background:rgba(255,0,0,.2)}.button-fontsize[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;font-size:16px}.question-content[_ngcontent-%COMP%]{white-space:pre-wrap}.increased-font[_ngcontent-%COMP%]   .alternative-container[_ngcontent-%COMP%], .increased-font[_ngcontent-%COMP%]   .question-content[_ngcontent-%COMP%]{font-size:21px!important}.increased-font[_ngcontent-%COMP%]   .alternative-container[_ngcontent-%COMP%]   .alternative-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:26px!important;height:26px!important}.increased-font[_ngcontent-%COMP%]   .answer-container[_ngcontent-%COMP%]{font-size:21px!important}  span{background:none!important}.summary-item[_ngcontent-%COMP%]{display:inline-block;margin-right:6px;padding:5px;color:#46799b;background:#e0eaf1;border-radius:2px;max-width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.question-answer[_ngcontent-%COMP%]{background-color:rgba(183,183,182,.39)}"]}),e})();var En=n("QibW");function wn(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",8),f["\u0275\u0275elementStart"](1,"p"),f["\u0275\u0275elementStart"](2,"strong"),f["\u0275\u0275text"](3,"1."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](4," A Avalia\xe7\xe3o Institucional \xe9 realizada pela Comiss\xe3o Pr\xf3pria de Avalia\xe7\xe3o ? CPA."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"p"),f["\u0275\u0275elementStart"](6,"strong"),f["\u0275\u0275text"](7,"2."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](8," A CPA tem como meta construir um planejamento institucional, guiado pela gest\xe3o participativa e pela autonomia universit\xe1ria."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"p"),f["\u0275\u0275elementStart"](10,"strong"),f["\u0275\u0275text"](11,"3."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](12," Sua opini\xe3o fomenta a realiza\xe7\xe3o de melhorias na qualidade do seu curso."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](13,"p"),f["\u0275\u0275elementStart"](14,"strong"),f["\u0275\u0275text"](15,"4."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](16," Leia cuidadosamente cada uma das quest\xf5es e escolha a alternativa que responde cada uma delas."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](17,"p"),f["\u0275\u0275elementStart"](18,"strong"),f["\u0275\u0275text"](19,"5."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](20," As alternativas correspondem \xe0s seguintes notas: "),f["\u0275\u0275element"](21,"br"),f["\u0275\u0275elementStart"](22,"small"),f["\u0275\u0275elementStart"](23,"b"),f["\u0275\u0275text"](24,"a)"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](25," Insatisfeito: 1,25; "),f["\u0275\u0275element"](26,"br"),f["\u0275\u0275elementStart"](27,"b"),f["\u0275\u0275text"](28,"b)"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](29," Satisfeito: 2,5; "),f["\u0275\u0275element"](30,"br"),f["\u0275\u0275elementStart"](31,"b"),f["\u0275\u0275text"](32,"c)"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](33," Muito bom: 3,75; "),f["\u0275\u0275element"](34,"br"),f["\u0275\u0275elementStart"](35,"b"),f["\u0275\u0275text"](36,"d)"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](37," Excelente: 5."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]())}function In(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span"),f["\u0275\u0275elementStart"](1,"mat-radio-button",24),f["\u0275\u0275elementStart"](2,"span",25),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](4,"span",26),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("value",e.letter),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("",e.letter,") \xa0"),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHtml",e.description,f["\u0275\u0275sanitizeHtml"])}}function _n(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"button",27),f["\u0275\u0275text"](1,"Anterior"),f["\u0275\u0275elementEnd"]())}function On(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"button",28),f["\u0275\u0275text"](1,"Pr\xf3xima"),f["\u0275\u0275elementEnd"]())}function jn(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-step",14),f["\u0275\u0275elementStart"](1,"div",15),f["\u0275\u0275text"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](3,"div",16),f["\u0275\u0275elementStart"](4,"div",17),f["\u0275\u0275elementStart"](5,"div",18),f["\u0275\u0275elementStart"](6,"mat-radio-group",19),f["\u0275\u0275template"](7,In,5,3,"span",20),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"div",21),f["\u0275\u0275template"](9,_n,2,0,"button",22),f["\u0275\u0275text"](10,"\xa0 "),f["\u0275\u0275template"](11,On,2,0,"button",23),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index,a=t.first,i=t.last,r=f["\u0275\u0275nextContext"](2);f["\u0275\u0275property"]("formGroupName",n)("completed",r.questionControls[n].valid),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("Quest\xe3o ",e.number,""),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHtml",e.description,f["\u0275\u0275sanitizeHtml"]),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngForOf",r.questionAlternatives),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",!a),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",!i)}}function Pn(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"form",9),f["\u0275\u0275elementContainerStart"](1,10),f["\u0275\u0275elementStart"](2,"mat-horizontal-stepper",11,12),f["\u0275\u0275template"](4,jn,12,7,"mat-step",13),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275property"]("formGroup",e.cpaQuestionsForm),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("linear",!1),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",e.questions)}}function Mn(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",29),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"]().closeDialog()})),f["\u0275\u0275text"](1,"Finalizar"),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275property"]("disabled",!e.cpaQuestionsForm.valid)}}function Fn(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",30),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"]().isStarted=!0})),f["\u0275\u0275text"](1,"Iniciar"),f["\u0275\u0275elementEnd"]()}}let An=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.formBuilder=t,this.data=n,this.questions=[],this.isStarted=!1,this.questionAlternatives=[{description:"Insatisfeito",letter:"A"},{description:"Satisfeito",letter:"B"},{description:"Muito bom",letter:"C"},{description:"Excelente",letter:"D"},{description:"Desconhe\xe7o/N\xe3o sei opinar",letter:"E"}],this.questions=this.data.questions,this.cpaQuestionsForm=this.formBuilder.group({questions:new m.FormArray([])});for(let a of this.questions)this.cpaQuestionsForm.controls.questions.push(this.formBuilder.group({number:[a.number,m.Validators.required],answer:[null,m.Validators.required]}))}get questionControls(){return this.cpaQuestionsForm.controls.questions.controls}closeDialog(e=!1){this.dialogRef.close(e?{success:!1,questionForm:null}:{success:!0,questionForm:this.cpaQuestionsForm})}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](p.i),f["\u0275\u0275directiveInject"](m.FormBuilder),f["\u0275\u0275directiveInject"](p.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-answer-cpa-dialog"]],decls:10,vars:4,consts:[["mat-dialog-title",""],[1,"mat-typography"],["class","mt-3 intructions",4,"ngIf"],[3,"formGroup",4,"ngIf"],["align","end"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","ava-success",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],[1,"mt-3","intructions"],[3,"formGroup"],["formArrayName","questions"],["labelPosition","bottom",1,"stepper-cpa",3,"linear"],["stepper",""],[3,"formGroupName","completed",4,"ngFor","ngForOf"],[3,"formGroupName","completed"],[1,"step-title","mt-3"],[1,"mb-3",3,"innerHtml"],[1,"row"],[1,"col-12"],["color","primary","formControlName","answer",1,"question"],[4,"ngFor","ngForOf"],[1,"buttons","mt-3"],["type","button","mat-raised-button","","color","ava-primary","matStepperPrevious","",4,"ngIf"],["type","button","mat-raised-button","","color","ava-primary","matStepperNext","",4,"ngIf"],["required","",3,"value"],[1,"font-bold"],[3,"innerHtml"],["type","button","mat-raised-button","","color","ava-primary","matStepperPrevious",""],["type","button","mat-raised-button","","color","ava-primary","matStepperNext",""],["mat-raised-button","","color","ava-success",3,"disabled","click"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"h2",0),f["\u0275\u0275text"](1,"RESPONDER CPA"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](2,"mat-dialog-content",1),f["\u0275\u0275template"](3,wn,38,0,"div",2),f["\u0275\u0275template"](4,Pn,5,3,"form",3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"mat-dialog-actions",4),f["\u0275\u0275elementStart"](6,"button",5),f["\u0275\u0275listener"]("click",(function(){return t.closeDialog(!0)})),f["\u0275\u0275text"](7,"Fechar"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](8,Mn,2,1,"button",6),f["\u0275\u0275template"](9,Fn,2,0,"button",7),f["\u0275\u0275elementEnd"]()),2&e&&(f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngIf",!t.isStarted),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",t.isStarted&&t.questions.length>0),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngIf",t.isStarted),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.isStarted))},directives:[p.j,p.g,b.t,p.c,y.b,m["\u0275angular_packages_forms_forms_y"],m.NgControlStatusGroup,m.FormGroupDirective,m.FormArrayName,vt.a,b.s,vt.b,m.FormGroupName,En.b,m.NgControlStatus,m.FormControlName,En.a,vt.i,vt.h],styles:[".intructions[_ngcontent-%COMP%]{font-size:16px}.intructions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:10px 0}.stepper-cpa[_ngcontent-%COMP%]    .mat-horizontal-stepper-header-container{display:none!important}.stepper-cpa[_ngcontent-%COMP%]   .step-title[_ngcontent-%COMP%]{display:block!important}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),e})();var Dn=n("m1XX"),kn=n("+zxK");function Tn(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"span",15),f["\u0275\u0275text"](1,"A+"),f["\u0275\u0275elementEnd"]())}function qn(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"span",16),f["\u0275\u0275text"](1,"A"),f["\u0275\u0275elementEnd"]())}function Nn(e,t){1&e&&f["\u0275\u0275element"](0,"img",17)}function Vn(e,t){1&e&&f["\u0275\u0275element"](0,"img",18)}function zn(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner",19)}function $n(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",21),f["\u0275\u0275text"](1," Ocorreu um erro ao buscar a avalia\xe7\xe3o. "),f["\u0275\u0275elementEnd"]())}function Bn(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span"),f["\u0275\u0275element"](1,"br"),f["\u0275\u0275text"](2," * "),f["\u0275\u0275elementStart"](3,"strong"),f["\u0275\u0275text"](4),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](5," Acesse: Financeiro -> Renegocia\xe7\xe3o. Ou ligue para: (47) 3281-9018 e converse com o departamento financeiro. "),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](3);f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate1"]("Voc\xea est\xe1 com ",e.pendencies.financial," parcela(s) em atraso.")}}function Rn(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span"),f["\u0275\u0275element"](1,"br"),f["\u0275\u0275text"](2," * "),f["\u0275\u0275elementStart"](3,"strong"),f["\u0275\u0275text"](4),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](5,"\xa0 Acesse as op\xe7\xf5es de usu\xe1rio no canto superior direito e clique em documentos cadastrais. Insira todos os documentos pendentes. "),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](3);f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate1"]("Voc\xea possui documento(s) pendente(s) : ",e.pendencies.document,"!")}}function Hn(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",21),f["\u0275\u0275text"](1," Antes de realizar a \xfaltima avalia\xe7\xe3o \xe9 necess\xe1rio regularizar algumas pend\xeancias. "),f["\u0275\u0275element"](2,"br"),f["\u0275\u0275template"](3,Bn,6,1,"span",14),f["\u0275\u0275template"](4,Rn,6,1,"span",14),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngIf",e.pendencies.financial),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.pendencies.document)}}function Qn(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",21),f["\u0275\u0275text"](1," Essa avalia\xe7\xe3o j\xe1 foi finalizada. "),f["\u0275\u0275elementEnd"]())}function Gn(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",21),f["\u0275\u0275text"](1," Ocorreu um erro ao buscar a avalia\xe7\xe3o. "),f["\u0275\u0275elementEnd"]())}function Ln(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",25),f["\u0275\u0275elementStart"](1,"span",26),f["\u0275\u0275text"](2,"Peso"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](3),f["\u0275\u0275pipe"](4,"number"),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](3);f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" ",f["\u0275\u0275pipeBind2"](4,1,null==e.test?null:e.test.weight,"1.2-2")," ")}}function Un(e,t){if(1&e&&f["\u0275\u0275element"](0,"img",45),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275property"]("src",e.image.base64,f["\u0275\u0275sanitizeUrl"])}}function Yn(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span"),f["\u0275\u0275elementStart"](1,"mat-radio-button",50),f["\u0275\u0275elementStart"](2,"span",51),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](4,"span",52),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("value",e.letter),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("",e.letter,") \xa0"),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHtml",e.description,f["\u0275\u0275sanitizeHtml"])}}function Jn(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",46),f["\u0275\u0275elementStart"](1,"div",47),f["\u0275\u0275elementStart"](2,"mat-radio-group",48),f["\u0275\u0275listener"]("change",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](4).onChangeAlternative(t.code)})),f["\u0275\u0275template"](3,Yn,5,3,"span",49),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]().$implicit,t=f["\u0275\u0275nextContext"](4);f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("disabled",t.loadingSaveObjectiveQuestion>0),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.alternatives)}}function Wn(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"mat-error"),f["\u0275\u0275text"](1," Resposta \xe9 "),f["\u0275\u0275elementStart"](2,"strong"),f["\u0275\u0275text"](3,"obrigat\xf3ria"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]())}function Kn(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",53),f["\u0275\u0275elementStart"](1,"div",47),f["\u0275\u0275elementStart"](2,"mat-form-field",54),f["\u0275\u0275elementStart"](3,"textarea",55),f["\u0275\u0275listener"]("keydown",(function(t){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"](5).disablePaste(t)}))("keyup",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().index;return f["\u0275\u0275nextContext"](4).countTextarea(t)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](4,Wn,4,0,"mat-error",14),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"small",56),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]().index,t=f["\u0275\u0275nextContext"](4);f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngIf",t.questionControls[e].controls.answer.hasError("required")),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("",t.questionControls[e].controls.count.value," de 4000 caracteres")}}function Xn(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",57),f["\u0275\u0275elementStart"](1,"span",58),f["\u0275\u0275elementStart"](2,"strong"),f["\u0275\u0275text"](3,"Aten\xe7\xe3o, o campo abaixo \xe9 reservado para o anexo de sua resposta!"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"ava-attachment",59),f["\u0275\u0275listener"]("attachment",(function(t){f["\u0275\u0275restoreView"](e);const n=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](4).saveFile(t,n.code)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}}function Zn(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275element"](1,"br"),f["\u0275\u0275elementStart"](2,"span",58),f["\u0275\u0275elementStart"](3,"strong"),f["\u0275\u0275text"](4,"Para anexar um novo arquivo remova o arquivo atual"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"div",60),f["\u0275\u0275elementStart"](6,"a",61),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().$implicit,n=f["\u0275\u0275nextContext"](4);return n.onClickDownloadAttachment(n.initFile[t.code],!0)})),f["\u0275\u0275elementStart"](7,"div",62),f["\u0275\u0275element"](8,"img",63),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"div",64),f["\u0275\u0275elementStart"](10,"span",26),f["\u0275\u0275text"](11),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](12,"br"),f["\u0275\u0275elementStart"](13,"span",65),f["\u0275\u0275text"](14,"Clique para baixar"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](15,"a",66),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](4).clearInitFile(t.code)})),f["\u0275\u0275element"](16,"span",67),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]().$implicit,t=f["\u0275\u0275nextContext"](4);f["\u0275\u0275advance"](11),f["\u0275\u0275textInterpolate"](t.initFile[e.code].description)}}function ea(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",69),f["\u0275\u0275elementStart"](1,"a",61),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const n=t.$implicit;return f["\u0275\u0275nextContext"](6).onClickDownloadAttachment(n)})),f["\u0275\u0275elementStart"](2,"div",62),f["\u0275\u0275element"](3,"img",63),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",64),f["\u0275\u0275elementStart"](5,"span",26),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](7,"br"),f["\u0275\u0275elementStart"](8,"span",65),f["\u0275\u0275text"](9,"Clique para baixar o anexo da quest\xe3o"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;f["\u0275\u0275advance"](6),f["\u0275\u0275textInterpolate"](e.description)}}function ta(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,ea,10,1,"div",68),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.attachments)}}const na=function(e,t){return{"original-font":e,"increased-font":t}},aa=function(){return[6,7]},ia=function(){return[1,3]},ra=function(){return[2,3]};function oa(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",38),f["\u0275\u0275elementStart"](1,"span",39),f["\u0275\u0275text"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](3,"span",40),f["\u0275\u0275template"](4,Un,1,1,"img",41),f["\u0275\u0275template"](5,Jn,4,2,"div",42),f["\u0275\u0275template"](6,Kn,7,2,"div",43),f["\u0275\u0275template"](7,Xn,5,0,"div",44),f["\u0275\u0275template"](8,Zn,17,1,"div",14),f["\u0275\u0275template"](9,ta,2,1,"ng-container",14),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index,a=f["\u0275\u0275nextContext"](4);f["\u0275\u0275property"]("formGroupName",n)("ngClass",f["\u0275\u0275pureFunction2"](10,na,1==a.fontStyle,2==a.fontStyle)),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](e.number),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHTML",e.descriptionFormated,f["\u0275\u0275sanitizeHtml"]),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!!e.image.base64),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==e.type||a.isPresential&&f["\u0275\u0275pureFunction0"](13,aa).includes(e.type)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",2==e.type&&f["\u0275\u0275pureFunction0"](14,ia).includes(e.answerType)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",2==e.type&&f["\u0275\u0275pureFunction0"](15,ra).includes(e.answerType)&&!a.initFile[e.code]),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",a.initFile[e.code]),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.attachments)}}function sa(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,oa,10,16,"div",37),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](3);f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.testQuestions)}}function la(e,t){if(1&e&&f["\u0275\u0275element"](0,"img",45),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275property"]("src",null==e.image?null:e.image.base64,f["\u0275\u0275sanitizeUrl"])}}function ca(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span"),f["\u0275\u0275elementStart"](1,"mat-radio-button",50),f["\u0275\u0275elementStart"](2,"span",51),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](4,"span",52),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("value",e.letter),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("",e.letter,") \xa0"),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHtml",e.description,f["\u0275\u0275sanitizeHtml"])}}function da(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",46),f["\u0275\u0275elementStart"](1,"div",47),f["\u0275\u0275elementStart"](2,"mat-radio-group",48),f["\u0275\u0275listener"]("change",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](4).onChangeAlternative(t.code)})),f["\u0275\u0275template"](3,ca,5,3,"span",49),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]().$implicit,t=f["\u0275\u0275nextContext"](4);f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("disabled",t.loadingSaveObjectiveQuestion>0||t.loadingFinalize),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.alternatives)}}function ma(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"mat-error"),f["\u0275\u0275text"](1," Resposta \xe9 "),f["\u0275\u0275elementStart"](2,"strong"),f["\u0275\u0275text"](3,"obrigat\xf3ria"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]())}function pa(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",53),f["\u0275\u0275elementStart"](1,"div",47),f["\u0275\u0275elementStart"](2,"mat-form-field",54),f["\u0275\u0275elementStart"](3,"textarea",55),f["\u0275\u0275listener"]("keydown",(function(t){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"](5).disablePaste(t)}))("keyup",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().index;return f["\u0275\u0275nextContext"](4).countTextarea(t)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](4,ma,4,0,"mat-error",14),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"small",56),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]().index,t=f["\u0275\u0275nextContext"](4);f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngIf",t.questionControls[e].controls.answer.hasError("required")),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("",t.questionControls[e].controls.count.value," de 4000 caracteres")}}function ua(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",57),f["\u0275\u0275elementStart"](1,"span",58),f["\u0275\u0275elementStart"](2,"strong"),f["\u0275\u0275text"](3,"Aten\xe7\xe3o, o campo abaixo \xe9 reservado para o anexo de sua resposta!"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"ava-attachment",59),f["\u0275\u0275listener"]("attachment",(function(t){f["\u0275\u0275restoreView"](e);const n=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](4).saveFile(t,n.code)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}}function ga(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275element"](1,"br"),f["\u0275\u0275elementStart"](2,"span",58),f["\u0275\u0275elementStart"](3,"strong"),f["\u0275\u0275text"](4,"Para anexar um novo arquivo remova o arquivo atual"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"div",60),f["\u0275\u0275elementStart"](6,"a",61),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().$implicit,n=f["\u0275\u0275nextContext"](4);return n.onClickDownloadAttachment(n.initFile[t.code],!0)})),f["\u0275\u0275elementStart"](7,"div",62),f["\u0275\u0275element"](8,"img",63),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"div",64),f["\u0275\u0275elementStart"](10,"span",26),f["\u0275\u0275text"](11),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](12,"br"),f["\u0275\u0275elementStart"](13,"span",65),f["\u0275\u0275text"](14,"Clique para baixar"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](15,"a",66),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](4).clearInitFile(t.code)})),f["\u0275\u0275element"](16,"span",67),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]().$implicit,t=f["\u0275\u0275nextContext"](4);f["\u0275\u0275advance"](11),f["\u0275\u0275textInterpolate"](t.initFile[e.code].description)}}function fa(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",69),f["\u0275\u0275elementStart"](1,"a",61),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const n=t.$implicit;return f["\u0275\u0275nextContext"](6).onClickDownloadAttachment(n)})),f["\u0275\u0275elementStart"](2,"div",62),f["\u0275\u0275element"](3,"img",63),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",64),f["\u0275\u0275elementStart"](5,"span",26),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](7,"br"),f["\u0275\u0275elementStart"](8,"span",65),f["\u0275\u0275text"](9,"Clique para baixar o anexo da quest\xe3o"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;f["\u0275\u0275advance"](6),f["\u0275\u0275textInterpolate"](e.description)}}function va(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,fa,10,1,"div",68),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.attachments)}}function ha(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"button",78),f["\u0275\u0275text"](1,"Anterior"),f["\u0275\u0275elementEnd"]())}function xa(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"button",79),f["\u0275\u0275text"](1,"Pr\xf3xima"),f["\u0275\u0275elementEnd"]())}const ba=function(){return["3","4"]};function Sa(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-step",73),f["\u0275\u0275elementStart"](1,"div",74),f["\u0275\u0275text"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](3,"span",40),f["\u0275\u0275template"](4,la,1,1,"img",41),f["\u0275\u0275template"](5,da,4,2,"div",42),f["\u0275\u0275template"](6,pa,7,2,"div",43),f["\u0275\u0275template"](7,ua,5,0,"div",44),f["\u0275\u0275template"](8,ga,17,1,"div",14),f["\u0275\u0275template"](9,va,2,1,"ng-container",14),f["\u0275\u0275elementStart"](10,"div",75),f["\u0275\u0275template"](11,ha,2,0,"button",76),f["\u0275\u0275template"](12,xa,2,0,"button",77),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index,a=t.first,i=t.last,r=f["\u0275\u0275nextContext"](4);f["\u0275\u0275property"]("formGroupName",n)("completed",r.questionControls[n].valid),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("Quest\xe3o ",e.number,""),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHTML",e.descriptionFormated,f["\u0275\u0275sanitizeHtml"]),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!(null==e.image||!e.image.base64)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==e.type||r.isPresential&&f["\u0275\u0275pureFunction0"](12,aa).includes(e.type)||f["\u0275\u0275pureFunction0"](13,ba).includes(r.studentModality)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!f["\u0275\u0275pureFunction0"](14,ba).includes(r.studentModality)&&2==e.type&&f["\u0275\u0275pureFunction0"](15,ia).includes(e.answerType)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!f["\u0275\u0275pureFunction0"](16,ba).includes(r.studentModality)&&2==e.type&&f["\u0275\u0275pureFunction0"](17,ra).includes(e.answerType)&&!r.initFile[e.code]),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",r.initFile[e.code]),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.attachments),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",!a),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!i)}}function Ca(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-horizontal-stepper",70,71),f["\u0275\u0275template"](2,Sa,13,18,"mat-step",72),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](3);f["\u0275\u0275property"]("ngClass",f["\u0275\u0275pureFunction2"](3,na,1==e.fontStyle,2==e.fontStyle))("linear",!1),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",e.testQuestions)}}function ya(e,t){1&e&&f["\u0275\u0275element"](0,"i",81)}function Ea(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",80),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"](3).onSaveTest()})),f["\u0275\u0275text"](1,"Salvar "),f["\u0275\u0275template"](2,ya,1,0,"i",34),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"](3);f["\u0275\u0275property"]("disabled",e.loadingSaveQuestions),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",e.loadingSaveQuestions)}}function wa(e,t){1&e&&f["\u0275\u0275element"](0,"i",81)}function Ia(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275text"](1),f["\u0275\u0275pipe"](2,"number"),f["\u0275\u0275element"](3,"br"),f["\u0275\u0275element"](4,"br"),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](3);f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"]("Peso: ",f["\u0275\u0275pipeBind2"](2,1,null==e.test?null:e.test.weight,"1.2-2")," ")}}function _a(e,t){if(1&e&&f["\u0275\u0275element"](0,"img",45),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275property"]("src",null==e.image?null:e.image.base64,f["\u0275\u0275sanitizeUrl"])}}function Oa(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",86),f["\u0275\u0275elementStart"](1,"span",87),f["\u0275\u0275text"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](3,"span",88),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"](" ",e.letter," ) "),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHtml",e.description,f["\u0275\u0275sanitizeHtml"])}}function ja(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",84),f["\u0275\u0275elementStart"](1,"div",47),f["\u0275\u0275template"](2,Oa,4,2,"div",85),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",e.alternatives)}}function Pa(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",82),f["\u0275\u0275elementStart"](1,"span"),f["\u0275\u0275text"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](3,"span",40),f["\u0275\u0275template"](4,_a,1,1,"img",41),f["\u0275\u0275template"](5,ja,3,1,"div",83),f["\u0275\u0275element"](6,"hr"),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=f["\u0275\u0275nextContext"](3);f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("",e.number," - "),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHTML",e.descriptionFormated,f["\u0275\u0275sanitizeHtml"]),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!(null==e.image||!e.image.base64)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==e.type||n.isPresential&&f["\u0275\u0275pureFunction0"](4,aa).includes(e.type))}}function Ma(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"div",22),f["\u0275\u0275elementStart"](2,"div",23),f["\u0275\u0275elementStart"](3,"span"),f["\u0275\u0275text"](4),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"small",24),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"div",25),f["\u0275\u0275elementStart"](8,"span",26),f["\u0275\u0275text"](9,"Prova"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](10),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](11,"div",25),f["\u0275\u0275elementStart"](12,"span",26),f["\u0275\u0275text"](13,"Per\xedodo para responder"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](14),f["\u0275\u0275pipe"](15,"date"),f["\u0275\u0275pipe"](16,"date"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](17,Ln,5,4,"div",27),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](18,"form",28),f["\u0275\u0275elementContainerStart"](19,29),f["\u0275\u0275template"](20,sa,2,1,"ng-container",14),f["\u0275\u0275template"](21,Ca,3,6,"mat-horizontal-stepper",30),f["\u0275\u0275elementStart"](22,"div",31),f["\u0275\u0275template"](23,Ea,3,2,"button",32),f["\u0275\u0275elementStart"](24,"button",33),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"](2).onFinalize()})),f["\u0275\u0275text"](25,"Finalizar "),f["\u0275\u0275template"](26,wa,1,0,"i",34),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](27,"div",35),f["\u0275\u0275text"](28),f["\u0275\u0275element"](29,"br"),f["\u0275\u0275text"](30),f["\u0275\u0275element"](31,"br"),f["\u0275\u0275text"](32),f["\u0275\u0275element"](33,"br"),f["\u0275\u0275text"](34),f["\u0275\u0275pipe"](35,"date"),f["\u0275\u0275pipe"](36,"date"),f["\u0275\u0275element"](37,"br"),f["\u0275\u0275template"](38,Ia,5,4,"ng-container",14),f["\u0275\u0275template"](39,Pa,7,5,"div",36),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate2"]("",e.test.description," (Cod.:",e.test.testCode,")"),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate2"]("",e.subject.description," (",e.subject.code,")"),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate1"](" ",e.test.examCode||"-"," "),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate2"](" ",f["\u0275\u0275pipeBind2"](15,24,e.test.beginDate,"dd/MM/yyyy")," - ",f["\u0275\u0275pipeBind2"](16,27,e.test.endDate,"dd/MM/yyyy")," "),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("igIf",!e.isPresential),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("formGroup",e.testForm),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",1==e.answerViewMode),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",2==e.answerViewMode),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",2==e.testInfo.type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("disabled",e.loadingFinalize||e.loadingSaveObjectiveQuestion>0||!e.testForm.valid),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",e.loadingFinalize),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("hidden",!0),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate2"](" ",e.test.description," (Cod.:",e.test.testCode,") "),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"](" C\xf3digo da prova: ",e.test.examCode," "),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate2"](" Disciplina: ",e.subject.description," (",e.subject.code,") "),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate2"](" Per\xedodo para responder: ",f["\u0275\u0275pipeBind2"](35,30,e.test.beginDate,"dd/MM/yyyy")," - ",f["\u0275\u0275pipeBind2"](36,33,e.test.endDate,"dd/MM/yyyy")," "),f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngIf",!e.isPresential),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.testQuestions)}}function Fa(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,$n,2,0,"div",20),f["\u0275\u0275template"](2,Hn,5,2,"div",20),f["\u0275\u0275template"](3,Qn,2,0,"div",20),f["\u0275\u0275template"](4,Gn,2,0,"div",20),f["\u0275\u0275template"](5,Ma,40,36,"ng-container",14),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!e.canAnswerTest&&null==e.pendencies||e.testError),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!e.canAnswerTest&&null!=e.pendencies),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.testInfo.completed),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!e.testInfo.completed&&0==e.testQuestions.length),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.canAnswerTest&&!e.testError&&!e.testInfo.completed&&e.testQuestions.length>0)}}let Aa=(()=>{class e{constructor(e,t,n,a,i,r,o,s,l,c,d){this.route=e,this.router=t,this.testService=n,this.securityService=a,this.formBuilder=i,this.sanitize=r,this.dialog=o,this.sanitizer=s,this.dbService=l,this.productionService=c,this.commonService=d,this.loadingTestData=!1,this.loadingFinalize=!1,this.loadingSaveQuestions=!1,this.canAnswerTest=!0,this.subject=null,this.test=null,this.cpaQuestions=[],this.studentModality=this.securityService.securityObject.modality,this.testQuestions=[],this.loadingSaveObjectiveQuestion=0,this.routeReturn=null,this.initFile=[],this.testError=!1,this.pendencies=null,this.answerViewMode=2,this.fontStyle=1,this.isPresential=this.securityService.securityObject.isPresential,this.testForm=this.formBuilder.group({questions:new m.FormArray([])}),this.dbService.getByIndex("user_settings","specialization",this.securityService.securityObject.specialization).subscribe(e=>{null!=e&&(this.answerViewMode=e.question_view_mode)})}get questionControls(){return this.testForm.controls.questions.controls}ngOnInit(){this.route.params.subscribe(e=>{var t=JSON.parse(this.commonService.base64Decode(e.param));this.subject=t.subject?t.subject:null,this.test=t.test?t.test:null,this.routeReturn=t.routeReturn?t.routeReturn:null,this.getTestData()})}saveFile(e,t){return Object(d.a)(this,void 0,void 0,(function*(){var n=yield this.commonService.convertBlobToBase64(e.data);this.initFile[t]=this.testService.createQuestionAttachmentNewObject({attachment_code:t,description:n.name,file:n.data,mime_type:n.type,sequence:t})}))}clearInitFile(e){this.initFile[e]=null}sendAttachment(e,t){return Object(d.a)(this,void 0,void 0,(function*(){let n=!1;return yield this.productionService.newQuestionAttachment(this.test.examCode,e,this.initFile[e],this.subject.class).then(e=>{n=!0}).catch(e=>{c.a.fire({text:"Ocorreu um erro ao inserir o anexo da quest\xe3o "+t+". Tente novamente!",icon:"error"})}),n}))}disablePaste(e){e.ctrlKey&&86==e.keyCode&&e.preventDefault()}countTextarea(e){var t=this.testForm.controls.questions.controls[e].controls.answer.value;this.testForm.controls.questions.controls[e].controls.count.setValue(null!=t?t.length:0)}getTestData(){this.loadingTestData=!0,"8"==this.studentModality&&(this.test.testCode=this.test.examCode),["1","2","8"].includes(this.studentModality)?this.testService.setNewTest(this.subject.class,this.subject.code,this.test.parameter,this.test.newExam,this.test.semester).subscribe({next:e=>{if(null==e)return!0;e&&e.test_code&&(this.test.examCode=e.test_code?e.test_code:this.test.examCode,this.test.testCode=e.code?e.code:this.test.testCode,this.test.semester=e.semester?e.semester:this.test.semester,this.test.type=e.type?e.type:this.test.type),"2"==this.test.type&&c.a.fire({html:"Ol\xe1, acad\xeamico (a)! Voc\xea estar\xe1 sendo avaliado por respostas apresentadas com reflex\xe3o. \n                                        Responda com suas pr\xf3prias palavras, n\xe3o utilize a transcri\xe7\xe3o literal de trechos do seu livro, sites da internet e/ou resposta esperada (gabarito). \n                                        <br><br>\n                                        As avalia\xe7\xf5es discursivas s\xe3o corrigidas pela tutoria interna e o prazo para a postagem das notas no AVA/LeoApp \xe9 de at\xe9 30 dias. Por favor, aguarde!\n                                        <br><br>\n                                        Boa avalia\xe7\xe3o!",icon:"info",showCancelButton:!0,confirmButtonText:"Estou Ciente",cancelButtonText:"Cancelar",allowOutsideClick:!1}).then(e=>{e.isConfirmed||this.return()}),this.getTestQuestions()},error:e=>{},complete:()=>{}}):"3"==this.studentModality&&this.getTestQuestions()}getTestQuestions(){this.testService.getTestDataApi(this.test.testCode,this.test.examCode,this.subject.semester,this.subject.code,this.subject.class,this.test.typeDescription,!1).subscribe({next:e=>{if(null==e)return!0;if(e&&e.error_code&&"have_pendencies"==e.error_code)return this.pendencies=e.pendencies,this.canAnswerTest=!1,!1;this.canAnswerTest=!0,this.testInfo=this.testService.createTestInfoNewObject(e.info),this.testInfo.examCode&&(this.test.examCode=this.testInfo.examCode),e.cpa&&null!=e.cpa&&(this.cpaQuestions=e.cpa.map(e=>this.testService.createNewObjectCPAQuestion(e)));for(let a of e.questions){a.description_formated||(a.description_formated=a.description),1==a.status&&null==a.description_formated&&(this.testError=!0),null!=a.expected_response&&(a.expected_response=a.expected_response.toString().replace(/style=\"(?!text-deco)[^\"]*"/gim,""),a.expected_response=this.commonService.nl2br(a.expected_response,!1),a.expected_response=this.sanitizer.bypassSecurityTrustHtml(a.expected_response)),null!=a.feedback&&(a.feedback=a.feedback.toString().replace(/style=\"(?!text-deco)[^\"]*"/gim,""),a.feedback=this.commonService.nl2br(a.feedback,!1),a.feedback=this.sanitizer.bypassSecurityTrustHtml(a.feedback)),null!=a.description_formated&&(a.description_formated=a.description_formated.toString().replace(/style=\"(?!text-deco)[^\"]*"/gim,"")),a.description_formated=this.sanitizer.bypassSecurityTrustHtml(a.description_formated),a.image&&(a.image.base64=null,a.image.file&&(a.image.base64=this.sanitize.bypassSecurityTrustUrl(`data:${a.image.mime};base64,${a.image.file}`)));let e=this.testService.createQuestionNewObject(a);e.answerAttachment&&(this.initFile[e.code]=e.answerAttachment),this.testQuestions.push(e);var t=null;a.answer&&(t=a.answer);var n=null;null==t&&2!=a.type_code||(n=!0),2==(null==a?void 0:a.answer_type_code)&&2==a.type_code&&null===t&&(t="resposta em anexo"),this.testForm.controls.questions.push(this.formBuilder.group({number:[a.number,m.Validators.required],code:[a.question_code?a.question_code:a.code,m.Validators.required],answer:[t,m.Validators.required],saved:[n,m.Validators.required],count:[0,null]}))}},error:e=>{this.testError=!0,this.loadingTestData=!1},complete:()=>{this.loadingTestData=!1}})}onChangeAlternative(e){this.loadingSaveObjectiveQuestion++;for(let n of this.questionControls)n.controls.code.value==e&&n.controls.saved.setValue(null);var t=this.testForm.value.questions.filter(t=>t.code==e)[0];this.testService.answerTestQuestionApi(this.test.examCode,[{code:t.code,answear:t.answer}]).subscribe({next:t=>{for(let n of this.questionControls)n.controls.code.value==e&&n.controls.saved.setValue(!0);this.loadingSaveObjectiveQuestion--},error:()=>{this.loadingSaveObjectiveQuestion--}})}onFinalize(){return Object(d.a)(this,void 0,void 0,(function*(){if($(".uppy-Dashboard-AddFiles-title").length>0)return c.a.fire({text:"Aten\xe7\xe3o: Sua prova cont\xe9m uma ou mais quest\xf5es no modelo de reposta por anexo. Antes e finalizar selecione o anexo com sua resposta.",icon:"warning"}),!1;if(!this.testForm.valid)return c.a.fire({text:"H\xe1 perguntas n\xe3o respondidas.",icon:"warning"}),!1;var e=this.cpaQuestions.length>0,t=null;let n=!0;if(e){this.loadingFinalize=!0;var a=this.dialog.open(An,{width:"710px",maxHeight:"600px",disableClose:!0,data:{questions:this.cpaQuestions}});if(!(yield a.afterClosed().toPromise().then(e=>!(!e.success||0==e.success||0==e.questionForm.valid||(t=e.questionForm.value.questions,0)))))return this.loadingFinalize=!1,!1}if(1==this.testInfo.type){var i=this.testForm.value.questions,r=[];for(let e of i)r.push({code:e.code,answear:e.answer});this.loadingFinalize=!0,this.testService.answerTestQuestionApi(this.test.examCode,r).subscribe({next:n=>{this.finalizeTest(e,t)},error:()=>{this.loadingFinalize=!1,c.a.fire({text:"Ocorreu um erro ao finalizar a avalia\xe7\xe3o.",icon:"error"})}})}else if(2==this.testInfo.type){r=[];for(let e of this.testForm.value.questions)null!=e.answer&&""!=e.answer&&r.push({code:e.code,answear:e.answer});this.testQuestions.forEach((e,t)=>Object(d.a)(this,void 0,void 0,(function*(){this.initFile[e.code]&&((yield this.sendAttachment(e.code,e.number))||(n=!1))}))),this.loadingSaveQuestions=!0,this.testService.answerTestQuestionApi(this.test.examCode,r).subscribe({next:a=>{this.loadingSaveQuestions=!1,n&&this.finalizeTest(e,t)},error:()=>{this.loadingSaveQuestions=!1,c.a.fire({text:"Ocorreu um erro ao finalizar a avalia\xe7\xe3o.",icon:"error"})}})}else["1","3","4"].includes(this.studentModality)&&this.finalizeTest(!1,null)}))}finalizeTest(e=!1,t=null){this.loadingFinalize=!0;var n=null,a=null;if(1==this.testInfo.type||["1","3","4"].includes(this.studentModality)){n='Confira o gabarito: <br><br>\n            <div class="answer-book-container" style="\n                -moz-column-count: 3;\n                -moz-column-gap: 0;\n                -webkit-column-count: 3;\n                -webkit-column-gap: 0;\n                column-count: 3;\n                column-gap: 0;"\n            >';for(let e of this.testForm.value.questions)null!=e.answer&&""!=e.answer&&(n+=`<div>\n                                ${e.number}: ${e.answer}\n                            </div>`);n+="</div>"}if(e&&null!=t){n+='<br><br> CPA: <br><br>\n            <div class="answer-book-container" style="\n                -moz-column-count: 3;\n                -moz-column-gap: 0;\n                -webkit-column-count: 3;\n                -webkit-column-gap: 0;\n                column-count: 3;\n                column-gap: 0;"\n            >';for(let e of t)null!=e.answer&&""!=e.answer&&(n+=`<div>\n                                ${e.number}: ${e.answer}\n                            </div>`);n+="</div>"}c.a.fire({title:"Voc\xea tem certeza que deseja finalizar a avalia\xe7\xe3o?",html:n,showCancelButton:!0,confirmButtonText:"Finalizar",cancelButtonText:"Cancelar"}).then(n=>{n.isConfirmed?(a="2"==this.test.type?"As avalia\xe7\xf5es discursivas s\xe3o corrigidas pela tutoria interna e o prazo para a postagem das notas no AVA/LeoApp \xe9 de at\xe9 30 dias. Por favor, aguarde! <br><br> Avalia\xe7\xe3o finalizada com sucesso.":"Avalia\xe7\xe3o finalizada com sucesso.",this.testService.finalizeTest(this.test.examCode,this.subject.semester,this.subject.code).subscribe({next:n=>{if(e&&null!=t){var i=[];for(let e of t)i.push(e.answer);this.testService.setCpaAnswears(i,this.test.examCode,this.cpaQuestions[0].quizOption,141).subscribe({next:e=>{var t=this.commonService.base64Encode(JSON.stringify({subject:this.subject}));this.router.navigate(["/subject/grades-and-tests/list",t]).then(()=>{c.a.fire({html:a,icon:"success"})})},error:e=>{this.loadingFinalize=!1,c.a.fire({text:"Ocorreu um erro ao responder a CPA.",icon:"error"})},complete:()=>{this.loadingFinalize=!1}})}else{var r=this.commonService.base64Encode(JSON.stringify({subject:this.subject}));this.router.navigate(["/subject/grades-and-tests/list",r]).then(()=>{c.a.fire({html:a,icon:"success"})})}},error:e=>{this.loadingFinalize=!1,c.a.fire({text:"Ocorreu um erro ao finalizar a avalia\xe7\xe3o.",icon:"error"})},complete:()=>{this.loadingFinalize=!1}})):this.loadingFinalize=!1})}onSaveTest(){var e=[];for(let t of this.testForm.value.questions)null!=t.answer&&""!=t.answer&&e.push({code:t.code,answear:t.answer});for(let t of this.testQuestions)this.initFile[t.code]&&this.sendAttachment(t.code,t.number);if(0==e.length)return c.a.fire({text:"Nenhuma quest\xe3o respondida.",icon:"warning"}),!1;this.loadingSaveQuestions=!0,this.testService.answerTestQuestionApi(this.test.examCode,e).subscribe({next:e=>{this.loadingSaveQuestions=!1},error:()=>{this.loadingSaveQuestions=!1}})}onClickChangeViewMode(){1==this.answerViewMode?this.answerViewMode=2:2==this.answerViewMode&&(this.answerViewMode=1);var e=this.securityService.securityObject.specialization;this.dbService.deleteByKey("user_settings",e).subscribe(t=>{this.dbService.add("user_settings",{specialization:e,question_view_mode:this.answerViewMode}).subscribe(()=>{})})}onClickDownloadAttachment(e,t=!1){var n="anexo_questao_"+e.code;t&&(n=e.description),this.commonService.downloadFileBase64(e.fileType,n,e.fileData)}onChangeFontButton(){1==this.fontStyle?this.fontStyle=2:2==this.fontStyle&&(this.fontStyle=1)}onClickPrintTest(){}return(){if(null!=this.routeReturn)this.router.navigate([this.routeReturn]);else{var e=this.commonService.base64Encode(JSON.stringify({subject:this.subject}));this.router.navigate(["/subject/grades-and-tests/list",e])}}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](a.a),f["\u0275\u0275directiveInject"](a.e),f["\u0275\u0275directiveInject"](v.a),f["\u0275\u0275directiveInject"](K.a),f["\u0275\u0275directiveInject"](m.FormBuilder),f["\u0275\u0275directiveInject"](gt.DomSanitizer),f["\u0275\u0275directiveInject"](p.b),f["\u0275\u0275directiveInject"](gt.DomSanitizer),f["\u0275\u0275directiveInject"](ft.b),f["\u0275\u0275directiveInject"](x.a),f["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-answer-test"]],decls:20,vars:6,consts:[[1,"return-link"],["mat-button","",1,"font-light",3,"click"],[1,"test-page-title"],[1,"page-title","font-ultra","mb-2"],["mat-raised-button","","printSectionId","test_print_div","ngxPrint","",1,"button-print"],[1,"fas","fa-print"],["mat-raised-button","",1,"button-fontsize",3,"click"],["matTooltip","Aumentar fonte",4,"ngIf"],["matTooltip","Diminuir fonte",4,"ngIf"],["mat-raised-button","",1,"button-view-mode",3,"click"],["src","/assets/icons/list-icon-blue.png","alt","",4,"ngIf"],["src","/assets/icons/step-icon-blue.png","alt","",4,"ngIf"],[1,"text-center"],["tooltipContent","Carregando as informa\xe7\xf5es...",4,"ngIf"],[4,"ngIf"],["matTooltip","Aumentar fonte"],["matTooltip","Diminuir fonte"],["src","/assets/icons/list-icon-blue.png","alt",""],["src","/assets/icons/step-icon-blue.png","alt",""],["tooltipContent","Carregando as informa\xe7\xf5es..."],["class","ava-alert red",4,"ngIf"],[1,"ava-alert","red"],[1,"info-grid"],[1,"info-item","text-left",2,"width","-webkit-fill-available"],[1,"font-light","ava-text-light"],[1,"info-item"],[1,"title"],["class","info-item",4,"igIf"],[3,"formGroup"],["formArrayName","questions"],["labelPosition","bottom",3,"ngClass","linear",4,"ngIf"],[1,"text-center","mt-3"],["type","button","color","ava-primary","mat-raised-button","",3,"disabled","click",4,"ngIf"],["type","button","color","ava-success","mat-raised-button","",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],["id","test_print_div",1,"print-div",3,"hidden"],["class","question-card mt-3",4,"ngFor","ngForOf"],["class","question-card mt-3",3,"formGroupName","ngClass",4,"ngFor","ngForOf"],[1,"question-card","mt-3",3,"formGroupName","ngClass"],[1,"question-icon"],[1,"question-content",3,"innerHTML"],["class","mt-3 question-image",3,"src",4,"ngIf"],["class","alternative-container row mt-3",4,"ngIf"],["class","row mt-3",4,"ngIf"],["class","row mt-3 col-12",4,"ngIf"],[1,"mt-3","question-image",3,"src"],[1,"alternative-container","row","mt-3"],[1,"col-12"],["color","primary","formControlName","answer",1,"font-light",3,"disabled","change"],[4,"ngFor","ngForOf"],["required","",3,"value"],[1,"font-bold"],[3,"innerHtml"],[1,"row","mt-3"],["appearance","outline",1,"w-100"],["formControlName","answer","matInput","","placeholder","Informe a resposta aqui...","maxlength","4000",3,"keydown","keyup"],[1,"float-right"],[1,"row","mt-3","col-12"],[1,"question-content"],[2,"width","100%",3,"attachment"],[1,"div-download-file","mt-3","no-margin"],["matTooltip","Clique para baixar o arquivo",3,"click"],[1,"float-left"],["src","assets/icons/icon-file.png"],[1,""],[1,"subtitle"],["matTooltip","Remover Arquivo",1,"float-right",3,"click"],[1,"fas","fa-trash-alt","danger"],["class","div-download-file mt-3",4,"ngFor","ngForOf"],[1,"div-download-file","mt-3"],["labelPosition","bottom",3,"ngClass","linear"],["stepper",""],[3,"formGroupName","completed",4,"ngFor","ngForOf"],[3,"formGroupName","completed"],[1,"step-title","mt-3"],[1,"buttons","mt-3"],["type","button","mat-raised-button","","color","ava-primary","matStepperPrevious","",4,"ngIf"],["type","button","mat-raised-button","","color","ava-primary","matStepperNext","",4,"ngIf"],["type","button","mat-raised-button","","color","ava-primary","matStepperPrevious",""],["type","button","mat-raised-button","","color","ava-primary","matStepperNext",""],["type","button","color","ava-primary","mat-raised-button","",3,"disabled","click"],[1,"fa","fa-spinner","fa-spin"],[1,"question-card","mt-3"],["class","alternative-container row mt-3","style","margin-top:10px",4,"ngIf"],[1,"alternative-container","row","mt-3",2,"margin-top","10px"],["style","margin-top:5px; ",4,"ngFor","ngForOf"],[2,"margin-top","5px"],[2,"width","22px"],[2,"margin-left","10px",3,"innerHtml"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275elementStart"](1,"a",1),f["\u0275\u0275listener"]("click",(function(){return t.return()})),f["\u0275\u0275element"](2,"img"),f["\u0275\u0275text"](3," VOLTAR "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",2),f["\u0275\u0275elementStart"](5,"div",3),f["\u0275\u0275text"](6," RESPONDER AVALIA\xc7\xc3O "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"div"),f["\u0275\u0275elementStart"](8,"button",4),f["\u0275\u0275element"](9,"i",5),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](10,"button",6),f["\u0275\u0275listener"]("click",(function(){return t.onChangeFontButton()})),f["\u0275\u0275template"](11,Tn,2,0,"span",7),f["\u0275\u0275template"](12,qn,2,0,"span",8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](13,"button",9),f["\u0275\u0275listener"]("click",(function(){return t.onClickChangeViewMode()})),f["\u0275\u0275template"](14,Nn,1,0,"img",10),f["\u0275\u0275template"](15,Vn,1,0,"img",11),f["\u0275\u0275elementStart"](16,"span",12),f["\u0275\u0275text"](17,"Alterar modo de visualiza\xe7\xe3o"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](18,zn,1,0,"ava-spinner",13),f["\u0275\u0275template"](19,Fa,6,5,"ng-container",14)),2&e&&(f["\u0275\u0275advance"](11),f["\u0275\u0275property"]("ngIf",1==t.fontStyle),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",2==t.fontStyle),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",2==t.answerViewMode),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",1==t.answerViewMode),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngIf",t.loadingTestData),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingTestData))},directives:[y.a,y.b,Dn.a,b.t,I.a,E.a,m["\u0275angular_packages_forms_forms_y"],m.NgControlStatusGroup,m.FormGroupDirective,m.FormArrayName,b.s,m.FormGroupName,b.q,En.b,m.NgControlStatus,m.FormControlName,En.a,S.c,m.DefaultValueAccessor,Z.b,m.MaxLengthValidator,S.b,kn.a,vt.a,vt.b,vt.i,vt.h],pipes:[b.f,b.g],styles:["p{margin-top:auto!important;margin-bottom:auto!important;display:inline-block!important}button[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.mat-radio-group[_ngcontent-%COMP%]     .mat-radio-label{white-space:inherit!important}.no-margin[_ngcontent-%COMP%]{margin-top:0!important}.question-image[_ngcontent-%COMP%]{background:#fff}.choose-question-method[_ngcontent-%COMP%]{padding:12px}.choose-question-method[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px}.choose-question-method[_ngcontent-%COMP%]    .mat-button-wrapper{display:flex;flex-direction:column}.test-page-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.test-page-title[_ngcontent-%COMP%]   .button-view-mode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.test-page-title[_ngcontent-%COMP%]   .button-view-mode[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.question-card[_ngcontent-%COMP%]{padding:24px;border-radius:7px}.question-card[_ngcontent-%COMP%]   .question-icon[_ngcontent-%COMP%]{line-height:1;border-radius:50%;height:25px;width:25px;flex-shrink:0;position:relative;margin-right:10px;display:inline-flex;justify-content:center;align-items:center;background-color:#00a09f;color:#fff;font-family:Neo Sans Std;font-weight:700}.button-fontsize[_ngcontent-%COMP%], .button-print[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;font-size:16px}.question-content[_ngcontent-%COMP%]{white-space:pre-wrap}.increased-font[_ngcontent-%COMP%]   .alternative-container[_ngcontent-%COMP%], .increased-font[_ngcontent-%COMP%]   .question-content[_ngcontent-%COMP%]{font-size:21px!important}.increased-font[_ngcontent-%COMP%]   .alternative-container[_ngcontent-%COMP%]   .alternative-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:26px!important;height:26px!important}.increased-font[_ngcontent-%COMP%]   .answer-container[_ngcontent-%COMP%]{font-size:21px!important}.answer-book-container[_ngcontent-%COMP%]{-moz-column-count:3;-moz-column-gap:20px;-webkit-column-count:3;-webkit-column-gap:20px;column-count:3;column-gap:20px}  table{border:2px solid;width:100%!important;text-align:center;border-collapse:collapse}  table td,   table th{border:1px solid;padding:3px 4px}  table thead{border-bottom:4px solid #333}  table thead th{font-size:15px;font-weight:700;color:#333;text-align:center;border-left:2px solid #333}  table thead th:first-child{border-left:none}  table tfoot{font-size:14px;font-weight:700;color:#333;border-top:4px solid #333}  table tfoot td{font-size:14px}"]}),e})();var Da=n("Eria"),ka=n("F4Qn"),Ta=n("wf0l");function qa(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner",6)}function Na(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",7),f["\u0275\u0275text"](1," Nenhuma informa\xe7\xe3o encontrada.\n"),f["\u0275\u0275elementEnd"]())}function Va(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"small",23),f["\u0275\u0275text"](1),f["\u0275\u0275pipe"](2,"date"),f["\u0275\u0275pipe"](3,"date"),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate2"]("",f["\u0275\u0275pipeBind2"](2,2,e.beginDate,"dd/MM/yyyy")," at\xe9 ",f["\u0275\u0275pipeBind2"](3,5,e.endDate,"dd/MM/yyyy"),"")}}function za(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"small",23),f["\u0275\u0275text"](1,"Data indefinida"),f["\u0275\u0275elementEnd"]())}function $a(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",24),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().$implicit,n=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](2).goToAnswerBook(t,n.subjectData)})),f["\u0275\u0275text"](1,"Gabarito"),f["\u0275\u0275elementEnd"]()}}function Ba(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",24),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](3).openPaperDialog(t)})),f["\u0275\u0275text"](1,"Enviar Arquivo"),f["\u0275\u0275elementEnd"]()}}function Ra(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",24),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](3).openPaperDialog(t,null==t||null==t.paper?null:t.paper.have_paper_file,null==t||null==t.paper||null==t.paper.buttons?null:t.paper.buttons.can_send)})),f["\u0275\u0275text"](1,"Visualizar Arquivo"),f["\u0275\u0275elementEnd"]()}}function Ha(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",27),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"](2).$implicit,n=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](2).goToAnswerTest(t,n.subjectData)})),f["\u0275\u0275text"](1,"Responder"),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"](5);f["\u0275\u0275property"]("disabled",e.spoTestClick)}}function Qa(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",28),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"](2).$implicit,n=f["\u0275\u0275nextContext"]().$implicit;return f["\u0275\u0275nextContext"](2).goToAnswerTest(t,n.subjectData)})),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"]("Tentar Novamente ",e.examMade,"")}}function Ga(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,Ha,2,1,"button",25),f["\u0275\u0275template"](2,Qa,2,1,"button",26),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.canAnswer&&!e.canTryAgain),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.canTryAgain&&e.canAnswer)}}function La(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",16),f["\u0275\u0275elementStart"](1,"div",17),f["\u0275\u0275elementStart"](2,"span"),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](4,Va,4,8,"small",18),f["\u0275\u0275template"](5,za,2,0,"small",18),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"div",19),f["\u0275\u0275elementStart"](7,"span",20),f["\u0275\u0275text"](8,"Peso"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](9),f["\u0275\u0275pipe"](10,"number"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](11,"div",21),f["\u0275\u0275template"](12,$a,2,0,"button",22),f["\u0275\u0275template"](13,Ba,2,0,"button",22),f["\u0275\u0275template"](14,Ra,2,0,"button",22),f["\u0275\u0275template"](15,Ga,3,2,"ng-container",5),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](e.description),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.beginDate&&e.endDate),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!e.beginDate||!e.endDate),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate1"](" ",f["\u0275\u0275pipeBind2"](10,8,null==e?null:e.weight,"1.2-2")," "),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngIf",null==e?null:e.canSeeAnswers),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!(null!=e&&null!=e.paper&&null!=e.paper.buttons&&e.paper.buttons.can_see_file)&&(null==e||null==e.paper||null==e.paper.buttons?null:e.paper.buttons.can_send)&&""!=(null==e?null:e.test_code)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",(null==e||null==e.paper||null==e.paper.buttons?null:e.paper.buttons.can_see_file)&&""!=(null==e?null:e.test_code)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.canAnswer)}}function Ua(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",9),f["\u0275\u0275elementStart"](1,"div",10),f["\u0275\u0275element"](2,"img",11),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"div",12),f["\u0275\u0275elementStart"](4,"div",13),f["\u0275\u0275text"](5),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"div",14),f["\u0275\u0275template"](7,La,16,11,"div",15),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("defaultImage","/assets/img/book_cover.png")("lazyLoad",n.subjectCoverLink[e.subjectData.code]),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate2"]("",e.subjectData.description," (",e.subjectData.code,")"),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",e.tests)}}function Ya(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,Ua,8,5,"div",8),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.subjects)}}let Ja=(()=>{class e{constructor(e,t,n,a,i,r,o,s,l,c){this.router=e,this.subjectService=t,this.dbService=n,this.dialog=a,this.securityService=i,this.testService=r,this.session=o,this.toasterService=s,this.commonService=l,this.pendencyService=c,this.loadingTests=!1,this.subjects=[],this.subjectCoverLink=[],this.spoTestClick=!1,this.spoTestWaitPage="/assets/others/spo-load/spo-load.html",this.spoTestErrorPage="/assets/others/spo-load/spo-error.html"}ngOnInit(){this.getTests()}getTests(){this.loadingTests=!0,this.subjectService.getPendingTests().subscribe({next:e=>{if(null==e)return!0;e.forEach((e,t)=>Object(d.a)(this,void 0,void 0,(function*(){var t=this.subjectService.createNewObjectPendingTest(e),n=""+t.subjectData.bookCodeIdentification;if(null!=(i=yield this.dbService.getByIndex("book_covers","code",n).toPromise().then(e=>e).catch(e=>{e.indexOf("objectStore does not exists")>-1&&(this.dbService.deleteDatabase(),window.location.reload())}))){var a=o(i.due,"YYYY-MM-DD");a||this.dbService.deleteDatabase(),(!a||a<o())&&(yield this.dbService.deleteByKey("book_covers",i.id).toPromise().then(e=>e),i=void 0)}if(null!=i){var i=JSON.parse(atob(i.data));this.subjectCoverLink[t.subjectData.code]=`data:${i.mime};base64,${i.cover}`}else this.subjectCoverLink[t.subjectData.code]=t.subjectData.coverS3Key?"https://imagens.aws.uniasselvi.com.br/"+t.subjectData.coverS3Key:`https://imagens.aws.uniasselvi.com.br/capas/disciplina/${t.subjectData.bookCodeIdentification}.gif`;this.subjects.push(t)})))},error:e=>{this.loadingTests=!1},complete:()=>{this.loadingTests=!1}})}goToAnswerBook(e,t){var n=btoa(JSON.stringify({test:e,subject:t,routeReturn:"subject/grades-and-tests/pending"}));this.router.navigate(["/subject/grades-and-tests/answer-book",n])}openPaperDialog(e,t=!1,n=!0){t?this.dialog.open(B,{width:"710px",minHeight:"300px",data:{canSend:n,isUpdate:t,test:e}}).afterClosed().subscribe(e=>{null!=e&&1==e&&this.getTests()}):this.dialog.open(Y,{width:"710px",minHeight:"300px",data:{canSend:n,isUpdate:t,test:e}}).afterClosed().subscribe(e=>{null!=e&&1==e&&this.getTests()})}goToAnswerTest(e,t){this.pendencyService.contractSkipped()}goToWhats(){window.open("https://api.whatsapp.com/send?phone=554733016100","_blank")}redirectSPO(e){this.spoTestClick=!0;var t={seme_codi:e.semester,alun_codi:this.securityService.securityObject.specialization,disc_codi:e.subject,turs_codi:e.classCode,paep_sequ:e.parameter,aval_codi:e.code,prop_codi:null,tipo_resposta:"spo",nova_prova:!1};"Y"!=e.type_code?t.prop_codi=e.test_code:t.nova_prova=!0;var n=btoa(JSON.stringify(t)),a=`${s.a.urlOldAVA}/ava/avaliacao/gera_prova_n2.php?param=${n}`,i=null;this.securityService.getIp().subscribe({next:e=>{e.ip&&null!=e.ip&&(i=e.ip)},error:e=>{i="0.0.0.0"},complete:()=>{this.openPageSPO(i,e,a)}})}openPageSPO(e,t,n){this.testService.getLinkRedirectTestSPO(t,n,!0).subscribe({next:t=>{if(200==t.code&&"undefined"!=t.data.id_fila){var n="?idFila="+t.data.id_fila;n+="&token="+this.session.getCookie("uniToken"),n+="&remote="+btoa(String(e)),this.spoWindow.location.href=`${s.a.urlAlunSPO}/${n}`}else 403==t.code&&(this.toasterService.pop("error","Erro",t.data.message),this.spoWindow.location.href=`${this.spoTestErrorPage}?msg=${t.data.message}`);this.spoTestClick=!1},error:e=>{this.spoTestClick=!1,this.toasterService.pop("error","Erro","Problemas para abrir a prova supervisionada."),this.spoWindow.location.href=this.spoTestErrorPage+"?msg=Problemas para abrir a prova supervisionada"},complete:()=>{this.spoTestClick=!1}})}return(){this.router.navigate(["/home"])}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](a.e),f["\u0275\u0275directiveInject"](Da.a),f["\u0275\u0275directiveInject"](ft.b),f["\u0275\u0275directiveInject"](p.b),f["\u0275\u0275directiveInject"](K.a),f["\u0275\u0275directiveInject"](v.a),f["\u0275\u0275directiveInject"](se.a),f["\u0275\u0275directiveInject"](le.c),f["\u0275\u0275directiveInject"](h.a),f["\u0275\u0275directiveInject"](ka.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-pending-tests"]],decls:9,vars:3,consts:[[1,"return-link"],["mat-button","",1,"font-light",3,"click"],[1,"page-title","font-ultra","mb-2"],["tooltipContent","Carregando as informa\xe7\xf5es...",4,"ngIf"],["class","no-results",4,"ngIf"],[4,"ngIf"],["tooltipContent","Carregando as informa\xe7\xf5es..."],[1,"no-results"],["class","subject-pending",4,"ngFor","ngForOf"],[1,"subject-pending"],[1,"cover-subject-pending"],["alt","",3,"defaultImage","lazyLoad"],[1,"tests-list"],[1,"subject-title","mt-2"],[1,"subject-pending-tests"],["class","info-grid",4,"ngFor","ngForOf"],[1,"info-grid"],[1,"info-item","text-left",2,"width","-webkit-fill-available"],["class","font-light ava-text-light",4,"ngIf"],[1,"info-item"],[1,"title"],[1,"info-item","text-right"],["mat-raised-button","","color","ava-primary",3,"click",4,"ngIf"],[1,"font-light","ava-text-light"],["mat-raised-button","","color","ava-primary",3,"click"],["mat-raised-button","","color","ava-success",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","ava-success",3,"click",4,"ngIf"],["mat-raised-button","","color","ava-success",3,"disabled","click"],["mat-raised-button","","color","ava-success",3,"click"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275elementStart"](1,"a",1),f["\u0275\u0275listener"]("click",(function(){return t.return()})),f["\u0275\u0275element"](2,"img"),f["\u0275\u0275text"](3," VOLTAR "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",2),f["\u0275\u0275text"](5," AVALIA\xc7\xd5ES PENDENTES\n"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](6,qa,1,0,"ava-spinner",3),f["\u0275\u0275template"](7,Na,2,0,"div",4),f["\u0275\u0275template"](8,Ya,2,1,"ng-container",5)),2&e&&(f["\u0275\u0275advance"](6),f["\u0275\u0275property"]("ngIf",t.loadingTests),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingTests&&0==t.subjects.length),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingTests&&t.subjects.length>0))},directives:[y.a,b.t,E.a,b.s,Ta.c,y.b],pipes:[b.g,b.f],styles:[".subject-pending[_ngcontent-%COMP%]{padding:15px;border-radius:5px;margin-top:13px;display:flex}.subject-pending[_ngcontent-%COMP%]   .cover-subject-pending[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:140px;text-align:center;margin-left:10px;margin-right:20px}.subject-pending[_ngcontent-%COMP%]   .cover-subject-pending[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:203px;width:138px;border-radius:5px}.subject-pending[_ngcontent-%COMP%]   .tests-list[_ngcontent-%COMP%]{width:calc(100% - 160px)}.subject-pending[_ngcontent-%COMP%]   .tests-list[_ngcontent-%COMP%]   .subject-title[_ngcontent-%COMP%]{width:100%;text-align:center;font-family:Neo Sans Std Light}"]}),e})();var Wa=n("WYca"),Ka=n("Wp6s");function Xa(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner",2)}function Za(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"h2",3),f["\u0275\u0275text"](2,"CONFIRMAR AGENDAMENTO DE PROVA"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"mat-dialog-content",4),f["\u0275\u0275elementStart"](4,"p",4),f["\u0275\u0275elementStart"](5,"strong",5),f["\u0275\u0275text"](6,"Ambiente: "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"span"),f["\u0275\u0275text"](8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"p",4),f["\u0275\u0275elementStart"](10,"strong",5),f["\u0275\u0275text"](11,"Dia: "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](12,"span"),f["\u0275\u0275text"](13),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](14,"p",4),f["\u0275\u0275elementStart"](15,"strong",5),f["\u0275\u0275text"](16,"Hor\xe1rio: "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](17,"span"),f["\u0275\u0275text"](18),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](19,"div",6),f["\u0275\u0275elementStart"](20,"button",7),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"]().saveSchedule()})),f["\u0275\u0275text"](21," Agendar prova "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](8),f["\u0275\u0275textInterpolate"](e.dayInfo.roomName),f["\u0275\u0275advance"](5),f["\u0275\u0275textInterpolate"](e.dayInfo.date.format("DD/MM/YYYY")),f["\u0275\u0275advance"](5),f["\u0275\u0275textInterpolate"](e.dayInfo.hour)}}let ei=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.scheduleService=t,this.data=n,this.loadingQuestions=!1,this.loadingSave=!1,this.dayInfo=null,this.subject=null,this.semester=null,this.testCode=null,this.isNewOpportunity=null,this.dayInfo=n.dayInfo,this.subject=n.subject,this.semester=n.semester,this.testCode=n.testCode,this.isNewOpportunity=n.isNewOpportunity}ngOnInit(){}saveSchedule(){this.loadingSave=!0,this.scheduleService.storeSchedule(this.dayInfo.schedule,this.semester,this.subject,this.testCode,this.isNewOpportunity).subscribe({next:e=>{this.loadingSave=!1,this.dialogRef.close({message:e.data.message,sequ:e.data.sequ,status:e.status})},error:e=>{this.loadingSave=!1,this.dialogRef.close(e)}})}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](p.i),f["\u0275\u0275directiveInject"](X),f["\u0275\u0275directiveInject"](p.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["resume-save"]],decls:2,vars:2,consts:[["tooltipContent","Carregando as informa\xe7\xf5es...",4,"ngIf"],[4,"ngIf"],["tooltipContent","Carregando as informa\xe7\xf5es..."],["mat-dialog-title",""],[1,"font-light"],[1,"schedule-info"],["mat-dialog-actions",""],["mat-raised-button","","color","ava-success",3,"click"]],template:function(e,t){1&e&&(f["\u0275\u0275template"](0,Xa,1,0,"ava-spinner",0),f["\u0275\u0275template"](1,Za,22,3,"ng-container",1)),2&e&&(f["\u0275\u0275property"]("ngIf",t.loadingSave),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingSave))},directives:[b.t,E.a,p.j,p.g,p.c,y.b],styles:["strong.schedule-info[_ngcontent-%COMP%]{font-weight:700;font-family:Neo Sans Std Regular}"]}),e})();var ti=n("iadO");const ni=["calendar"];function ai(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner",3)}function ii(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",4),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",e.errorMessage,"\n")}}function ri(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",13),f["\u0275\u0275text"](1," Selecione uma data para exibir os hor\xe1rios. "),f["\u0275\u0275elementEnd"]())}const oi=function(e){return{cursor:e}};function si(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"div",14),f["\u0275\u0275elementStart"](1,"button",15),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const n=t.$implicit;return f["\u0275\u0275nextContext"](2).handleScheduleButton(n)})),f["\u0275\u0275elementStart"](2,"span",16),f["\u0275\u0275text"](3),f["\u0275\u0275elementStart"](4,"span",17),f["\u0275\u0275text"](5),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"span",17),f["\u0275\u0275text"](7),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"small",18),f["\u0275\u0275text"](9),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("disabled",!e.canSchedule)("ngStyle",f["\u0275\u0275pureFunction1"](7,oi,e.canSchedule?"normal":"not-allowed")),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"](" ",e.hour," - "),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"](" ",e.roomName," - "),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"](" ",e.roomType," "),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate2"]("( ",e.qtdeScheduled," | ",e.qtdeAvailable," )")}}function li(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"div",5),f["\u0275\u0275elementStart"](2,"mat-calendar",6,7),f["\u0275\u0275listener"]("selectedChange",(function(t){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"]().selectedDate=t})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",8),f["\u0275\u0275elementStart"](5,"mat-card"),f["\u0275\u0275elementStart"](6,"mat-card-title"),f["\u0275\u0275text"](7," Hor\xe1rios dispon\xedveis "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"span",9),f["\u0275\u0275text"](9,"Tempo para realiza\xe7\xe3o da prova: 60 minutos."),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](10,"mat-card-content"),f["\u0275\u0275template"](11,ri,2,0,"div",10),f["\u0275\u0275elementStart"](12,"div",11),f["\u0275\u0275template"](13,si,10,9,"div",12),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("selected",e.selectedDate)("dateFilter",e.filterDates)("startAt",e.startingDate),f["\u0275\u0275advance"](9),f["\u0275\u0275property"]("ngIf",null==e.selectedDate),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",e.selectedDateHours())}}let ci=(()=>{class e{constructor(e,t,n,a,i,r){this.route=e,this.router=t,this.scheduleService=n,this.dialog=a,this.location=i,this.commonService=r,this.subject=null,this.semester=null,this.testCode=null,this.errorMessage="",this.saveScheduleHour=!1,this.loadingCalendarEvents=!1,this.daysAvailable=[],this.enabledDates=[],this.isNewOpportunity=!1,this.selectedDate=null,this.startingDate=null,this.filterDates=e=>void 0===this.enabledDates||this.enabledDates.includes(e.format("YYYY-MM-DD")),this.route.params.subscribe(e=>{var t,n,a;let i=JSON.parse(this.commonService.base64Decode(e.param));this.subject=null!==(t=i.subject.code)&&void 0!==t?t:i.subject.code,this.semester=null!==(n=i.subject.semester)&&void 0!==n?n:i.subject.semester,this.testCode=null!==(a=i.test.testCode)&&void 0!==a?a:i.test.testCode})}ngOnInit(){this.getSchedule()}getSchedule(){this.loadingCalendarEvents=!0,this.errorMessage="",this.scheduleService.getScheduleSearch(this.semester,this.subject).subscribe({next:e=>{if(e.data.message)return this.errorMessage=e.data.message,this.loadingCalendarEvents=!1,this.daysAvailable=[],this.enabledDates=[],this.selectedDate=null,!1;const t=e.data.data;this.isNewOpportunity=e.data.novaOportunidade,this.errorMessage="",this.daysAvailable=[],this.enabledDates=[],this.selectedDate=null;let n=null;null==t||t.forEach((e,t)=>{const a=e.dia.split("/"),i=o(`${a[2]}-${a[1]}-${a[0]}`,"YYYY-MM-DD");0===t&&(this.startingDate=i),this.enabledDates.push(i.format("YYYY-MM-DD")),(null==n||i.format("x")<n.format("x"))&&(n=i);for(let n of e.horarios)this.daysAvailable.push({date:i,schedule:n.agenda,roomName:n.sala,hour:n.hora,qtdeAvailable:n.qtdDisponivel,qtdeScheduled:n.qtdAgendado,canSchedule:n.podeAgendar,roomType:n.formaRealizacao})}),this.loadingCalendarEvents=!1},error:e=>{this.loadingCalendarEvents=!1,alert(e)}})}handleScheduleButton(e){this.saveScheduleHour=!0,this.dialog.open(ei,{width:"550px",height:"275px",data:{dayInfo:e,subject:this.subject,semester:this.semester,testCode:this.testCode,isNewOpportunity:this.isNewOpportunity}}).afterClosed().subscribe(e=>{200!=e.status?c.a.fire({toast:!1,text:e.message,icon:"warning",confirmButtonText:"Fechar"}):(c.a.fire({toast:!1,text:`${e.message} C\xf3digo: ${e.sequ}`,icon:"success",confirmButtonText:"Fechar"}),this.location.back())})}selectedDateHours(){return null==this.selectedDate?[]:this.daysAvailable.filter(e=>e.date.format("DD/MM/YYYY")==this.selectedDate.format("DD/MM/YYYY"))}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](a.a),f["\u0275\u0275directiveInject"](a.e),f["\u0275\u0275directiveInject"](X),f["\u0275\u0275directiveInject"](p.b),f["\u0275\u0275directiveInject"](b.n),f["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["calendar-test-schedule"]],viewQuery:function(e,t){var n;1&e&&f["\u0275\u0275viewQuery"](ni,!0),2&e&&f["\u0275\u0275queryRefresh"](n=f["\u0275\u0275loadQuery"]())&&(t.calendar=n.first)},decls:3,vars:3,consts:[["tooltipContent","Carregando as informa\xe7\xf5es...",4,"ngIf"],["class","no-results",4,"ngIf"],[4,"ngIf"],["tooltipContent","Carregando as informa\xe7\xf5es..."],[1,"no-results"],[1,"ava-calendar-component"],["color","primary",1,"ava-calendar",3,"selected","dateFilter","startAt","selectedChange"],["calendar",""],[1,"card-event-list"],[1,"text-danger"],["class","no-results-custom",4,"ngIf"],[1,"ava-calendar-list","mt-3"],["class","calendar-event-item",4,"ngFor","ngForOf"],[1,"no-results-custom"],[1,"calendar-event-item"],["mat-button","",1,"save-schedule-hour","mat-elevation-z8",3,"disabled","ngStyle","click"],[1,"hour-title"],[1,"room-title"],[2,"color","#666","font-size","75%"]],template:function(e,t){1&e&&(f["\u0275\u0275template"](0,ai,1,0,"ava-spinner",0),f["\u0275\u0275template"](1,ii,2,1,"div",1),f["\u0275\u0275template"](2,li,14,5,"ng-container",2)),2&e&&(f["\u0275\u0275property"]("ngIf",t.loadingCalendarEvents),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",t.errorMessage),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingCalendarEvents&&!t.errorMessage))},directives:[b.t,E.a,ti.a,Ka.a,Ka.m,Ka.d,b.s,y.b,b.w],styles:['.ava-calendar-list[_ngcontent-%COMP%]{width:100%}.ava-calendar-list[_ngcontent-%COMP%]   .calendar-event-item[_ngcontent-%COMP%]{display:flex;min-height:30px;align-items:center;padding:5px 10px;border-radius:5px;margin-top:10px;margin-bottom:10px}.ava-calendar-list[_ngcontent-%COMP%]   .calendar-event-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}.ava-calendar-list[_ngcontent-%COMP%]   .calendar-event-item[_ngcontent-%COMP%]   .hour-title[_ngcontent-%COMP%]{font-family:Neo Sans Std Regular;font-weight:400;font-size:19px;width:69px;white-space:break-spaces}.ava-calendar-list[_ngcontent-%COMP%]   .calendar-event-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .event-description[_ngcontent-%COMP%], .ava-calendar-list[_ngcontent-%COMP%]   .calendar-event-item[_ngcontent-%COMP%]   .hour-title[_ngcontent-%COMP%]   .room-title[_ngcontent-%COMP%]{font-family:Neo Sans Std Regular;font-weight:400;font-size:17px}.ava-calendar-list[_ngcontent-%COMP%]   .calendar-event-item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .sub-description[_ngcontent-%COMP%]{font-family:Neo Sans Std Light;font-weight:400;font-size:15px}.ava-calendar-list[_ngcontent-%COMP%]   .calendar-list-item[_ngcontent-%COMP%]{padding:10px;border-radius:5px;margin-top:10px;margin-bottom:10px}.ava-calendar-list[_ngcontent-%COMP%]   .date-title[_ngcontent-%COMP%]{font-family:Neo Sans Std Regular;font-weight:400;font-size:1.3rem}.ava-calendar[_ngcontent-%COMP%]{width:32vw;border-radius:5px}.ava-calendar[_ngcontent-%COMP%], .card-event-list[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}.card-event-list[_ngcontent-%COMP%]{width:calc(100% - 10px - 32vw);margin-left:10px}.no-results-custom[_ngcontent-%COMP%]{text-align:center;padding:17px;border-radius:5px}.ava-calendar-component[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}@media (max-width:1200px){.ava-calendar[_ngcontent-%COMP%]{width:37vw!important}.card-event-list[_ngcontent-%COMP%]{width:calc(100% - 10px - 37vw)!important}}@media (max-width:768px){.ava-calendar[_ngcontent-%COMP%], .card-event-list[_ngcontent-%COMP%]{width:100%!important}.card-event-list[_ngcontent-%COMP%]{margin-left:0!important}} .mat-calendar-body-cell-content{font-size:19px} .mat-calendar-body-cell:not(.mat-calendar-body-disabled):before{content:"\\a";width:10px;height:10px;border-radius:50%;background:#b83b3b;display:inline-block;position:absolute;margin-top:65%;margin-left:43%} .mat-calendar-table-header th{font-size:15px}.save-schedule-hour[_ngcontent-%COMP%]{width:100%!important;height:100%!important;align-items:center!important}.save-schedule-hour[_ngcontent-%COMP%], .save-schedule-hour[_ngcontent-%COMP%]   span.mat-button-wrapper[_ngcontent-%COMP%]{display:flex!important}']}),e})(),di=(()=>{class e{constructor(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["schedule-store"]],decls:3,vars:0,consts:[["id","schedule-store"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275elementContainerStart"](1),f["\u0275\u0275element"](2,"calendar-test-schedule"),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementEnd"]())},directives:[ci],styles:["#schedule-store[_ngcontent-%COMP%]{margin:1rem 0}"]}),e})();function mi(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner",2)}function pi(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"div",3),f["\u0275\u0275elementStart"](2,"a",4),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"]().return()})),f["\u0275\u0275element"](3,"img"),f["\u0275\u0275text"](4," VOLTAR "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"div",5),f["\u0275\u0275text"](6," AGENDAMENTO DE PROVA "),f["\u0275\u0275elementStart"](7,"span",6),f["\u0275\u0275text"](8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"div"),f["\u0275\u0275elementStart"](10,"span",6),f["\u0275\u0275text"](11),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerStart"](12),f["\u0275\u0275elementStart"](13,"mat-card",7),f["\u0275\u0275elementStart"](14,"div",8),f["\u0275\u0275element"](15,"schedule-store"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](8),f["\u0275\u0275textInterpolate2"](" | ",e.discipline.description," (",e.discipline.code,")"),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](e.test.description)}}let ui=(()=>{class e{constructor(e,t,n,a){this.route=e,this.router=t,this.scheduleService=n,this.commonService=a,this.loadingSubjectInfo=!0,this.route.params.subscribe(e=>{let t=JSON.parse(this.commonService.base64Decode(e.param));this.subject=t.subject?t.subject:null,this.test=t.test?t.test:null})}ngOnInit(){this.getSubjectInfo()}getSubjectInfo(){this.scheduleService.getDisciplineInfo(this.test.subjectCode).subscribe({next:e=>{this.discipline=e,this.loadingSubjectInfo=!1},error:e=>{this.loadingSubjectInfo=!1}})}return(){let e=this.commonService.base64Encode(JSON.stringify({subject:this.subject}));this.router.navigate(["/subject/grades-and-tests/list",e])}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](a.a),f["\u0275\u0275directiveInject"](a.e),f["\u0275\u0275directiveInject"](X),f["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-test-schedule"]],decls:2,vars:2,consts:[["tooltipContent","Carregando as informa\xe7\xf5es...",4,"ngIf"],[4,"ngIf"],["tooltipContent","Carregando as informa\xe7\xf5es..."],[1,"return-link"],["mat-button","",1,"font-light",3,"click"],[1,"page-title","font-ultra","mb-2"],[1,"font-light"],[1,"mt-3"],[1,"schedule-store-container"]],template:function(e,t){1&e&&(f["\u0275\u0275template"](0,mi,1,0,"ava-spinner",0),f["\u0275\u0275template"](1,pi,16,3,"ng-container",1)),2&e&&(f["\u0275\u0275property"]("ngIf",t.loadingSubjectInfo),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingSubjectInfo))},directives:[b.t,E.a,y.a,Ka.a,di],styles:[".chart-course[_ngcontent-%COMP%]{width:50%}.evolution-card[_ngcontent-%COMP%]{padding:0 25px}@media (max-width:767px){.chart-course[_ngcontent-%COMP%]{width:100%}.evolution-card[_ngcontent-%COMP%]{padding:0}} .button-trail-material,  .button-trail-material:hover{color:hsla(0,0%,100%,.5490196078431373)}.link-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#aac222;font-size:20px;width:25px;margin-right:5px;text-align:center}"]}),e})();function gi(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner")}function fi(e,t){if(1&e&&f["\u0275\u0275text"](0),2&e){const e=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275textInterpolate"](e.description)}}function vi(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span"),f["\u0275\u0275elementStart"](1,"mat-radio-button",28),f["\u0275\u0275text"](2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("value",e),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate"](e)}}const hi=function(){return[1,2,3,4,5]};function xi(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",21),f["\u0275\u0275elementContainerStart"](1,22),f["\u0275\u0275elementStart"](2,"span",23),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](4,"br"),f["\u0275\u0275element"](5,"br"),f["\u0275\u0275elementStart"](6,"mat-radio-group",24),f["\u0275\u0275template"](7,vi,3,2,"span",25),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"mat-form-field",26),f["\u0275\u0275elementStart"](9,"mat-label"),f["\u0275\u0275text"](10,"Coment\xe1rio"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](11,"textarea",27),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.index;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("formGroupName",n),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"](" ",e.description,""),f["\u0275\u0275advance"](3),f["\u0275\u0275propertyInterpolate1"]("name","question_",e.code,""),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",f["\u0275\u0275pureFunction0"](4,hi))}}function bi(e,t){1&e&&f["\u0275\u0275element"](0,"i",31)}function Si(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",29),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275nextContext"]();const n=f["\u0275\u0275reference"](1);return f["\u0275\u0275nextContext"](2).onSaveTopicAnswers(t.code,n)})),f["\u0275\u0275text"](1,"Continuar "),f["\u0275\u0275template"](2,bi,1,0,"i",30),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]().$implicit,t=f["\u0275\u0275nextContext"](3);f["\u0275\u0275property"]("disabled",t.loadingSave[e.code]),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",t.loadingSave[e.code])}}function Ci(e,t){1&e&&f["\u0275\u0275element"](0,"i",31)}function yi(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",32),f["\u0275\u0275listener"]("click",(function(){f["\u0275\u0275restoreView"](e);const t=f["\u0275\u0275nextContext"]().$implicit;f["\u0275\u0275nextContext"]();const n=f["\u0275\u0275reference"](1);return f["\u0275\u0275nextContext"](2).onSaveTopicAnswers(t.code,n,!0)})),f["\u0275\u0275text"](1,"Finalizar "),f["\u0275\u0275template"](2,Ci,1,0,"i",30),f["\u0275\u0275elementEnd"]()}if(2&e){const e=f["\u0275\u0275nextContext"]().$implicit,t=f["\u0275\u0275nextContext"](3);f["\u0275\u0275property"]("disabled",t.loadingSave[e.code]),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",t.loadingSave[e.code])}}function Ei(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-step",12),f["\u0275\u0275elementStart"](1,"form",13),f["\u0275\u0275template"](2,fi,1,1,"ng-template",14),f["\u0275\u0275elementContainerStart"](3,15),f["\u0275\u0275template"](4,xi,12,5,"div",16),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementStart"](5,"div",17),f["\u0275\u0275template"](6,Si,3,2,"button",18),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"div",19),f["\u0275\u0275template"](8,yi,3,2,"button",20),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.last,a=f["\u0275\u0275nextContext"](3);f["\u0275\u0275property"]("stepControl",a.institutionalTest[e.code])("completed",!e.can_answer)("editable",e.can_answer),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("formGroup",a.institutionalTest[e.code]),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngForOf",e.questions),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",!n),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",n)}}function wi(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-vertical-stepper",9,10),f["\u0275\u0275template"](2,Ei,9,7,"mat-step",11),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2);f["\u0275\u0275property"]("selectedIndex",e.selectedIndex)("linear",!1),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",e.testData.topics)}}function Ii(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",33),f["\u0275\u0275elementStart"](1,"div",34),f["\u0275\u0275elementStart"](2,"div",35),f["\u0275\u0275text"](3,"Voc\xea finalizou sua avalia\xe7\xe3o institucional!"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]())}function _i(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mat-card",5),f["\u0275\u0275elementStart"](2,"h4"),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](4,"br"),f["\u0275\u0275element"](5,"div",6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](6,wi,3,3,"mat-vertical-stepper",7),f["\u0275\u0275template"](7,Ii,4,0,"div",8),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](e.testData.description),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("innerHtml",e.testData.observation,f["\u0275\u0275sanitizeHtml"]),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",e.testData.canAnswer),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!e.testData.canAnswer)}}let Oi=(()=>{class e{constructor(e,t,n,a,i,r){this.route=e,this.testService=t,this.toasterService=n,this.fb=a,this.router=i,this.commonService=r,this.subject=null,this.test=null,this.testData=null,this.routeReturn=null,this.loadingTest=!1,this.loadingSave=[],this.selectedIndex=null,this.institutionalTest=[]}get questionsControl(){return e=>this.institutionalTest[e]}ngOnInit(){this.route.params.subscribe(e=>{var t=JSON.parse(this.commonService.base64Decode(e.param));this.subject=t.subject?t.subject:null,this.test=t.test?t.test:null,this.routeReturn=t.routeReturn?t.routeReturn:null,this.getTestData()})}getTestData(){if(null==this.subject)return c.a.fire({text:"Ocorreu um erro ao buscar a avalia\xe7\xe3o",icon:"error"}),!1;this.loadingTest=!0,this.testService.getInstitutionalTestDataApi(this.test.testCode,this.subject.semester,this.subject.code,this.subject.class).subscribe({next:e=>null==e||!e.topics||(e.topics.forEach((e,t)=>{if(this.institutionalTest[e.code]=this.fb.group({testCode:[this.test.testCode,m.Validators.required],topicCode:[e.code,m.Validators.required],subjectCode:[this.subject.code,m.Validators.required],classCode:[this.subject.class,m.Validators.required],questions:this.fb.array([])}),!e.questions)return!0;e.questions.forEach((t,n)=>{var a=this.fb.group({code:[t.code,m.Validators.required],answer:[null,m.Validators.required],comment:[null,null]});this.institutionalTest[e.code].controls.questions.push(a)}),e.can_answer&&null==this.selectedIndex&&(this.selectedIndex=t)}),void(this.testData=e)),error:e=>{this.loadingTest=!1},complete:()=>{this.loadingTest=!1}})}onSaveTopicAnswers(e,t,n=!1){var a=this.institutionalTest[e];a.valid?(this.loadingSave[e]=!0,this.testService.answerInstitutionalTopicAPI(a.value).subscribe({next:a=>{this.toasterService.pop("success","Sucesso","Assunto respondido com sucesso");var i=null;this.testData.topics.forEach((t,n)=>{t.code==e&&(i=n)}),this.testData.topics[i].can_answer=!1,n||t.next(),n&&(this.test.canAnswer=!1)},error:t=>{this.toasterService.pop("error","Erro","Erro ao responder o assunto"),this.loadingSave[e]=!1},complete:()=>{this.loadingSave[e]=!1}})):this.toasterService.pop("warning","Aten\xe7\xe3o","Algumas perguntas n\xe3o foram respondidas")}return(){if(null!=this.routeReturn)this.router.navigate([this.routeReturn]);else{var e=this.commonService.base64Encode(JSON.stringify({subject:this.subject}));this.router.navigate(["/subject/grades-and-tests/list",e])}}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](a.a),f["\u0275\u0275directiveInject"](v.a),f["\u0275\u0275directiveInject"](le.c),f["\u0275\u0275directiveInject"](m.FormBuilder),f["\u0275\u0275directiveInject"](a.e),f["\u0275\u0275directiveInject"](h.a))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-institutional-test"]],decls:10,vars:2,consts:[[1,"return-link"],["mat-button","",1,"font-light",3,"click"],[1,"test-page-title"],[1,"page-title","font-ultra","mb-2"],[4,"ngIf"],[1,"mt-3","mb-3"],[3,"innerHtml"],["labelPosition","bottom",3,"selectedIndex","linear",4,"ngIf"],["class","row",4,"ngIf"],["labelPosition","bottom",3,"selectedIndex","linear"],["stepper",""],[3,"stepControl","completed","editable",4,"ngFor","ngForOf"],[3,"stepControl","completed","editable"],[3,"formGroup"],["matStepLabel",""],["formArrayName","questions"],["class","mb-4",4,"ngFor","ngForOf"],[1,"buttons"],["type","button","mat-raised-button","",3,"disabled","click",4,"ngIf"],[1,"text-center","mb-1"],["type","button","color","success","mat-raised-button","",3,"disabled","click",4,"ngIf"],[1,"mb-4"],[3,"formGroupName"],[1,"question-title"],["formControlName","answer",1,"question","mb-1",3,"name"],[4,"ngFor","ngForOf"],["appearance","outline",1,"w-100"],["formControlName","comment","matInput","","placeholder","Informe o coment\xe1rio aqui..."],["color","primary","required","",1,"mb-1","mr-2",3,"value"],["type","button","mat-raised-button","",3,"disabled","click"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"],["type","button","color","success","mat-raised-button","",3,"disabled","click"],[1,"row"],[1,"col-12"],[1,"alert","alert-success","text-center"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275elementStart"](1,"a",1),f["\u0275\u0275listener"]("click",(function(){return t.return()})),f["\u0275\u0275element"](2,"img"),f["\u0275\u0275text"](3," VOLTAR "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",2),f["\u0275\u0275elementStart"](5,"div",3),f["\u0275\u0275text"](6," RESPONDER AVALIA\xc7\xc3O INSTITUCIONAL "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275element"](7,"div"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](8,gi,1,0,"ava-spinner",4),f["\u0275\u0275template"](9,_i,8,4,"ng-container",4)),2&e&&(f["\u0275\u0275advance"](8),f["\u0275\u0275property"]("ngIf",t.loadingTest),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.loadingTest))},directives:[y.a,b.t,E.a,Ka.a,vt.j,b.s,vt.b,m["\u0275angular_packages_forms_forms_y"],m.NgControlStatusGroup,m.FormGroupDirective,vt.d,m.FormArrayName,m.FormGroupName,En.b,m.NgControlStatus,m.FormControlName,S.c,S.g,m.DefaultValueAccessor,Z.b,En.a,y.b],styles:[""]}),e})();var ji=n("xf9n"),Pi=n("bSwM");function Mi(e,t){1&e&&f["\u0275\u0275element"](0,"ava-spinner")}function Fi(e,t){1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mat-form-field",25),f["\u0275\u0275element"](2,"input",26),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]())}function Ai(e,t){1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mat-form-field",25),f["\u0275\u0275element"](2,"textarea",27),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]())}function Di(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span",30),f["\u0275\u0275elementStart"](1,"mat-radio-button",31),f["\u0275\u0275element"](2,"span",32),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("value",e.alternative_code),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHtml",e.alternative_description,f["\u0275\u0275sanitizeHtml"])}}function ki(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mat-radio-group",28),f["\u0275\u0275template"](2,Di,3,2,"span",29),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",e.alternatives)}}function Ti(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span",30),f["\u0275\u0275elementStart"](1,"mat-checkbox",34),f["\u0275\u0275element"](2,"span",32),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275propertyInterpolate"]("formControlName",e.alternative_code),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHtml",e.alternative_description,f["\u0275\u0275sanitizeHtml"])}}function qi(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0,33),f["\u0275\u0275template"](1,Ti,3,2,"span",29),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.alternatives)}}function Ni(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-option",31),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275property"]("value",e.alternative_code),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",e.alternative_description," ")}}function Vi(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mat-form-field",25),f["\u0275\u0275elementStart"](2,"mat-select",35),f["\u0275\u0275template"](3,Ni,2,2,"mat-option",36),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngForOf",e.alternatives)}}function zi(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span",30),f["\u0275\u0275elementStart"](1,"mat-radio-button",31),f["\u0275\u0275element"](2,"span",32),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("value",e.alternative_code),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHtml",e.alternative_description,f["\u0275\u0275sanitizeHtml"])}}function $i(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mat-radio-group",28),f["\u0275\u0275template"](2,zi,3,2,"span",29),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"mat-form-field",25),f["\u0275\u0275element"](4,"textarea",37),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",e.alternatives)}}function Bi(e,t){1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mat-form-field",25),f["\u0275\u0275element"](2,"input",26),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]())}function Ri(e,t){1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mat-form-field",25),f["\u0275\u0275element"](2,"textarea",27),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]())}function Hi(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span",30),f["\u0275\u0275elementStart"](1,"mat-radio-button",31),f["\u0275\u0275element"](2,"span",32),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("value",e.alternative_code),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHtml",e.alternative_description,f["\u0275\u0275sanitizeHtml"])}}function Qi(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mat-radio-group",28),f["\u0275\u0275template"](2,Hi,3,2,"span",29),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",e.conditional_alternative.alternatives)}}function Gi(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span",30),f["\u0275\u0275elementStart"](1,"mat-checkbox",34),f["\u0275\u0275element"](2,"span",32),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275propertyInterpolate"]("formControlName",e.alternative_code),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHtml",e.alternative_description,f["\u0275\u0275sanitizeHtml"])}}function Li(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0,33),f["\u0275\u0275template"](1,Gi,3,2,"span",29),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.conditional_alternative.alternatives)}}function Ui(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-option",31),f["\u0275\u0275text"](1),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275property"]("value",e.alternative_code),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",e.alternative_description," ")}}function Yi(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mat-form-field",25),f["\u0275\u0275elementStart"](2,"mat-select",35),f["\u0275\u0275template"](3,Ui,2,2,"mat-option",36),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("ngForOf",e.conditional_alternative.alternatives)}}function Ji(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"span",30),f["\u0275\u0275elementStart"](1,"mat-radio-button",31),f["\u0275\u0275element"](2,"span",32),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("value",e.alternative_code),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("innerHtml",e.alternative_description,f["\u0275\u0275sanitizeHtml"])}}function Wi(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mat-radio-group",28),f["\u0275\u0275template"](2,Ji,3,2,"span",29),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"mat-form-field",25),f["\u0275\u0275element"](4,"textarea",37),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",e.conditional_alternative.alternatives)}}const Ki=function(){return["3","5"]},Xi=function(){return["4"]};function Zi(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",41),f["\u0275\u0275element"](1,"hr"),f["\u0275\u0275elementStart"](2,"p"),f["\u0275\u0275text"](3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](4,Bi,3,0,"ng-container",5),f["\u0275\u0275template"](5,Ri,3,0,"ng-container",5),f["\u0275\u0275template"](6,Qi,3,1,"ng-container",5),f["\u0275\u0275template"](7,Li,2,1,"ng-container",23),f["\u0275\u0275template"](8,Yi,4,1,"ng-container",5),f["\u0275\u0275template"](9,Wi,5,1,"ng-container",5),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]().$implicit,t=f["\u0275\u0275nextContext"](3),n=t.$implicit,a=t.index,i=f["\u0275\u0275nextContext"](2);f["\u0275\u0275classProp"]("hide",f["\u0275\u0275pureFunction0"](10,Ki).includes(n.answer_type)&&e.alternative_code!=i.formQuestionnaire.value.questions[a].alternative||f["\u0275\u0275pureFunction0"](11,Xi).includes(n.answer_type)&&!i.getSelectedAlternatives(a).includes(e.alternative_code)),f["\u0275\u0275property"]("formGroupName",e.alternative_code),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](e.conditional_alternative.question_description),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","1"==e.conditional_alternative.answer_type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","2"==e.conditional_alternative.answer_type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","3"==e.conditional_alternative.answer_type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","4"==e.conditional_alternative.answer_type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","5"==e.conditional_alternative.answer_type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","6"==e.conditional_alternative.answer_type)}}function er(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275template"](1,Zi,10,12,"div",40),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!!e.conditional_alternative)}}function tr(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0,38),f["\u0275\u0275template"](1,er,2,1,"ng-container",39),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](2).$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",e.alternatives)}}const nr=function(){return["3","4","5"]};function ar(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",22),f["\u0275\u0275elementContainerStart"](1),f["\u0275\u0275template"](2,Fi,3,0,"ng-container",5),f["\u0275\u0275template"](3,Ai,3,0,"ng-container",5),f["\u0275\u0275template"](4,ki,3,1,"ng-container",5),f["\u0275\u0275template"](5,qi,2,1,"ng-container",23),f["\u0275\u0275template"](6,Vi,4,1,"ng-container",5),f["\u0275\u0275template"](7,$i,5,1,"ng-container",5),f["\u0275\u0275template"](8,tr,2,1,"ng-container",24),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=f["\u0275\u0275nextContext"](),t=e.$implicit;f["\u0275\u0275property"]("formGroupName",e.index),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf","1"==t.answer_type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","2"==t.answer_type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","3"==t.answer_type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","4"==t.answer_type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","5"==t.answer_type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","6"==t.answer_type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",f["\u0275\u0275pureFunction0"](8,nr).includes(t.answer_type))}}function ir(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"button",42),f["\u0275\u0275text"](1,"Anterior"),f["\u0275\u0275elementEnd"]())}function rr(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"button",43),f["\u0275\u0275text"](1,"Pr\xf3xima"),f["\u0275\u0275elementEnd"]())}function or(e,t){if(1&e){const e=f["\u0275\u0275getCurrentView"]();f["\u0275\u0275elementStart"](0,"button",44),f["\u0275\u0275listener"]("click",(function(){return f["\u0275\u0275restoreView"](e),f["\u0275\u0275nextContext"](3).finalize()})),f["\u0275\u0275text"](1,"Finalizar"),f["\u0275\u0275elementEnd"]()}}function sr(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-step",12),f["\u0275\u0275elementStart"](1,"div",13),f["\u0275\u0275elementStart"](2,"div",14),f["\u0275\u0275elementStart"](3,"span"),f["\u0275\u0275text"](4),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"form",15),f["\u0275\u0275elementContainerStart"](6,16),f["\u0275\u0275template"](7,ar,9,9,"div",17),f["\u0275\u0275elementContainerEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"div",18),f["\u0275\u0275template"](9,ir,2,0,"button",19),f["\u0275\u0275template"](10,rr,2,0,"button",20),f["\u0275\u0275template"](11,or,2,0,"button",21),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit,n=t.first,a=t.last,i=f["\u0275\u0275nextContext"](2);f["\u0275\u0275property"]("completed",!1),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate"](e.question_description),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("formGroup",i.formQuestionnaire),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",!!i.questionnaire&&e),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf",!n),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!a),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",a)}}function lr(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"div",6),f["\u0275\u0275elementStart"](2,"div",7),f["\u0275\u0275elementStart"](3,"span",8),f["\u0275\u0275text"](4,"Avalia\xe7\xe3o"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](5," Construindo Minha Hist\xf3ria "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"div",7),f["\u0275\u0275elementStart"](7,"span",8),f["\u0275\u0275text"](8,"Disciplina"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](9),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](10,"div",7),f["\u0275\u0275elementStart"](11,"span",8),f["\u0275\u0275text"](12,"Per\xedodo para responder"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275text"](13),f["\u0275\u0275pipe"](14,"date"),f["\u0275\u0275pipe"](15,"date"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](16,"mat-horizontal-stepper",9,10),f["\u0275\u0275template"](18,sr,12,7,"mat-step",11),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){const e=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](9),f["\u0275\u0275textInterpolate2"](" ",null==e.subject?null:e.subject.description," (",null==e.subject?null:e.subject.code,") "),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate2"](" ",f["\u0275\u0275pipeBind2"](14,6,null==e.test?null:e.test.start_date,"dd/MM/yyyy")||"-"," at\xe9 ",f["\u0275\u0275pipeBind2"](15,9,null==e.test?null:e.test.end_date,"dd/MM/yyyy")||"-"," "),f["\u0275\u0275advance"](3),f["\u0275\u0275property"]("linear",!1),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngForOf",e.questionnaire)}}const cr=[{path:"list/:param",component:ut,canActivate:[r.a]},{path:"test-schedule/:param",component:ui,canActivate:[r.a]},{path:"answer-book/:param",component:yn,canActivate:[r.a]},{path:"answer/:param",component:Aa,canActivate:[r.a]},{path:"answer-cmh/:param",component:(()=>{class e{constructor(e,t,n,a,i){this.route=e,this.router=t,this.commonService=n,this.questionnaireService=a,this.formBuilder=i,this.subject=null,this.test=null,this.isLoading=!0,this.questionnaire=[],this.currentStep=0,this.selectedAlternatives=[],this.selected=0,this.route.params.subscribe(e=>{var t=JSON.parse(this.commonService.base64Decode(e.param));this.subject=t.subject?t.subject:null,this.test=t.test?t.test:null}),this.formQuestionnaire=this.formBuilder.group({questions:new m.FormArray([])})}ngOnInit(){this.questionnaireService.getQuestions(this.test.code,!1).subscribe(e=>{let t;this.questionnaire=e,e.map(e=>{t=this.buildQuestionForm(e),this.formQuestionnaire.controls.questions.push(t)}),this.isLoading=!1})}buildQuestionForm(e){let t={};switch(e.answer_type){case"1":case"2":return this.formBuilder.group({code:[e.question_code],type:[e.answer_type],description:["","S"==e.question_required?m.Validators.required:null]});case"3":return t={},e.alternatives.map(e=>{e.conditional_alternative&&(t=Object.assign(Object.assign({},t),{[e.alternative_code]:this.buildQuestionForm(e.conditional_alternative)}))}),this.formBuilder.group({code:[e.question_code],type:[e.answer_type],alternative:["","S"==e.question_required?m.Validators.required:null],conditional:new m.FormGroup(t)});case"4":let n={};return t={},e.alternatives.map((e,a)=>{n=Object.assign(Object.assign({},n),{[""+e.alternative_code]:new m.FormControl(!1)}),e.conditional_alternative&&(t=Object.assign(Object.assign({},t),{[e.alternative_code]:this.buildQuestionForm(e.conditional_alternative)}))}),this.formBuilder.group({code:[e.question_code],type:[e.answer_type],alternatives:new m.FormGroup(n),conditional:new m.FormGroup(t)});case"5":return t={},e.alternatives.map(e=>{e.conditional_alternative&&(t=Object.assign(Object.assign({},t),{[e.alternative_code]:this.buildQuestionForm(e.conditional_alternative)}))}),this.formBuilder.group({code:[e.question_code],type:[e.answer_type],alternative:["","S"==e.question_required?m.Validators.required:null],conditional:new m.FormGroup(t)});case"6":return this.formBuilder.group({code:[e.question_code],type:[e.answer_type],comment:["","S"==e.question_required?m.Validators.required:null],alternative:["","S"==e.question_required?m.Validators.required:null]})}}getSelectedAlternatives(e){return Object.keys(this.formQuestionnaire.value.questions[e].alternatives).filter(t=>this.formQuestionnaire.value.questions[e].alternatives[t])||[]}nextStep(){if(!this.canContinue(this.questionnaire[this.currentStep]))return!1;this.currentStep++}backStep(){this.currentStep--}canContinue(e){return"S"!=e.question_required||(["1","2"].includes(e.answer_type)?""!=this.formQuestionnaire.value.questions[this.currentStep].description:["3","5"].includes(e.answer_type)?""!=this.formQuestionnaire.value.questions[this.currentStep].alternative:["4"].includes(e.answer_type)?Object.values(this.formQuestionnaire.value.questions[this.currentStep].alternatives).filter(e=>1==e).length>0:["6"].includes(e.answer_type)?""!=this.formQuestionnaire.value.questions[this.currentStep].alternative&&""!=this.formQuestionnaire.value.questions[this.currentStep].comment:void 0)}generateQuestionsArray(e){return["1","2"].includes(e.type)?{type:e.type,question_code:e.code,description:e.description}:["3","5"].includes(e.type)?{type:e.type,question_code:e.code,alternative_code:e.alternative}:["4"].includes(e.type)?{type:e.type,question_code:e.code,alternatives:Object.keys(e.alternatives).filter(t=>e.alternatives[t])}:["6"].includes(e.type)?{type:e.type,question_code:e.code,alternative_code:e.alternative,comment:e.comment}:void 0}finalize(){c.a.fire({title:"Voc\xea tem certeza que deseja finalizar a avalia\xe7\xe3o?",showCancelButton:!0,confirmButtonText:"Finalizar",cancelButtonText:"Cancelar"}).then(e=>{if(e.isConfirmed){let e=[];this.formQuestionnaire.value.questions.map(t=>{if(e.push(this.generateQuestionsArray(t)),t.conditional&&Object.keys(t.conditional).length>0)switch(t.type){case"3":case"5":""!=t.alternative&&t.conditional[t.alternative]&&e.push(this.generateQuestionsArray(t.conditional[t.alternative]));break;case"4":Object.keys(t.alternatives).filter(e=>t.alternatives[e]).map(n=>{e.push(this.generateQuestionsArray(t.conditional[n]))})}}),this.questionnaireService.setQuestions(e).subscribe(e=>{var t=this.commonService.base64Encode(JSON.stringify({subject:this.subject}));this.router.navigate(["/subject/grades-and-tests/list",t]).then(()=>{c.a.fire({html:"Avalia\xe7\xe3o finalizada com sucesso!",icon:"success"})})})}})}return(){var e=this.commonService.base64Encode(JSON.stringify({subject:this.subject}));this.router.navigate(["/subject/grades-and-tests/list",e])}}return e.\u0275fac=function(t){return new(t||e)(f["\u0275\u0275directiveInject"](a.a),f["\u0275\u0275directiveInject"](a.e),f["\u0275\u0275directiveInject"](h.a),f["\u0275\u0275directiveInject"](ji.a),f["\u0275\u0275directiveInject"](m.FormBuilder))},e.\u0275cmp=f["\u0275\u0275defineComponent"]({type:e,selectors:[["app-answer-cmh"]],decls:10,vars:3,consts:[[1,"return-link"],["mat-button","",1,"font-light",3,"click"],[1,"test-page-title"],[1,"page-title","font-ultra","mb-2"],[1,"font-light"],[4,"ngIf"],[1,"info-grid"],[1,"info-item"],[1,"title"],["labelPosition","bottom",1,"mt-3",3,"linear"],["stepper",""],[3,"completed",4,"ngFor","ngForOf"],[3,"completed"],[1,"question-card"],[1,"question"],[1,"mt-3",3,"formGroup"],["formArrayName","questions"],["class","animated animated-fast fadeIn alternatives",3,"formGroupName",4,"ngIf"],[1,"buttons"],["type","button","class","mr-3","mat-raised-button","","color","ava-primary","matStepperPrevious","",4,"ngIf"],["type","button","class","mr-3","mat-raised-button","","color","ava-primary","matStepperNext","",4,"ngIf"],["type","button","class","mr-3","mat-raised-button","","color","ava-primary",3,"click",4,"ngIf"],[1,"animated","animated-fast","fadeIn","alternatives",3,"formGroupName"],["formGroupName","alternatives",4,"ngIf"],["formGroupName","conditional",4,"ngIf"],["appearance","outline",1,"w-100"],["matInput","","type","text","formControlName","description"],["matInput","","rows","5","maxlength","500","formControlName","description","placeholder","Escreva sua Resposta..."],["formControlName","alternative"],["class","checkbox-container",4,"ngFor","ngForOf"],[1,"checkbox-container"],[3,"value"],[3,"innerHtml"],["formGroupName","alternatives"],[3,"formControlName"],["placeholder","-- Selecione --","interface","action-sheet","okText","Selecionar","cancelText","Cancelar","formControlName","alternative"],[3,"value",4,"ngFor","ngForOf"],["matInput","","rows","5","maxlength","500","formControlName","comment","placeholder","Escreva sua Resposta..."],["formGroupName","conditional"],[4,"ngFor","ngForOf"],["class","ion-margin-top",3,"formGroupName","hide",4,"ngIf"],[1,"ion-margin-top",3,"formGroupName"],["type","button","mat-raised-button","","color","ava-primary","matStepperPrevious","",1,"mr-3"],["type","button","mat-raised-button","","color","ava-primary","matStepperNext","",1,"mr-3"],["type","button","mat-raised-button","","color","ava-primary",1,"mr-3",3,"click"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275elementStart"](1,"a",1),f["\u0275\u0275listener"]("click",(function(){return t.return()})),f["\u0275\u0275element"](2,"img"),f["\u0275\u0275text"](3," VOLTAR "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"div",2),f["\u0275\u0275elementStart"](5,"div",3),f["\u0275\u0275elementStart"](6,"span",4),f["\u0275\u0275text"](7),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](8,Mi,1,0,"ava-spinner",5),f["\u0275\u0275template"](9,lr,19,12,"ng-container",5)),2&e&&(f["\u0275\u0275advance"](7),f["\u0275\u0275textInterpolate1"]("Question\xe1rio B\xf4nus (Cod.:",t.test.code,")"),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",t.isLoading),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",!t.isLoading))},directives:[y.a,b.t,E.a,vt.a,b.s,vt.b,m["\u0275angular_packages_forms_forms_y"],m.NgControlStatusGroup,m.FormGroupDirective,m.FormArrayName,m.FormGroupName,S.c,Z.b,m.DefaultValueAccessor,m.NgControlStatus,m.FormControlName,m.MaxLengthValidator,En.b,En.a,Pi.a,C.a,_.o,y.b,vt.i,vt.h],pipes:[b.f],styles:[".hide[_ngcontent-%COMP%]{display:none}.test-page-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.test-page-title[_ngcontent-%COMP%]   .button-view-mode[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.test-page-title[_ngcontent-%COMP%]   .button-view-mode[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px}.question[_ngcontent-%COMP%]{padding:15px}.button-fontsize[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;font-size:16px}.checkbox-container[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column} .stepper-cpa.hide-header .mat-horizontal-stepper-header-container{display:none!important} .stepper-cpa.hide-header .step-title{display:block!important}"]}),e})(),canActivate:[r.a]},{path:"pending",component:Ja,canActivate:[r.a]},{path:"institutional-test/:param",component:Oi,canActivate:[r.a]}];let dr=(()=>{class e{constructor(){}}return e.\u0275mod=f["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[Location,{provide:Ta.b,useClass:Wa.a},X],imports:[[i.a,a.i.forChild(cr),vt.g,w.b,Ta.d,Dn.b,ce.c],a.i]}),e})()}}]);